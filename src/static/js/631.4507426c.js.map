{"version":3,"file":"static/js/631.4507426c.js","mappings":"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","sources":["webpack://daili/./src/components/customer-management/personal-customer/list/customer-retrieve-dialog.vue?6ed4","webpack://daili/./src/components/customer-management/personal-customer/list/customer-retrieve-dialog.vue","webpack://daili/./src/components/customer-management/personal-customer/list/customer-retrieve-dialog.vue?8d4f"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"body-container\" }\nconst _hoisted_2 = { class: \"dialog-footer\" }\n\nimport { ref, shallowReactive } from \"vue\";\r\n\r\nimport { useModel } from \"@assets/useHook\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\nimport { searchCompanyApi } from \"@api/common-api\";\r\nimport { customerRetrieveApi } from \"@api/customer-management-api\";\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'customer-retrieve-dialog',\n  props: {\n    visible: { type: Boolean }\n  },\n  emits: [\"emitFunc\", \"update:visible\"],\n  setup(__props: any, { emit: __emit }) {\n\r\nconst props = __props;\r\nconst emits = __emit;\r\n\r\nconst { bd_agentId: agentId, bd_userInfo: userInfo } =\r\n  LocalStorage.batchGetItem([\"bd_agentId\", \"bd_userInfo\"]);\r\n\r\nconst formRef = ref();\r\nconst visibleModel = useModel(props, \"visible\", emits);\r\nconst formData = shallowReactive({\r\n  companyId: \"\",\r\n  createdByName: \"\",\r\n  createdByAccount: \"\",\r\n  retrieveReason: \"\",\r\n  fileIds: [],\r\n  profileId: \"\", // 找回客户的id\r\n  agentId, // 代理商的id\r\n  inviterId: userInfo.profileId, // 代理商在数企的id\r\n});\r\nconst paramsData = shallowReactive({\r\n  companyList: [],\r\n  defaultFileList: [],\r\n  remoteLoading: false,\r\n});\r\nconst rules = {\r\n  companyId: [\r\n    {\r\n      required: true,\r\n      message: \"请输入选择公司名称\",\r\n      trigger: \"change\",\r\n    },\r\n  ],\r\n  createdByName: [\r\n    { required: true, message: \"请输入创建人名称\", trigger: \"blur\" },\r\n  ],\r\n  createdByAccount: [\r\n    { required: true, message: \"请输入创建人账号\", trigger: \"blur\" },\r\n  ],\r\n  retrieveReason: [\r\n    { required: true, message: \"请输入找回原因\", trigger: \"blur\" },\r\n  ],\r\n};\r\n// 搜索公司\r\nconst handleRemoteCompany = async (query: string) => {\r\n  if (query) {\r\n    paramsData.remoteLoading = true;\r\n    const params = {\r\n      companyName: query,\r\n      pageNo: 1,\r\n      pageSize: 10,\r\n    };\r\n    const { data } = await searchCompanyApi.getData(params);\r\n    paramsData.remoteLoading = false;\r\n    paramsData.companyList = searchCompanyApi.handleData(data).list;\r\n  } else {\r\n    paramsData.companyList = [];\r\n  }\r\n};\r\n// 选择公司\r\nconst handleSelectCompany = (value) => {\r\n  const companyInfo: any = paramsData.companyList.find(\r\n    (item: Record<string, any>) => item.companyId === value\r\n  );\r\n  formData.profileId = companyInfo?.createdBy;\r\n};\r\nconst handleClose = () => {\r\n  formRef.value.resetFields();\r\n  paramsData.defaultFileList = [];\r\n  visibleModel.value = false;\r\n};\r\n// 获取证明材料图片\r\nconst getMaterialImg = (value) => {\r\n  formData.fileIds = value;\r\n};\r\nconst handleSubmit = () => {\r\n  if (!formRef.value) return;\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      try {\r\n        await customerRetrieveApi.getData(formData);\r\n        emits(\"emitFunc\");\r\n        handleClose();\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n  });\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_CustomUpload = _resolveComponent(\"CustomUpload\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    \"model-value\": _ctx.visible,\n    class: \"custom-dialog\",\n    width: \"550px\",\n    title: \"客户找回\",\n    \"before-close\": handleClose\n  }, {\n    footer: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_el_button, { onClick: handleClose }, {\n          default: _withCtx(() => _cache[5] || (_cache[5] = [\n            _createTextVNode(\"取消\")\n          ])),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: handleSubmit\n        }, {\n          default: _withCtx(() => _cache[6] || (_cache[6] = [\n            _createTextVNode(\"确定\")\n          ])),\n          _: 1\n        })\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_el_form, {\n          ref_key: \"formRef\",\n          ref: formRef,\n          model: _unref(formData),\n          rules: rules,\n          \"label-width\": \"100px\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, {\n              prop: \"companyId\",\n              label: \"企业名称\",\n              class: \"remote-company\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_select, {\n                  modelValue: _unref(formData).companyId,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(formData).companyId) = $event)),\n                  modelModifiers: { trim: true },\n                  filterable: \"\",\n                  remote: \"\",\n                  \"reserve-keyword\": \"\",\n                  placeholder: \"请输入\",\n                  onChange: handleSelectCompany,\n                  \"remote-method\": handleRemoteCompany,\n                  loading: _unref(paramsData).remoteLoading\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(paramsData).companyList, (item) => {\n                      return (_openBlock(), _createBlock(_component_el_option, {\n                        key: item.companyId,\n                        label: `${item.companyName}（${item.companyCode}）`,\n                        value: item.companyId\n                      }, null, 8, [\"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\", \"loading\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              prop: \"createdByName\",\n              label: \"创建人名称\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: _unref(formData).createdByName,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(formData).createdByName) = $event)),\n                  placeholder: \"请输入创建人名称\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              prop: \"createdByAccount\",\n              label: \"创建人账号\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: _unref(formData).createdByAccount,\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(formData).createdByAccount) = $event)),\n                  placeholder: \"请输入创建人账号\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              prop: \"retrieveReason\",\n              label: \"找回原因\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: _unref(formData).retrieveReason,\n                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(formData).retrieveReason) = $event)),\n                  maxlength: \"100\",\n                  \"show-word-limit\": \"\",\n                  type: \"textarea\",\n                  placeholder: \"请输入找回原因\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              prop: \"material\",\n              label: \"证明材料\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_CustomUpload, {\n                  limit: 5,\n                  maxVolume: 10,\n                  onEmitUpload: getMaterialImg,\n                  listType: \"picture-card\",\n                  defaultFileList: _unref(paramsData).defaultFileList,\n                  \"onUpdate:defaultFileList\": _cache[4] || (_cache[4] = ($event: any) => ((_unref(paramsData).defaultFileList) = $event)),\n                  tip: \"可上传相关证明图片，联系截图、客户营业执照等，单张图片小于10M,最多可上传5张图片\"\n                }, null, 8, [\"defaultFileList\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\"])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"model-value\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    :model-value=\"visible\"\r\n    class=\"custom-dialog\"\r\n    width=\"550px\"\r\n    title=\"客户找回\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n    <div class=\"body-container\">\r\n      <el-form\r\n        ref=\"formRef\"\r\n        :model=\"formData\"\r\n        :rules=\"rules\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-form-item prop=\"companyId\" label=\"企业名称\" class=\"remote-company\">\r\n          <el-select\r\n            v-model.trim=\"formData.companyId\"\r\n            filterable\r\n            remote\r\n            reserve-keyword\r\n            placeholder=\"请输入\"\r\n            @change=\"handleSelectCompany\"\r\n            :remote-method=\"handleRemoteCompany\"\r\n            :loading=\"paramsData.remoteLoading\"\r\n          >\r\n            <el-option\r\n              v-for=\"item in paramsData.companyList\"\r\n              :key=\"item.companyId\"\r\n              :label=\"`${item.companyName}（${item.companyCode}）`\"\r\n              :value=\"item.companyId\"\r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item prop=\"createdByName\" label=\"创建人名称\">\r\n          <el-input\r\n            v-model=\"formData.createdByName\"\r\n            placeholder=\"请输入创建人名称\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"createdByAccount\" label=\"创建人账号\">\r\n          <el-input\r\n            v-model=\"formData.createdByAccount\"\r\n            placeholder=\"请输入创建人账号\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"retrieveReason\" label=\"找回原因\">\r\n          <el-input\r\n            v-model=\"formData.retrieveReason\"\r\n            maxlength=\"100\"\r\n            show-word-limit\r\n            type=\"textarea\"\r\n            placeholder=\"请输入找回原因\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"material\" label=\"证明材料\">\r\n          <CustomUpload\r\n            :limit=\"5\"\r\n            :maxVolume=\"10\"\r\n            @emitUpload=\"getMaterialImg\"\r\n            listType=\"picture-card\"\r\n            v-model:defaultFileList=\"paramsData.defaultFileList\"\r\n            tip=\"可上传相关证明图片，联系截图、客户营业执照等，单张图片小于10M,最多可上传5张图片\"\r\n          ></CustomUpload>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleSubmit\">确定</el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, shallowReactive } from \"vue\";\r\n\r\nimport { useModel } from \"@assets/useHook\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\nimport { searchCompanyApi } from \"@api/common-api\";\r\nimport { customerRetrieveApi } from \"@api/customer-management-api\";\r\nconst props = defineProps<{\r\n  visible: boolean;\r\n}>();\r\nconst emits = defineEmits<{\r\n  (e: \"emitFunc\");\r\n  (e: \"update:visible\", value: boolean);\r\n}>();\r\n\r\nconst { bd_agentId: agentId, bd_userInfo: userInfo } =\r\n  LocalStorage.batchGetItem([\"bd_agentId\", \"bd_userInfo\"]);\r\n\r\nconst formRef = ref();\r\nconst visibleModel = useModel(props, \"visible\", emits);\r\nconst formData = shallowReactive({\r\n  companyId: \"\",\r\n  createdByName: \"\",\r\n  createdByAccount: \"\",\r\n  retrieveReason: \"\",\r\n  fileIds: [],\r\n  profileId: \"\", // 找回客户的id\r\n  agentId, // 代理商的id\r\n  inviterId: userInfo.profileId, // 代理商在数企的id\r\n});\r\nconst paramsData = shallowReactive({\r\n  companyList: [],\r\n  defaultFileList: [],\r\n  remoteLoading: false,\r\n});\r\nconst rules = {\r\n  companyId: [\r\n    {\r\n      required: true,\r\n      message: \"请输入选择公司名称\",\r\n      trigger: \"change\",\r\n    },\r\n  ],\r\n  createdByName: [\r\n    { required: true, message: \"请输入创建人名称\", trigger: \"blur\" },\r\n  ],\r\n  createdByAccount: [\r\n    { required: true, message: \"请输入创建人账号\", trigger: \"blur\" },\r\n  ],\r\n  retrieveReason: [\r\n    { required: true, message: \"请输入找回原因\", trigger: \"blur\" },\r\n  ],\r\n};\r\n// 搜索公司\r\nconst handleRemoteCompany = async (query: string) => {\r\n  if (query) {\r\n    paramsData.remoteLoading = true;\r\n    const params = {\r\n      companyName: query,\r\n      pageNo: 1,\r\n      pageSize: 10,\r\n    };\r\n    const { data } = await searchCompanyApi.getData(params);\r\n    paramsData.remoteLoading = false;\r\n    paramsData.companyList = searchCompanyApi.handleData(data).list;\r\n  } else {\r\n    paramsData.companyList = [];\r\n  }\r\n};\r\n// 选择公司\r\nconst handleSelectCompany = (value) => {\r\n  const companyInfo: any = paramsData.companyList.find(\r\n    (item: Record<string, any>) => item.companyId === value\r\n  );\r\n  formData.profileId = companyInfo?.createdBy;\r\n};\r\nconst handleClose = () => {\r\n  formRef.value.resetFields();\r\n  paramsData.defaultFileList = [];\r\n  visibleModel.value = false;\r\n};\r\n// 获取证明材料图片\r\nconst getMaterialImg = (value) => {\r\n  formData.fileIds = value;\r\n};\r\nconst handleSubmit = () => {\r\n  if (!formRef.value) return;\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      try {\r\n        await customerRetrieveApi.getData(formData);\r\n        emits(\"emitFunc\");\r\n        handleClose();\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    }\r\n  });\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.body-container {\r\n  padding: 0 10px;\r\n}\r\n:deep(.el-form-item.remote-company) {\r\n  .el-select {\r\n    width: 100%;\r\n  }\r\n}\r\n.custom-upload-img {\r\n  margin-bottom: 10px;\r\n}\r\n</style>\r\n","import script from \"./customer-retrieve-dialog.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./customer-retrieve-dialog.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./customer-retrieve-dialog.vue?vue&type=style&index=0&id=2fae54de&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2fae54de\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_defineComponent","__name","props","visible","type","Boolean","emits","setup","__props","emit","__emit","bd_agentId","agentId","bd_userInfo","userInfo","LocalStorage","batchGetItem","formRef","ref","visibleModel","useModel","formData","shallowReactive","companyId","createdByName","createdByAccount","retrieveReason","fileIds","profileId","inviterId","paramsData","companyList","defaultFileList","remoteLoading","rules","required","message","trigger","handleRemoteCompany","async","query","params","companyName","pageNo","pageSize","data","searchCompanyApi","getData","handleData","list","handleSelectCompany","value","companyInfo","find","item","createdBy","handleClose","resetFields","getMaterialImg","handleSubmit","validate","valid","customerRetrieveApi","e","console","log","_ctx","_cache","_component_el_option","_resolveComponent","_component_el_select","_component_el_form_item","_component_el_input","_component_CustomUpload","_component_el_form","_component_el_button","_component_el_dialog","_openBlock","_createBlock","width","title","footer","_withCtx","_createElementVNode","_createVNode","onClick","default","_createTextVNode","_","ref_key","model","_unref","prop","label","modelValue","$event","modelModifiers","trim","filterable","remote","placeholder","onChange","loading","_createElementBlock","_Fragment","_renderList","key","companyCode","maxlength","limit","maxVolume","onEmitUpload","listType","tip","__exports__"],"sourceRoot":""}