"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[7991],{28213:function(e,u,l){l.r(u),l.d(u,{default:function(){return C}});l(95226),l(59784),l(47961),l(83238);var a=l(6254),i=l(38627),o=l(25598),n=l(10901),t=l(88365),v=l(4710),d=l(8610),r=l(64108);const s={class:"product-detail"},c={class:"service-specs"},m={class:"purchased-info"},p={class:"word"},f="CALL_PACKAGE_ADDED_NEW2_CHARGE";var b=(0,a.pM)({__name:"cloud-call-package-seat",props:{productData:{},purchasedData:{}},setup(e){const{routeQuery:u}=(0,n.dG)(),{serviceCode:l,companyId:b,profileId:g,buyType:C}=u.value,{bd_userInfo:h}=t.DT.batchGetItem(["bd_userInfo"]),y=e,L=(0,o.Gc)({count:0,customCount:1,sumPrice:"0.00"}),P=(0,o.IJ)({price:"0.00",sumPrice:"0.00",unitPrice:"0.00",addedPrice:"0.00",subMarketList:[],hasAgentPrice:!1}),k=(0,a.EW)((()=>y.purchasedData)),E=(0,a.EW)((()=>y.productData)),_=(0,a.EW)((()=>E.value.serviceInfo)),N=(0,a.EW)((()=>{var e;return null===(e=E.value)||void 0===e?void 0:e.addedServiceList.find((e=>e.addedServiceCode===f))})),A=(0,a.EW)((()=>{const e={minNum:1,maxNum:1e5,coding:"",unitPrice:"0.00",serviceCode:"",groupNameList:[],groupCodeList:[],groupValueList:[]};if(!N.value.specsList.length)return e;const u=u=>{const l=N.value.specsList.find((e=>e.groupValues===u));var a,i,o;return l?{minNum:null===l||void 0===l?void 0:l.minNum,maxNum:null===l||void 0===l?void 0:l.maxNum,coding:null===l||void 0===l?void 0:l.coding,unitPrice:null===l||void 0===l?void 0:l.unitPrice,serviceCode:null===l||void 0===l?void 0:l.serviceCode,groupNameList:(null===l||void 0===l||null===(a=l.groupNames)||void 0===a?void 0:a.split(","))||[],groupCodeList:(null===l||void 0===l||null===(i=l.groupCodes)||void 0===i?void 0:i.split(","))||[],groupValueList:(null===l||void 0===l||null===(o=l.groupValues)||void 0===o?void 0:o.split(","))||[]}:e},{minimunCharge:l,chooseMinFee:a,callSoftPrice:i,chooseMinute:o}=k.value,n=`${l},${a},${i},${o}`;return u(n)})),I=(0,a.EW)((()=>{var e,u;const a=[{label:"10个",value:10},{label:"30个",value:30},{label:"50个",value:50}];var i,o;null!==(e=E.value)&&void 0!==e&&e.canBuy&&a.unshift({label:`${null===(i=A.value)||void 0===i?void 0:i.minNum}个`,value:Number(null===(o=A.value)||void 0===o?void 0:o.minNum)});return"PACKAGE_CALL_SEAT"===l&&a.push({label:"100个",value:100}),null!==(u=N.value)&&void 0!==u&&u.isDiy&&a.push({label:"自定义",value:"custom"}),a})),$=(0,a.EW)((()=>"custom"===L.count?L.customCount:L.count)),V=(0,a.EW)((()=>{var e;const u=dayjs().startOf("month"),l=dayjs(null===(e=k.value)||void 0===e?void 0:e.endTime).endOf("month");return l.diff(u,"month")||0})),W=(0,a.EW)((()=>{var e;return`合计：（坐席单价${P.value.unitPrice}元/坐席/月 + 系统软件费${null===(e=k.value)||void 0===e?void 0:e.callSoftPrice}元/坐席/月） x 剩余${V.value}个月 x ${$.value}个坐席 = ${P.value.sumPrice}元`}));function D(){var e,u;L.count=null===(e=I.value[0])||void 0===e?void 0:e.value,L.customCount=null===(u=A.value)||void 0===u?void 0:u.minNum,F()}function x(){var e;const u={agentId:h.profileId,buyCar:!1,helpOrder:1,buyType:C??"BUY_SERVER",companyId:b,profileId:g,shopBuyList:[{agentId:h.profileId,isisTry:!1,dateType:"3",dateValue:1,marketCode:l,userNumber:$.value,coding:[{code:A.value.serviceCode,coding:A.value.coding,num:$.value}],baseCodeList:A.value.groupCodeList.map(((e,u)=>({baseCode:e,number:A.value.groupValueList[u]})))}],sumPrice:P.value.sumPrice},a={list:[{..._.value,price:P.value.price,specsInfo:`坐席数量：${$.value}个坐席；合作周期：${V.value}个月；坐席单价：${P.value.unitPrice}元/坐席/月；系统软件费：${null===(e=k.value)||void 0===e?void 0:e.callSoftPrice}元/坐席/月；`}],sumPrice:P.value.sumPrice};return{params:u,commodityInfo:a}}async function F(){const e=x().params;P.value=await(0,v.AV)(e)}function R(){(0,v.$d)(x())}return D(),(e,u)=>{var l;const n=(0,a.g2)("el-form-item"),t=(0,a.g2)("el-option"),v=(0,a.g2)("el-select"),f=(0,a.g2)("el-input-number"),b=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(r.A,{serviceData:_.value},null,8,["serviceData"]),(0,a.Lk)("div",c,[(0,a.bF)(b,{"label-width":"150px"},{default:(0,a.k6)((()=>{var e;return[null!==(e=E.value)&&void 0!==e&&e.canBuy?((0,a.uX)(),(0,a.Wv)(n,{key:0,label:"已购详情"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",m,[(0,a.Lk)("span",null," 已购坐席数："+(0,i.v_)(k.value.seatSize)+(0,i.v_)(_.value.unit),1),(0,a.Lk)("span",null,"服务到期时间："+(0,i.v_)(k.value.endTime),1)])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(n,{label:"购买数量",class:"amount-form-item"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:(0,o.R1)(L).count,"onUpdate:modelValue":u[0]||(u[0]=e=>(0,o.R1)(L).count=e),onChange:F},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.value,(e=>((0,a.uX)(),(0,a.Wv)(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),"custom"===(0,o.R1)(L).count?((0,a.uX)(),(0,a.Wv)(f,{key:0,modelValue:(0,o.R1)(L).customCount,"onUpdate:modelValue":u[1]||(u[1]=e=>(0,o.R1)(L).customCount=e),min:A.value.minNum,max:A.value.maxNum,step:N.value.miniNum,onChange:F},null,8,["modelValue","min","max","step"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)((()=>[(0,a.Lk)("p",p,(0,i.v_)(W.value),1)])),_:1})]})),_:1}),(0,a.bF)(d.A,{onEmitFunc:R,"buy-price":P.value.price,"can-buy":null===(l=E.value)||void 0===l?void 0:l.canBuy,hasAgentPrice:P.value.hasAgentPrice,tip:"购买此产品前，需要先买鱼鹰呼叫套餐"},null,8,["buy-price","can-buy","hasAgentPrice"])])])}}});const g=b;var C=g}}]);
//# sourceMappingURL=7991.d49c9116.js.map