"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[631],{40631:function(e,a,l){l.r(a),l.d(a,{default:function(){return f}});l(59784),l(47961);var t=l(6254),o=l(25598),d=l(10901),i=l(88365),r=l(57030),n=l(79689);const u={class:"body-container"},c={class:"dialog-footer"};var m=(0,t.pM)({__name:"customer-retrieve-dialog",props:{visible:{type:Boolean}},emits:["emitFunc","update:visible"],setup(e,{emit:a}){const l=e,m=a,{bd_agentId:s,bd_userInfo:p}=i.DT.batchGetItem(["bd_agentId","bd_userInfo"]),f=(0,o.KR)(),g=(0,d.fn)(l,"visible",m),y=(0,o.Gc)({companyId:"",createdByName:"",createdByAccount:"",retrieveReason:"",fileIds:[],profileId:"",agentId:s,inviterId:p.profileId}),b=(0,o.Gc)({companyList:[],defaultFileList:[],remoteLoading:!1}),v={companyId:[{required:!0,message:"请输入选择公司名称",trigger:"change"}],createdByName:[{required:!0,message:"请输入创建人名称",trigger:"blur"}],createdByAccount:[{required:!0,message:"请输入创建人账号",trigger:"blur"}],retrieveReason:[{required:!0,message:"请输入找回原因",trigger:"blur"}]},F=async e=>{if(e){b.remoteLoading=!0;const a={companyName:e,pageNo:1,pageSize:10},{data:l}=await r.Co.getData(a);b.remoteLoading=!1,b.companyList=r.Co.handleData(l).list}else b.companyList=[]},k=e=>{const a=b.companyList.find((a=>a.companyId===e));y.profileId=null===a||void 0===a?void 0:a.createdBy},I=()=>{f.value.resetFields(),b.defaultFileList=[],g.value=!1},R=e=>{y.fileIds=e},_=()=>{f.value&&f.value.validate((async e=>{if(e)try{await n.dJ.getData(y),m("emitFunc"),I()}catch(a){console.log(a)}}))};return(e,a)=>{const l=(0,t.g2)("el-option"),d=(0,t.g2)("el-select"),i=(0,t.g2)("el-form-item"),r=(0,t.g2)("el-input"),n=(0,t.g2)("CustomUpload"),m=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),p=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(p,{"model-value":e.visible,class:"custom-dialog",width:"550px",title:"客户找回","before-close":I},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",c,[(0,t.bF)(s,{onClick:I},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(s,{type:"primary",onClick:_},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("确定")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.Lk)("div",u,[(0,t.bF)(m,{ref_key:"formRef",ref:f,model:(0,o.R1)(y),rules:v,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(i,{prop:"companyId",label:"企业名称",class:"remote-company"},{default:(0,t.k6)((()=>[(0,t.bF)(d,{modelValue:(0,o.R1)(y).companyId,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,o.R1)(y).companyId=e),modelModifiers:{trim:!0},filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入",onChange:k,"remote-method":F,loading:(0,o.R1)(b).remoteLoading},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,o.R1)(b).companyList,(e=>((0,t.uX)(),(0,t.Wv)(l,{key:e.companyId,label:`${e.companyName}（${e.companyCode}）`,value:e.companyId},null,8,["label","value"])))),128))])),_:1},8,["modelValue","loading"])])),_:1}),(0,t.bF)(i,{prop:"createdByName",label:"创建人名称"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:(0,o.R1)(y).createdByName,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.R1)(y).createdByName=e),placeholder:"请输入创建人名称"},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{prop:"createdByAccount",label:"创建人账号"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:(0,o.R1)(y).createdByAccount,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,o.R1)(y).createdByAccount=e),placeholder:"请输入创建人账号"},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{prop:"retrieveReason",label:"找回原因"},{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:(0,o.R1)(y).retrieveReason,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,o.R1)(y).retrieveReason=e),maxlength:"100","show-word-limit":"",type:"textarea",placeholder:"请输入找回原因"},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{prop:"material",label:"证明材料"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{limit:5,maxVolume:10,onEmitUpload:R,listType:"picture-card",defaultFileList:(0,o.R1)(b).defaultFileList,"onUpdate:defaultFileList":a[4]||(a[4]=e=>(0,o.R1)(b).defaultFileList=e),tip:"可上传相关证明图片，联系截图、客户营业执照等，单张图片小于10M,最多可上传5张图片"},null,8,["defaultFileList"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["model-value"])}}}),s=l(83936);const p=(0,s.A)(m,[["__scopeId","data-v-2fae54de"]]);var f=p}}]);
//# sourceMappingURL=631.4507426c.js.map