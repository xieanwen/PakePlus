{"version":3,"file":"static/js/2207.301c6913.js","mappings":"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","sources":["webpack://daili/./src/views/customer-management/personal-customer/list.vue?c216","webpack://daili/./src/views/customer-management/personal-customer/list.vue","webpack://daili/./src/views/customer-management/personal-customer/list.vue?e3e1"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"personal-customer main-container\" }\nconst _hoisted_2 = { class: \"form-container\" }\nconst _hoisted_3 = { class: \"form\" }\nconst _hoisted_4 = { class: \"table-container\" }\n\nimport { ElMessageBox } from \"element-plus\";\r\nimport { ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\n\r\nimport { usePage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\nimport { allCustomerApi } from \"@api/customer-management-api\";\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\r\n  name: \"customerManagement.personalCustomer.list\",\r\n},\n  __name: 'list',\n  setup(__props) {\n\r\nconst AddSubCustomerDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@components/customer-management/personal-customer/list/add-sub-customer-dialog.vue\"\r\n    )\r\n);\r\nconst AdvancedFilterDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@components/customer-management/personal-customer/list/advanced-filter-drawer.vue\"\r\n    )\r\n);\r\nconst CustomerRetrieveDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@components/customer-management/personal-customer/list/customer-retrieve-dialog.vue\"\r\n    )\r\n);\r\n\r\n\r\n\r\nconst { goPage } = useVueRouter();\r\nconst { bd_userInfo: userInfo, bd_existCallInterface: existCallInterface } =\r\n  LocalStorage.batchGetItem([\"bd_userInfo\", \"bd_existCallInterface\"]);\r\nconst initData = shallowReactive({\r\n  addSubCustomerVisible: false,\r\n  advancedFilterVisible: false,\r\n  customerRetrieveVisible: false,\r\n});\r\nconst paramsData = shallowReactive({\r\n  parentId: userInfo.profileId,\r\n});\r\n// 高级筛选条件\r\nconst conditionData = ref({});\r\nconst { getList, pageNumberChange, pageSizeChange, pageData, resetPageNumber } =\r\n  usePage({\r\n    listApi: allCustomerApi,\r\n    props: {\r\n      pageSize: {\r\n        name: \"pageSize\",\r\n        default: 20,\r\n      },\r\n      pageNumber: {\r\n        name: \"page\",\r\n        default: 1,\r\n      },\r\n    },\r\n    searchParams: () => {\r\n      return {\r\n        parentId: userInfo.profileId,\r\n        ...conditionData.value,\r\n      };\r\n    },\r\n  });\r\n\r\n// 高级搜索\r\nconst handleAdvancedFilter = (value: Record<string, any>) => {\r\n  conditionData.value = value;\r\n  resetPageNumber();\r\n  getList();\r\n};\r\n\r\n// 查看详情\r\nconst handleLookDetail = ({ profileId, companyId }) => {\r\n  goPage(\r\n    `/customerManagement/personalCustomer/detail?profileId=${profileId}&companyId=${companyId}`\r\n  );\r\n};\r\n/**\r\n * {type} customerRetrieve：客户找回、advancedFilter：高级搜索、addSubCustomer：新增子客户\r\n */\r\nconst handleOperate = (\r\n  type:\r\n    | \"addSubCustomerVisible\"\r\n    | \"advancedFilterVisible\"\r\n    | \"customerRetrieveVisible\"\r\n) => {\r\n  initData[type] = true;\r\n};\r\n// 驳回原因\r\nconst handleLookReason = (row) => {\r\n  ElMessageBox.alert(\r\n    `<p style='font-size: 14px;'>尊敬代理商，您好！</p><p style='text-indent: 2em;font-size: 13px;word-break: break-word;margin-top: 10px;'>${\r\n      row.rejectReason ?? \"\"\r\n    }</p>`,\r\n    \"驳回原因\",\r\n    {\r\n      dangerouslyUseHTMLString: true,\r\n      callback: () => {},\r\n    }\r\n  );\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_link = _resolveComponent(\"el-link\")!\n  const _component_TableEmpty = _resolveComponent(\"TableEmpty\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_PagePagination = _resolveComponent(\"PagePagination\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          (_unref(existCallInterface) !== 0)\n            ? (_openBlock(), _createBlock(_component_el_button, {\n                key: 0,\n                type: \"primary\",\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (handleOperate('addSubCustomerVisible')))\n              }, {\n                default: _withCtx(() => _cache[6] || (_cache[6] = [\n                  _createTextVNode(\"新增子客户\")\n                ])),\n                _: 1\n              }))\n            : _createCommentVNode(\"\", true),\n          _createVNode(_component_el_button, {\n            onClick: _cache[1] || (_cache[1] = ($event: any) => (handleOperate('customerRetrieveVisible')))\n          }, {\n            default: _withCtx(() => _cache[7] || (_cache[7] = [\n              _createTextVNode(\"客户找回\")\n            ])),\n            _: 1\n          }),\n          _createVNode(_component_el_button, {\n            onClick: _cache[2] || (_cache[2] = ($event: any) => (handleOperate('advancedFilterVisible')))\n          }, {\n            default: _withCtx(() => _cache[8] || (_cache[8] = [\n              _createTextVNode(\"高级筛选\")\n            ])),\n            _: 1\n          })\n        ])\n      ]),\n      _createElementVNode(\"div\", _hoisted_4, [\n        _createVNode(_component_el_table, {\n          data: _unref(pageData).list,\n          height: \"calc(100vh - 270px)\"\n        }, {\n          empty: _withCtx(() => [\n            _createVNode(_component_TableEmpty, { \"empty-text\": \"您还没有下级客户，试试点击右上角二维码去邀请\" })\n          ]),\n          default: _withCtx(() => [\n            _createVNode(_component_el_table_column, {\n              prop: \"companyName\",\n              label: \"企业名称\",\n              align: \"center\",\n              \"min-width\": \"250\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"companyCode\",\n              label: \"企业code\",\n              align: \"center\",\n              \"min-width\": \"200\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"companyPhone\",\n              label: \"企业电话\",\n              align: \"center\",\n              \"min-width\": \"200\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"businessTypeName\",\n              label: \"业务类型\",\n              align: \"center\",\n              \"min-width\": \"150\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"createdTime\",\n              label: \"创建时间\",\n              align: \"center\",\n              \"min-width\": \"200\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"founderName\",\n              label: \"创建人名称\",\n              align: \"center\",\n              \"min-width\": \"220\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"founderAccount\",\n              label: \"创建人账号\",\n              align: \"center\",\n              \"min-width\": \"200\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"customerResourceName\",\n              label: \"客户来源\",\n              align: \"center\",\n              \"min-width\": \"120\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"dealStatusName\",\n              label: \"成交状态\",\n              align: \"center\",\n              \"min-width\": \"120\"\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"serviceStatusName\",\n              label: \"服务状态\",\n              align: \"center\",\n              \"min-width\": \"120\"\n            }),\n            _createVNode(_component_el_table_column, {\n              label: \"操作\",\n              align: \"center\",\n              width: \"140\",\n              fixed: \"right\"\n            }, {\n              default: _withCtx(({ row }) => [\n                (row.showDetail)\n                  ? (_openBlock(), _createBlock(_component_el_link, {\n                      key: 0,\n                      onClick: ($event: any) => (handleLookDetail(row)),\n                      underline: false,\n                      type: \"primary\"\n                    }, {\n                      default: _withCtx(() => _cache[9] || (_cache[9] = [\n                        _createTextVNode(\"查看详情\")\n                      ])),\n                      _: 2\n                    }, 1032, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true),\n                (row.serviceStatus === 2)\n                  ? (_openBlock(), _createBlock(_component_el_link, {\n                      key: 1,\n                      onClick: ($event: any) => (handleLookReason(row)),\n                      underline: false,\n                      type: \"primary\"\n                    }, {\n                      default: _withCtx(() => _cache[10] || (_cache[10] = [\n                        _createTextVNode(\"驳回原因\")\n                      ])),\n                      _: 2\n                    }, 1032, [\"onClick\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"data\"]),\n        _createVNode(_component_PagePagination, {\n          pageTotal: _unref(pageData).pageTotal,\n          pageSize: _unref(pageData).pageSize,\n          pageNumber: _unref(pageData).pageNumber,\n          onEmitPageSizeChange: _unref(pageSizeChange),\n          onEmitPageNumberChange: _unref(pageNumberChange)\n        }, null, 8, [\"pageTotal\", \"pageSize\", \"pageNumber\", \"onEmitPageSizeChange\", \"onEmitPageNumberChange\"])\n      ])\n    ]),\n    _createVNode(_unref(AddSubCustomerDialog), {\n      visible: _unref(initData).addSubCustomerVisible,\n      \"onUpdate:visible\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(initData).addSubCustomerVisible) = $event)),\n      onEmitFunc: _unref(getList)\n    }, null, 8, [\"visible\", \"onEmitFunc\"]),\n    _createVNode(_unref(CustomerRetrieveDialog), {\n      visible: _unref(initData).customerRetrieveVisible,\n      \"onUpdate:visible\": _cache[4] || (_cache[4] = ($event: any) => ((_unref(initData).customerRetrieveVisible) = $event)),\n      onEmitFunc: _unref(getList)\n    }, null, 8, [\"visible\", \"onEmitFunc\"]),\n    _createVNode(_unref(AdvancedFilterDrawer), {\n      visible: _unref(initData).advancedFilterVisible,\n      \"onUpdate:visible\": _cache[5] || (_cache[5] = ($event: any) => ((_unref(initData).advancedFilterVisible) = $event)),\n      onEmitFunc: handleAdvancedFilter\n    }, null, 8, [\"visible\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n  <div class=\"personal-customer main-container\">\r\n    <div class=\"form-container\">\r\n      <!--   表单搜索   -->\r\n      <div class=\"form\">\r\n        <el-button\r\n          v-if=\"existCallInterface !== 0\"\r\n          type=\"primary\"\r\n          @click=\"handleOperate('addSubCustomerVisible')\"\r\n          >新增子客户</el-button\r\n        >\r\n        <el-button @click=\"handleOperate('customerRetrieveVisible')\"\r\n          >客户找回</el-button\r\n        >\r\n        <el-button @click=\"handleOperate('advancedFilterVisible')\"\r\n          >高级筛选</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <div class=\"table-container\">\r\n      <!--   列表   -->\r\n      <el-table :data=\"pageData.list\" height=\"calc(100vh - 270px)\">\r\n        <el-table-column\r\n          prop=\"companyName\"\r\n          label=\"企业名称\"\r\n          align=\"center\"\r\n          min-width=\"250\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"companyCode\"\r\n          label=\"企业code\"\r\n          align=\"center\"\r\n          min-width=\"200\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"companyPhone\"\r\n          label=\"企业电话\"\r\n          align=\"center\"\r\n          min-width=\"200\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"businessTypeName\"\r\n          label=\"业务类型\"\r\n          align=\"center\"\r\n          min-width=\"150\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"createdTime\"\r\n          label=\"创建时间\"\r\n          align=\"center\"\r\n          min-width=\"200\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"founderName\"\r\n          label=\"创建人名称\"\r\n          align=\"center\"\r\n          min-width=\"220\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"founderAccount\"\r\n          label=\"创建人账号\"\r\n          align=\"center\"\r\n          min-width=\"200\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"customerResourceName\"\r\n          label=\"客户来源\"\r\n          align=\"center\"\r\n          min-width=\"120\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"dealStatusName\"\r\n          label=\"成交状态\"\r\n          align=\"center\"\r\n          min-width=\"120\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"serviceStatusName\"\r\n          label=\"服务状态\"\r\n          align=\"center\"\r\n          min-width=\"120\"\r\n        ></el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\" width=\"140\" fixed=\"right\">\r\n          <template #default=\"{ row }\">\r\n            <el-link\r\n              v-if=\"row.showDetail\"\r\n              @click=\"handleLookDetail(row)\"\r\n              :underline=\"false\"\r\n              type=\"primary\"\r\n              >查看详情</el-link\r\n            >\r\n            <el-link\r\n              v-if=\"row.serviceStatus === 2\"\r\n              @click=\"handleLookReason(row)\"\r\n              :underline=\"false\"\r\n              type=\"primary\"\r\n              >驳回原因</el-link\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n        <template #empty>\r\n          <TableEmpty\r\n            empty-text=\"您还没有下级客户，试试点击右上角二维码去邀请\"\r\n          ></TableEmpty>\r\n        </template>\r\n      </el-table>\r\n      <!--   分页   -->\r\n      <PagePagination\r\n        :pageTotal=\"pageData.pageTotal\"\r\n        :pageSize=\"pageData.pageSize\"\r\n        :pageNumber=\"pageData.pageNumber\"\r\n        @emitPageSizeChange=\"pageSizeChange\"\r\n        @emitPageNumberChange=\"pageNumberChange\"\r\n      ></PagePagination>\r\n    </div>\r\n  </div>\r\n  <!-- 新增子客户 -->\r\n  <AddSubCustomerDialog\r\n    v-model:visible=\"initData.addSubCustomerVisible\"\r\n    @emitFunc=\"getList\"\r\n  ></AddSubCustomerDialog>\r\n  <!-- 客户找回弹框 -->\r\n  <CustomerRetrieveDialog\r\n    v-model:visible=\"initData.customerRetrieveVisible\"\r\n    @emitFunc=\"getList\"\r\n  ></CustomerRetrieveDialog>\r\n  <!-- 高级搜索 -->\r\n  <AdvancedFilterDrawer\r\n    v-model:visible=\"initData.advancedFilterVisible\"\r\n    @emitFunc=\"handleAdvancedFilter\"\r\n  ></AdvancedFilterDrawer>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { ElMessageBox } from \"element-plus\";\r\nimport { ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\n\r\nimport { usePage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\nimport { allCustomerApi } from \"@api/customer-management-api\";\r\n\r\nconst AddSubCustomerDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@components/customer-management/personal-customer/list/add-sub-customer-dialog.vue\"\r\n    )\r\n);\r\nconst AdvancedFilterDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@components/customer-management/personal-customer/list/advanced-filter-drawer.vue\"\r\n    )\r\n);\r\nconst CustomerRetrieveDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@components/customer-management/personal-customer/list/customer-retrieve-dialog.vue\"\r\n    )\r\n);\r\n\r\ndefineOptions({\r\n  name: \"customerManagement.personalCustomer.list\",\r\n});\r\n\r\nconst { goPage } = useVueRouter();\r\nconst { bd_userInfo: userInfo, bd_existCallInterface: existCallInterface } =\r\n  LocalStorage.batchGetItem([\"bd_userInfo\", \"bd_existCallInterface\"]);\r\nconst initData = shallowReactive({\r\n  addSubCustomerVisible: false,\r\n  advancedFilterVisible: false,\r\n  customerRetrieveVisible: false,\r\n});\r\nconst paramsData = shallowReactive({\r\n  parentId: userInfo.profileId,\r\n});\r\n// 高级筛选条件\r\nconst conditionData = ref({});\r\nconst { getList, pageNumberChange, pageSizeChange, pageData, resetPageNumber } =\r\n  usePage({\r\n    listApi: allCustomerApi,\r\n    props: {\r\n      pageSize: {\r\n        name: \"pageSize\",\r\n        default: 20,\r\n      },\r\n      pageNumber: {\r\n        name: \"page\",\r\n        default: 1,\r\n      },\r\n    },\r\n    searchParams: () => {\r\n      return {\r\n        parentId: userInfo.profileId,\r\n        ...conditionData.value,\r\n      };\r\n    },\r\n  });\r\n\r\n// 高级搜索\r\nconst handleAdvancedFilter = (value: Record<string, any>) => {\r\n  conditionData.value = value;\r\n  resetPageNumber();\r\n  getList();\r\n};\r\n\r\n// 查看详情\r\nconst handleLookDetail = ({ profileId, companyId }) => {\r\n  goPage(\r\n    `/customerManagement/personalCustomer/detail?profileId=${profileId}&companyId=${companyId}`\r\n  );\r\n};\r\n/**\r\n * {type} customerRetrieve：客户找回、advancedFilter：高级搜索、addSubCustomer：新增子客户\r\n */\r\nconst handleOperate = (\r\n  type:\r\n    | \"addSubCustomerVisible\"\r\n    | \"advancedFilterVisible\"\r\n    | \"customerRetrieveVisible\"\r\n) => {\r\n  initData[type] = true;\r\n};\r\n// 驳回原因\r\nconst handleLookReason = (row) => {\r\n  ElMessageBox.alert(\r\n    `<p style='font-size: 14px;'>尊敬代理商，您好！</p><p style='text-indent: 2em;font-size: 13px;word-break: break-word;margin-top: 10px;'>${\r\n      row.rejectReason ?? \"\"\r\n    }</p>`,\r\n    \"驳回原因\",\r\n    {\r\n      dangerouslyUseHTMLString: true,\r\n      callback: () => {},\r\n    }\r\n  );\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.form-container {\r\n  justify-content: flex-end;\r\n}\r\n</style>\r\n","import script from \"./list.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./list.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./list.vue?vue&type=style&index=0&id=75014ce6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-75014ce6\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_defineComponent","name","__name","setup","__props","AddSubCustomerDialog","defineAsyncComponent","AdvancedFilterDrawer","CustomerRetrieveDialog","goPage","useVueRouter","bd_userInfo","userInfo","bd_existCallInterface","existCallInterface","LocalStorage","batchGetItem","initData","shallowReactive","addSubCustomerVisible","advancedFilterVisible","customerRetrieveVisible","conditionData","parentId","profileId","ref","getList","pageNumberChange","pageSizeChange","pageData","resetPageNumber","usePage","listApi","allCustomerApi","props","pageSize","default","pageNumber","searchParams","value","handleAdvancedFilter","handleLookDetail","companyId","handleOperate","type","handleLookReason","row","ElMessageBox","alert","rejectReason","dangerouslyUseHTMLString","callback","_ctx","_cache","_component_el_button","_resolveComponent","_component_el_table_column","_component_el_link","_component_TableEmpty","_component_el_table","_component_PagePagination","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_unref","_createBlock","key","onClick","$event","_withCtx","_createTextVNode","_","_createCommentVNode","_createVNode","data","list","height","empty","prop","label","align","width","fixed","showDetail","underline","serviceStatus","pageTotal","onEmitPageSizeChange","onEmitPageNumberChange","visible","onEmitFunc","__exports__"],"sourceRoot":""}