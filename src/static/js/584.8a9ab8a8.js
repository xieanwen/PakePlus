"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[584],{40584:function(e,t,a){a.r(t),a.d(t,{default:function(){return X}});a(95226),a(59784),a(70549);var n=a(6254),o=a(38627),i=a(25598),l=a(55533),r=a(10901),s=a(67471);const c=function(e){return{tooltip:{trigger:"item"},title:{text:"返佣金额走势",subtext:"单位：元",textStyle:{fontSize:14,color:"#242934"},subtextStyle:{fontSize:13,color:"#9CA6B9",align:"right"}},xAxis:[{type:"category",data:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{name:"Direct",type:"bar",barWidth:"50%",itemStyle:{color:"#2ED4A9"},data:e}]}},d=function(e){return{tooltip:{trigger:"item"},title:{text:"各类型返佣占比",textStyle:{fontSize:14,color:"#242934"},subtextStyle:{fontSize:13,color:"#9CA6B9",align:"right"}},legend:{orient:"vertical",right:"right",top:"middle",itemWidth:15,itemHeight:15},series:[{type:"pie",color:["#0056FF","#2ED4A9","#FF7125","#FFC420"],radius:["55%","80%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},left:-50,emphasis:{label:{show:!0,fontSize:"14",color:"#000000",fontWeight:"bold",formatter:"{b}\n{c}"}},data:e}]}};var u=a(84153),m=a(616);const f={getData:()=>u.A.post(`${m.fe.agentSystem}/statistic/statisticByHome`),handleData:e=>({agentNum:null===e||void 0===e?void 0:e.agentNum,orderNum:null===e||void 0===e?void 0:e.orderNum,withdrawAble:null===e||void 0===e?void 0:e.withdrawable,interfaceNum:null===e||void 0===e?void 0:e.interfaceNum,qfbAmount:null===e||void 0===e?void 0:e.qfbAmount,accountBalance:null===e||void 0===e?void 0:e.accountBalance})};var v=a(4662),p=a(91866),g=a(88365);const h={class:"home main-container"},b={class:"account-container"},y={class:"word"},D={class:"count"},k={key:0},C={key:1},T={key:2},L={key:3},w={class:"consume-container"},Y={class:"consume-info"},x={class:"left-box"},M={class:"date"},I={class:"right-box"},A={key:0,class:"consume-info"},E={class:"left-box"},N={class:"date"},F={class:"right-box"},R={class:"data-analysis"},S={name:"home"};var V=(0,n.pM)({...S,name:"home",setup(e){const{bd_existCallInterface:t}=g.DT.batchGetItem(["bd_existCallInterface"]),a=dayjs().subtract(0,"month").startOf("month").format("YYYY-MM-DD"),u=dayjs().subtract(0,"month").format("YYYY-MM-DD"),m=(0,i.Kh)({selectYear:(new Date).getFullYear()+"",list:[],trendList:[],proportionList:[],accountInfo:{},advancePayment:{},minutesConsumed:{},customerTime:[a,u],interfaceTime:[a,u]}),S=[{label:"账户余额",buttonText:"立即充值",url:"/financialCenter/fundManagement/recharge"},{label:"可提现佣金",buttonText:"立即提现",url:"/financialCenter/fundManagement/withdrawal"},{label:"订单数量",buttonText:"代客下单",url:"/orderManagement/createOrder/companyList"},{label:"接口客户数",buttonText:"业务报备",url:"/businessManagement/ospreyCloudCall/report/list"}];let V=[];const{goPage:B}=(0,r.dG)(),W=(0,i.KR)(""),X=new Date((new Date).setDate((new Date).getDate())),Q=async()=>{await z(),0!=t&&await G()},z=async()=>{try{const e={interfaceData:"0"};m.customerTime&&m.customerTime.length?(Reflect.set(e,"startTime",m.customerTime[0]),Reflect.set(e,"endTime",m.customerTime[1])):(Reflect.set(e,"startTime",a),Reflect.set(e,"endTime",u));const{data:t}=await v.l.getData(e),n=v.l.handleData(t);m.minutesConsumed.directCustomerNum=n.customer}catch(e){console.log(e)}},G=async()=>{try{const e={interfaceData:"0"};m.interfaceTime&&m.interfaceTime.length?(Reflect.set(e,"startTime",m.interfaceTime[0]),Reflect.set(e,"endTime",m.interfaceTime[1])):(Reflect.set(e,"startTime",a),Reflect.set(e,"endTime",u));const{data:t}=await v.l.getData(e),n=v.l.handleData(t);m.minutesConsumed.interfaceNum=n.interface}catch(e){console.log(e)}},K=e=>{"customer"===e?z():"interface"===e&&G()},O=e=>{"customer"===e?m.customerTime=[a,u]:m.interfaceTime=[a,u]},P=([e,t])=>{W.value=e,t&&(W.value="")},$=e=>{const t=e.getTime();if(W.value){const e=_.cloneDeep(W.value),a=_.cloneDeep(W.value),n=new Date(e.setDate(e.getDate()+90)),o=new Date(a.setDate(a.getDate()-90));return!(t>o.getTime()&&t<n.getTime()&&t<X.getTime())}return!(t<X.getTime())},j=async()=>{try{const{data:e}=await f.getData();m.accountInfo=f.handleData(e)}catch(e){console.log(e)}},q=async()=>{try{const{data:e}=await p.vo.getData();m.advancePayment=p.vo.handleData(e)}catch(e){console.log(e)}},H=async()=>{try{const e={year:m.selectYear},{data:t}=await p.$e.getData(e);m.trendList=p.$e.handleData(t);const a=(0,s.Jp)(document.getElementById("trend"),d(m.trendList));V.push(a)}catch(e){console.log(e)}},J=async()=>{try{const e={year:m.selectYear},{data:t}=await p.V5.getData(e),a=p.V5.handleData(t);m.list=a.tableList,m.proportionList=a.proportionList;const n=(0,s.Jp)(document.getElementById("proportion"),c(m.proportionList));V.push(n)}catch(e){console.log(e)}},U=()=>{J(),H()};return(0,n.sV)((()=>{j(),q(),U(),Q()})),(0,n.xo)((()=>{V.forEach((e=>{e&&e.dispose()})),V=[]})),(e,a)=>{const r=(0,n.g2)("el-button"),s=(0,n.g2)("el-date-picker");return(0,n.uX)(),(0,n.CE)("div",h,[a[18]||(a[18]=(0,n.Lk)("h6",{class:"module-title"},"我的账户",-1)),(0,n.Lk)("div",b,[((0,n.uX)(),(0,n.CE)(n.FK,null,(0,n.pI)(S,((e,t)=>{var a,s,c,d;return(0,n.bo)((0,n.Lk)("div",{class:"account-info",key:t},[(0,n.Lk)("p",y,(0,o.v_)(e.label),1),(0,n.Lk)("p",D,[0===t?((0,n.uX)(),(0,n.CE)("span",k,(0,o.v_)((null===(a=m.accountInfo)||void 0===a?void 0:a.accountBalance)??0)+" 元",1)):(0,n.Q3)("",!0),1===t?((0,n.uX)(),(0,n.CE)("span",C,(0,o.v_)((null===(s=m.accountInfo)||void 0===s?void 0:s.withdrawAble)??0)+" 元",1)):(0,n.Q3)("",!0),2===t?((0,n.uX)(),(0,n.CE)("span",T,(0,o.v_)((null===(c=m.accountInfo)||void 0===c?void 0:c.orderNum)??0)+" 单",1)):(0,n.Q3)("",!0),3===t?((0,n.uX)(),(0,n.CE)("span",L,(0,o.v_)((null===(d=m.accountInfo)||void 0===d?void 0:d.interfaceNum)??0)+" 位",1)):(0,n.Q3)("",!0),(0,n.bF)(r,{type:"primary",onClick:t=>(0,i.R1)(B)(e.url)},{default:(0,n.k6)((()=>[(0,n.eW)((0,o.v_)(e.buttonText),1)])),_:2},1032,["onClick"])])]),[[l.aG,1!==t]])})),64))]),a[19]||(a[19]=(0,n.Lk)("h6",{class:"module-title"},"数据分析",-1)),(0,n.Lk)("div",w,[(0,n.Lk)("div",Y,[(0,n.Lk)("div",x,[a[6]||(a[6]=(0,n.Lk)("p",{class:"word"},"消耗分钟数（直客）",-1)),(0,n.Lk)("div",M,[(0,n.bF)(s,{modelValue:m.customerTime,"onUpdate:modelValue":a[0]||(a[0]=e=>m.customerTime=e),type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:a[1]||(a[1]=e=>K("customer")),onClear:a[2]||(a[2]=e=>O("customer")),clearable:"",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","disabled-date":$,onCalendarChange:P},null,8,["modelValue"])])]),(0,n.Lk)("div",I,[(0,n.eW)((0,o.v_)(m.minutesConsumed.directCustomerNum),1),a[7]||(a[7]=(0,n.Lk)("span",{class:"unit"},"分钟",-1))])]),0!=(0,i.R1)(t)?((0,n.uX)(),(0,n.CE)("div",A,[(0,n.Lk)("div",E,[a[8]||(a[8]=(0,n.Lk)("p",{class:"word"},"消耗分钟数（接口）",-1)),(0,n.Lk)("div",N,[(0,n.bF)(s,{modelValue:m.interfaceTime,"onUpdate:modelValue":a[3]||(a[3]=e=>m.interfaceTime=e),type:"daterange","disabled-date":$,onCalendarChange:P,"range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:a[4]||(a[4]=e=>K("interface")),onClear:a[5]||(a[5]=e=>O("interface")),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])]),(0,n.Lk)("div",F,[(0,n.eW)((0,o.v_)(m.minutesConsumed.interfaceNum),1),a[9]||(a[9]=(0,n.Lk)("span",{class:"unit"},"分钟",-1))])])):(0,n.Q3)("",!0)]),(0,n.Lk)("div",R,[(0,n.Q3)("",!0),a[17]||(a[17]=(0,n.Lk)("div",{class:"report-form-container"},[(0,n.Lk)("div",{class:"eChart-container"},[(0,n.Lk)("div",{id:"proportion"}),(0,n.Lk)("div",{id:"trend"})])],-1))])])}}}),B=a(83936);const W=(0,B.A)(V,[["__scopeId","data-v-52bc3913"]]);var X=W}}]);
//# sourceMappingURL=584.8a9ab8a8.js.map