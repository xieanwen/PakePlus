{"version":3,"file":"static/js/4529.367a3525.js","mappings":"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","sources":["webpack://daili/./src/components/order-management/create-order/product-detail/ordinary-service.vue?2ace","webpack://daili/./src/components/order-management/create-order/product-detail/ordinary-service.vue","webpack://daili/./src/components/order-management/create-order/product-detail/ordinary-service.vue?0333"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, resolveComponent as _resolveComponent, withCtx as _withCtx, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"product-detail\" }\nconst _hoisted_2 = { class: \"service-specs\" }\nconst _hoisted_3 = { class: \"word\" }\n\nimport { computed, onMounted, shallowRef, shallowReactive } from \"vue\";\r\n\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\nimport BaseSumPrice from \"./base-sum-price.vue\";\r\nimport BaseServiceInfo from \"./base-service-info.vue\";\r\nimport {\r\n  createdOrder,\r\n  handlePrice,\r\n} from \"@components/order-management/create-order/product-detail/common\";\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ordinary-service',\n  props: {\n    productData: {},\n    purchasedData: {}\n  },\n  setup(__props: any) {\n\r\nconst props = __props;\r\n\r\nconst { routeQuery } = useVueRouter();\r\nconst { serviceCode } = routeQuery.value;\r\nconst { bd_userInfo: userInfo } = LocalStorage.batchGetItem([\"bd_userInfo\"]);\r\nconst initData = shallowReactive<{\r\n  cycle: number;\r\n}>({\r\n  cycle: 1,\r\n});\r\n// 购买的商品价格信息\r\nconst agentInfo = shallowRef({\r\n  price: \"0.00\",\r\n  sumPrice: \"0.00\",\r\n  unitPrice: 0,\r\n  subMarketList: [],\r\n  hasAgentPrice: false,\r\n});\r\n// 购买信息\r\nconst purchasedInfo: Record<string, any> = computed(() => {\r\n  return props.purchasedData ?? [];\r\n});\r\n// 所有信息\r\nconst productInfo: Record<string, any> = computed(() => {\r\n  return props.productData;\r\n});\r\n\r\n// 服务基本信息\r\nconst serviceInfo: Record<string, any> = computed(() => {\r\n  return productInfo.value.serviceInfo;\r\n});\r\n// 总计描述\r\nconst sumDescribe = computed(() => {\r\n  return `合计：商品单价${agentInfo.value.unitPrice}元 x ${initData.cycle}年期\r\n          = ${agentInfo.value.sumPrice}元`;\r\n});\r\nconst canBuyTip = computed(() => {\r\n  if ([\"MARKETING_MESSAGE\"].includes(serviceCode)) {\r\n    return \"此产品已购买，请勿重复购买\";\r\n  } else {\r\n    return \"\";\r\n  }\r\n});\r\n\r\nasync function getPrice() {\r\n  const params = handleParams().params;\r\n  agentInfo.value = await handlePrice(params);\r\n}\r\n// 获取价格参数\r\nfunction handleParams() {\r\n  const params = {\r\n    agentId: userInfo.profileId, // 代理商id\r\n    buyCar: false, // 是否为购物车下单\r\n    helpOrder: 1, // 是否代客下单0：否，1：是\r\n    buyType: routeQuery.value.buyType ?? \"BUY_SERVER\", // 购买：BUY_SERVER,升级：UPGRADE,续费：RENEW\r\n    companyId: routeQuery.value.companyId, // 代理商子公司id\r\n    profileId: routeQuery.value.profileId, // 代理商子公司操作人id\r\n    shopBuyList: [\r\n      {\r\n        agentId: userInfo.profileId,\r\n        isisTry: false, // 是否试用\r\n        dateType: 3, // 时间单位 1:日, 2:月, 3:年\r\n        dateValue: initData.cycle, // 时长\r\n        marketCode: serviceCode,\r\n        coding: null,\r\n        baseCodeList: null,\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.price,\r\n  };\r\n  const commodityInfo = {\r\n    list: [\r\n      {\r\n        ...serviceInfo.value,\r\n        price: agentInfo.value.price,\r\n        specsInfo: `服务周期：${initData.cycle}年`,\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n  return {\r\n    params,\r\n    commodityInfo,\r\n  };\r\n}\r\n// 购买\r\nfunction handleBuy() {\r\n  createdOrder(handleParams());\r\n}\r\nonMounted(() => {\r\n  getPrice();\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(BaseServiceInfo, { serviceData: serviceInfo.value }, null, 8, [\"serviceData\"]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_el_form, { \"label-width\": \"150px\" }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_form_item, {\n            label: \"购买数量\",\n            class: \"amount-form-item\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_select, {\n                modelValue: _unref(initData).cycle,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(initData).cycle) = $event)),\n                onChange: getPrice\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_el_option, {\n                    label: \"1年期\",\n                    value: 1\n                  }),\n                  _createVNode(_component_el_option, {\n                    label: \"2年期\",\n                    value: 2\n                  }),\n                  _createVNode(_component_el_option, {\n                    label: \"3年期\",\n                    value: 3\n                  })\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, null, {\n            default: _withCtx(() => [\n              _createElementVNode(\"p\", _hoisted_3, _toDisplayString(sumDescribe.value), 1)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(BaseSumPrice, {\n        tip: canBuyTip.value,\n        onEmitFunc: handleBuy,\n        \"buy-price\": agentInfo.value.price,\n        \"can-buy\": productInfo.value?.canBuy,\n        hasAgentPrice: agentInfo.value.hasAgentPrice\n      }, null, 8, [\"tip\", \"buy-price\", \"can-buy\", \"hasAgentPrice\"])\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"product-detail\">\r\n    <BaseServiceInfo :serviceData=\"serviceInfo\"></BaseServiceInfo>\r\n    <div class=\"service-specs\">\r\n      <el-form label-width=\"150px\">\r\n        <el-form-item label=\"购买数量\" class=\"amount-form-item\">\r\n          <el-select v-model=\"initData.cycle\" @change=\"getPrice\">\r\n            <el-option label=\"1年期\" :value=\"1\"></el-option>\r\n            <el-option label=\"2年期\" :value=\"2\"></el-option>\r\n            <el-option label=\"3年期\" :value=\"3\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <p class=\"word\">{{ sumDescribe }}</p>\r\n        </el-form-item>\r\n      </el-form>\r\n      <BaseSumPrice\r\n        :tip=\"canBuyTip\"\r\n        @emitFunc=\"handleBuy\"\r\n        :buy-price=\"agentInfo.price\"\r\n        :can-buy=\"productInfo?.canBuy\"\r\n        :hasAgentPrice=\"agentInfo.hasAgentPrice\"\r\n      ></BaseSumPrice>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted, shallowRef, shallowReactive } from \"vue\";\r\n\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\nimport BaseSumPrice from \"./base-sum-price.vue\";\r\nimport BaseServiceInfo from \"./base-service-info.vue\";\r\nimport {\r\n  createdOrder,\r\n  handlePrice,\r\n} from \"@components/order-management/create-order/product-detail/common\";\r\n\r\nconst props = defineProps<{\r\n  productData: Record<string, any>;\r\n  purchasedData: Record<string, any>[];\r\n}>();\r\n\r\nconst { routeQuery } = useVueRouter();\r\nconst { serviceCode } = routeQuery.value;\r\nconst { bd_userInfo: userInfo } = LocalStorage.batchGetItem([\"bd_userInfo\"]);\r\nconst initData = shallowReactive<{\r\n  cycle: number;\r\n}>({\r\n  cycle: 1,\r\n});\r\n// 购买的商品价格信息\r\nconst agentInfo = shallowRef({\r\n  price: \"0.00\",\r\n  sumPrice: \"0.00\",\r\n  unitPrice: 0,\r\n  subMarketList: [],\r\n  hasAgentPrice: false,\r\n});\r\n// 购买信息\r\nconst purchasedInfo: Record<string, any> = computed(() => {\r\n  return props.purchasedData ?? [];\r\n});\r\n// 所有信息\r\nconst productInfo: Record<string, any> = computed(() => {\r\n  return props.productData;\r\n});\r\n\r\n// 服务基本信息\r\nconst serviceInfo: Record<string, any> = computed(() => {\r\n  return productInfo.value.serviceInfo;\r\n});\r\n// 总计描述\r\nconst sumDescribe = computed(() => {\r\n  return `合计：商品单价${agentInfo.value.unitPrice}元 x ${initData.cycle}年期\r\n          = ${agentInfo.value.sumPrice}元`;\r\n});\r\nconst canBuyTip = computed(() => {\r\n  if ([\"MARKETING_MESSAGE\"].includes(serviceCode)) {\r\n    return \"此产品已购买，请勿重复购买\";\r\n  } else {\r\n    return \"\";\r\n  }\r\n});\r\n\r\nasync function getPrice() {\r\n  const params = handleParams().params;\r\n  agentInfo.value = await handlePrice(params);\r\n}\r\n// 获取价格参数\r\nfunction handleParams() {\r\n  const params = {\r\n    agentId: userInfo.profileId, // 代理商id\r\n    buyCar: false, // 是否为购物车下单\r\n    helpOrder: 1, // 是否代客下单0：否，1：是\r\n    buyType: routeQuery.value.buyType ?? \"BUY_SERVER\", // 购买：BUY_SERVER,升级：UPGRADE,续费：RENEW\r\n    companyId: routeQuery.value.companyId, // 代理商子公司id\r\n    profileId: routeQuery.value.profileId, // 代理商子公司操作人id\r\n    shopBuyList: [\r\n      {\r\n        agentId: userInfo.profileId,\r\n        isisTry: false, // 是否试用\r\n        dateType: 3, // 时间单位 1:日, 2:月, 3:年\r\n        dateValue: initData.cycle, // 时长\r\n        marketCode: serviceCode,\r\n        coding: null,\r\n        baseCodeList: null,\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.price,\r\n  };\r\n  const commodityInfo = {\r\n    list: [\r\n      {\r\n        ...serviceInfo.value,\r\n        price: agentInfo.value.price,\r\n        specsInfo: `服务周期：${initData.cycle}年`,\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n  return {\r\n    params,\r\n    commodityInfo,\r\n  };\r\n}\r\n// 购买\r\nfunction handleBuy() {\r\n  createdOrder(handleParams());\r\n}\r\nonMounted(() => {\r\n  getPrice();\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@use \"./common.scss\" as *;\r\n</style>\r\n","import script from \"./ordinary-service.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ordinary-service.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ordinary-service.vue?vue&type=style&index=0&id=080fbcdd&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-080fbcdd\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_defineComponent","__name","props","productData","purchasedData","setup","__props","routeQuery","useVueRouter","serviceCode","value","bd_userInfo","userInfo","LocalStorage","batchGetItem","initData","shallowReactive","cycle","agentInfo","shallowRef","price","sumPrice","unitPrice","subMarketList","hasAgentPrice","productInfo","computed","serviceInfo","sumDescribe","canBuyTip","includes","async","getPrice","params","handleParams","handlePrice","agentId","profileId","buyCar","helpOrder","buyType","companyId","shopBuyList","isisTry","dateType","dateValue","marketCode","coding","baseCodeList","commodityInfo","list","specsInfo","handleBuy","createdOrder","onMounted","_ctx","_cache","_productInfo$value","_component_el_option","_resolveComponent","_component_el_select","_component_el_form_item","_component_el_form","_openBlock","_createElementBlock","_createVNode","BaseServiceInfo","serviceData","_createElementVNode","default","_withCtx","label","modelValue","_unref","$event","onChange","_","_toDisplayString","BaseSumPrice","tip","onEmitFunc","canBuy","__exports__"],"sourceRoot":""}