"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[2487],{95989:function(e,u,l){l.r(u),l.d(u,{default:function(){return C}});l(95226),l(59784),l(47961),l(83238);var a=l(6254),i=l(38627),o=l(25598),n=l(10901),t=l(88365),v=l(4710),d=l(8610),s=l(64108);const r={class:"product-detail"},c={class:"service-specs"},m={class:"purchased-info"},p={class:"word"},b="CALL_PACKAGE_BIG_ADDED";var g=(0,a.pM)({__name:"cloud-call-package-seat-big",props:{productData:{},purchasedData:{}},setup(e){const{routeQuery:u}=(0,n.dG)(),{serviceCode:l,companyId:g,profileId:f,buyType:C}=u.value,{bd_userInfo:y}=t.DT.batchGetItem(["bd_userInfo"]),h=e,L=(0,o.Gc)({count:0,customCount:1,sumPrice:"0.00"}),k=(0,o.IJ)({price:"0.00",sumPrice:"0.00",unitPrice:"0.00",addedPrice:"0.00",subMarketList:[],hasAgentPrice:!1}),P=(0,a.EW)((()=>h.purchasedData)),I=(0,a.EW)((()=>h.productData)),N=(0,a.EW)((()=>I.value.serviceInfo));console.log(N.value);const _=(0,a.EW)((()=>{var e;return null===(e=I.value)||void 0===e?void 0:e.addedServiceList.find((e=>e.addedServiceCode===b))})),E=(0,a.EW)((()=>{const e={minNum:1,maxNum:1e5,coding:"",unitPrice:"0.00",serviceCode:"",groupNameList:[],groupCodeList:[],groupValueList:[]};if(!_.value.specsList.length)return e;const u=u=>{const l=_.value.specsList.find((e=>e.groupValues===u));var a,i,o;return l?{minNum:null===l||void 0===l?void 0:l.minNum,maxNum:null===l||void 0===l?void 0:l.maxNum,coding:null===l||void 0===l?void 0:l.coding,unitPrice:null===l||void 0===l?void 0:l.unitPrice,serviceCode:null===l||void 0===l?void 0:l.serviceCode,groupNameList:(null===l||void 0===l||null===(a=l.groupNames)||void 0===a?void 0:a.split(","))||[],groupCodeList:(null===l||void 0===l||null===(i=l.groupCodes)||void 0===i?void 0:i.split(","))||[],groupValueList:(null===l||void 0===l||null===(o=l.groupValues)||void 0===o?void 0:o.split(","))||[]}:e},{minimunCharge:l,chooseMinFee:a,chooseMinute:i}=P.value,o=`${l},${a},${i}`;return u(o)})),V=(0,a.EW)((()=>{var e,u;const l=[{label:"10个",value:10},{label:"30个",value:30},{label:"50个",value:50}];var a,i;null!==(e=I.value)&&void 0!==e&&e.canBuy&&l.unshift({label:`${null===(a=E.value)||void 0===a?void 0:a.minNum}个`,value:Number(null===(i=E.value)||void 0===i?void 0:i.minNum)});return null!==(u=_.value)&&void 0!==u&&u.isDiy&&l.push({label:"自定义",value:"custom"}),l})),W=(0,a.EW)((()=>"custom"===L.count?L.customCount:L.count)),A=(0,a.EW)((()=>{var e;const u=dayjs().startOf("month"),l=dayjs(null===(e=P.value)||void 0===e?void 0:e.endTime).endOf("month");return l.diff(u,"month")||0})),D=(0,a.EW)((()=>`合计： 坐席单价${k.value.unitPrice}元/坐席/月 x ${W.value}个坐席 x 剩余${A.value}个月  = ${k.value.sumPrice}元`));function $(){var e,u;L.count=null===(e=V.value[0])||void 0===e?void 0:e.value,L.customCount=null===(u=E.value)||void 0===u?void 0:u.minNum,F()}function x(){const e={agentId:y.profileId,buyCar:!1,helpOrder:1,buyType:C??"BUY_SERVER",companyId:g,profileId:f,shopBuyList:[{agentId:y.profileId,isisTry:!1,dateType:"2",dateValue:1,marketCode:l,userNumber:W.value,coding:[{code:E.value.serviceCode,coding:E.value.coding,num:W.value}],baseCodeList:E.value.groupCodeList.map(((e,u)=>({baseCode:e,number:E.value.groupValueList[u]})))}],sumPrice:k.value.sumPrice},u={list:[{...N.value,price:k.value.price,specsInfo:`坐席数量：${W.value}个坐席；`}],sumPrice:k.value.sumPrice};return{params:e,commodityInfo:u}}async function F(){const e=x().params;k.value=await(0,v.AV)(e)}function R(){(0,v.$d)(x())}return $(),(e,u)=>{var l;const n=(0,a.g2)("el-form-item"),t=(0,a.g2)("el-option"),v=(0,a.g2)("el-select"),b=(0,a.g2)("el-input-number"),g=(0,a.g2)("el-form");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(s.A,{serviceData:N.value},null,8,["serviceData"]),(0,a.Lk)("div",c,[(0,a.bF)(g,{"label-width":"150px"},{default:(0,a.k6)((()=>{var e;return[null!==(e=I.value)&&void 0!==e&&e.canBuy?((0,a.uX)(),(0,a.Wv)(n,{key:0,label:"已购详情"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",m,[(0,a.Lk)("span",null," 已购坐席数："+(0,i.v_)(P.value.seatSize)+(0,i.v_)(N.value.unit),1),(0,a.Lk)("span",null,"服务到期时间："+(0,i.v_)(P.value.endTime),1)])])),_:1})):(0,a.Q3)("",!0),(0,a.bF)(n,{label:"购买数量",class:"amount-form-item"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:(0,o.R1)(L).count,"onUpdate:modelValue":u[0]||(u[0]=e=>(0,o.R1)(L).count=e),onChange:F},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.value,(e=>((0,a.uX)(),(0,a.Wv)(t,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),"custom"===(0,o.R1)(L).count?((0,a.uX)(),(0,a.Wv)(b,{key:0,modelValue:(0,o.R1)(L).customCount,"onUpdate:modelValue":u[1]||(u[1]=e=>(0,o.R1)(L).customCount=e),min:E.value.minNum,max:E.value.maxNum,step:_.value.miniNum,onChange:F},null,8,["modelValue","min","max","step"])):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(n,null,{default:(0,a.k6)((()=>[(0,a.Lk)("p",p,(0,i.v_)(D.value),1)])),_:1})]})),_:1}),(0,a.bF)(d.A,{onEmitFunc:R,"buy-price":k.value.price,"can-buy":null===(l=I.value)||void 0===l?void 0:l.canBuy,hasAgentPrice:k.value.hasAgentPrice,tip:"购买此产品前，需要先购买鱼鹰呼叫大客户套餐"},null,8,["buy-price","can-buy","hasAgentPrice"])])])}}});const f=g;var C=f}}]);
//# sourceMappingURL=2487.3efe81af.js.map