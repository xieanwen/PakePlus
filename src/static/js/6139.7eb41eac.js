"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[6139],{86139:function(e,a,n){n.r(a),n.d(a,{default:function(){return N}});var t=n(6254),l=n(25598),i=n(10901),o=n(88365),r=n(35287),p=n(616),c=n(1683),s=n(6934),m=n(59259);const g={class:"business-management"},u={class:"form-container"},d={class:"table-container"},b={class:"operation-group"},y={key:0};var f=(0,t.pM)({name:"businessManagement.ospreyCloudCall.subCustomer.list",__name:"list",setup(e){const a=(0,t.$V)((()=>n.e(37).then(n.bind(n,40037)))),f=(0,t.$V)((()=>n.e(7342).then(n.bind(n,17342)))),k=(0,t.$V)((()=>Promise.all([n.e(2076),n.e(3151)]).then(n.bind(n,33151)))),{goPage:C}=(0,i.dG)(),N=o.DT.getItem("bd_userInfo"),h=o.DT.getItem("bd_agentId"),F=(0,l.KR)(),I=(0,l.KR)(),R=(0,l.KR)(),v=(0,l.Gc)({companyName:""}),{getList:_,pageNumberChange:w,pageSizeChange:T,pageData:x,resetPageNumber:E}=(0,o.N5)({listApi:r.AT,props:{pageSize:"pageSize",pageNumber:"page"},searchParams:()=>({companyName:v.companyName,agentUserId:N.profileId})}),P=()=>{E(),_()},S=()=>{var e;null===(e=I.value)||void 0===e||e.toggle(!0)},z=()=>{var e;null===(e=R.value)||void 0===e||e.toggle(!0)};function W(){F.value.trigger(!0,{data:{agentId:h},limit:1,autoUpload:!1,accept:".xls,.xlsx",actionUrl:`${p.fe.callRest}/agentInterface/importExcel`,templateUrl:()=>(0,c.PE)({api:`${p.fe.callRest}/agentInterface/getExcelTemplate`})})}const $=e=>{const a={companyId:e.companyId,companyName:e.companyName,companyCode:e.companyCode,businessType:e.businessType};1===e.businessType?Reflect.set(a,"code",e.code):Reflect.set(a,"profileId",e.profileId),C({path:"/businessManagement/ospreyCloudCall/subCustomer/interface/detail",query:a})};function V(e){s.s.prompt("充值金额","充值",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((async({value:a})=>{if(a=a.trim().replace(/\s+/g,""),!a||""===a.trim()||a<=0)return void(0,m.nk)({type:"warning",message:"请输入充值金额！"});if(isNaN(a))return void(0,m.nk)({type:"warning",message:"请输入正确的金额！"});const n=/^\d+(\.\d{1,3})?$/;n.test(a)?(await r.rp.getData({agencyId:h,amount:a,companyId:e.companyId,profileId:N.profileId,tradeType:1,profileName:N.realName}),(0,m.nk)({type:"success",message:"充值成功"}),await _()):(0,m.nk)({type:"warning",message:"输入金额最多3位小数！"})})).catch((()=>{}))}function D(e){s.s.prompt("扣款金额","扣款",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((async({value:a})=>{if(a=a.trim().replace(/\s+/g,""),!a||""===a.trim()||a<=0)return void(0,m.nk)({type:"warning",message:"请输入扣款金额！"});if(isNaN(a))return void(0,m.nk)({type:"warning",message:"请输入正确的金额！"});const n=/^\d+(\.\d{1,3})?$/;n.test(a)?(a>e.companyRemaining&&(0,m.nk)({type:"warning",message:"输入金额大于总金额！"}),await r.rp.getData({agencyId:h,amount:a,companyId:e.companyId,profileId:N.profileId,tradeType:2,profileName:N.realName}),(0,m.nk)({type:"success",message:"扣款成功"}),await _()):(0,m.nk)({type:"warning",message:"输入金额最多3位小数！"})})).catch((()=>{}))}return(e,n)=>{const i=(0,t.g2)("el-input"),o=(0,t.g2)("el-button"),r=(0,t.g2)("el-table-column"),p=(0,t.g2)("el-link"),c=(0,t.g2)("TableEmpty"),s=(0,t.g2)("el-table"),m=(0,t.g2)("PagePagination");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",g,[(0,t.Lk)("div",u,[(0,t.bF)(i,{modelValue:(0,l.R1)(v).companyName,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,l.R1)(v).companyName=e),placeholder:"请输客户名称",class:"company"},null,8,["modelValue"]),(0,t.bF)(o,{type:"primary",class:"distance",onClick:P},{default:(0,t.k6)((()=>n[1]||(n[1]=[(0,t.eW)("搜索 ")]))),_:1}),(0,t.bF)(o,{class:"distance",onClick:W},{default:(0,t.k6)((()=>n[2]||(n[2]=[(0,t.eW)("导入主叫号码 ")]))),_:1}),(0,t.bF)(o,{class:"distance",onClick:S},{default:(0,t.k6)((()=>n[3]||(n[3]=[(0,t.eW)("导入失败内容 ")]))),_:1}),(0,t.bF)(o,{class:"distance",onClick:z},{default:(0,t.k6)((()=>n[4]||(n[4]=[(0,t.eW)("号码实名")]))),_:1})]),(0,t.Lk)("div",d,[(0,t.bF)(s,{data:(0,l.R1)(x).list,height:"calc(100vh - 260px)"},{empty:(0,t.k6)((()=>[(0,t.bF)(c,{"empty-text":"暂无数据"})])),default:(0,t.k6)((()=>[(0,t.bF)(r,{prop:"companyName",label:"客户名称",align:"center","min-width":"200px"}),(0,t.bF)(r,{prop:"companyCode",label:"企业code",align:"center"}),(0,t.bF)(r,{prop:"codeName",label:"唯一标识码",align:"center"}),(0,t.bF)(r,{prop:"phoneNumber",label:"中间号数量",align:"center"}),(0,t.bF)(r,{prop:"timeConsume",label:"总使用量",align:"center"}),(0,t.bF)(r,{prop:"companyRemaining",label:"话费余额",align:"center"}),(0,t.bF)(r,{label:"操作",align:"center",width:"180px"},{default:(0,t.k6)((({row:e})=>[(0,t.Lk)("div",b,[(0,t.bF)(p,{type:"primary",underline:!1,onClick:a=>$(e)},{default:(0,t.k6)((()=>n[5]||(n[5]=[(0,t.eW)("查看详情 ")]))),_:2},1032,["onClick"]),1===e.ecSwitch?((0,t.uX)(),(0,t.CE)("div",y,[(0,t.bF)(p,{type:"primary",underline:!1,onClick:a=>V(e)},{default:(0,t.k6)((()=>n[6]||(n[6]=[(0,t.eW)("充值 ")]))),_:2},1032,["onClick"]),(0,t.bF)(p,{type:"primary",underline:!1,onClick:a=>D(e)},{default:(0,t.k6)((()=>n[7]||(n[7]=[(0,t.eW)("扣款 ")]))),_:2},1032,["onClick"])])):(0,t.Q3)("",!0)])])),_:1})])),_:1},8,["data"]),(0,t.bF)(m,{pageTotal:(0,l.R1)(x).pageTotal,pageSize:(0,l.R1)(x).pageSize,pageNumber:(0,l.R1)(x).pageNumber,onEmitPageSizeChange:(0,l.R1)(T),onEmitPageNumberChange:(0,l.R1)(w)},null,8,["pageTotal","pageSize","pageNumber","onEmitPageSizeChange","onEmitPageNumberChange"])])]),(0,t.bF)((0,l.R1)(a),{ref_key:"importFileRef",ref:F,onEmitFunc:(0,l.R1)(_)},null,8,["onEmitFunc"]),(0,t.bF)((0,l.R1)(f),{ref_key:"importErrorFileRef",ref:I},null,512),(0,t.bF)((0,l.R1)(k),{ref_key:"realNameRef",ref:R},null,512)],64)}}}),k=n(83936);const C=(0,k.A)(f,[["__scopeId","data-v-2ce99893"]]);var N=C}}]);
//# sourceMappingURL=6139.7eb41eac.js.map