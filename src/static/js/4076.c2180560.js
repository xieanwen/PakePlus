(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[4076],{29236:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});n(95226),n(43363),n(29206),n(53769);var i=n(6254),o=n(38627),s=n(25598),l=n(59259),a=n(69355),r=n(78247),c=n.n(r),u=n(616),f=n(1683);const p={class:"empower-info"},h=["onClick"],m=["src"],d={class:"carousel-arrow"};var v=(0,i.pM)({__name:"empower-info",props:{empowerPromiseLink:{}},emits:["emitFunc"],setup(e,{emit:t}){a.GlobalWorkerOptions.workerSrc=c();const n=e,r=t,v=(0,s.KR)(),L=(0,s.KR)(),k=(0,s.KR)(),w=(0,s.Kh)({list:[],isDown:!1,startX:0,scrollLeft:0}),g={itemWidth:230,itemHeight:327,viewCount:4,spacingWidth:30,containerWidth:0};function C(){const e=n.empowerPromiseLink;e?window.open(n.empowerPromiseLink,"_blank"):l.nk.warning("查看链接不能为空")}function W(){const e=n.empowerPromiseLink;e?(0,u.Wr)(e,"授权承诺书","application/pdf").then((e=>{(0,f.PE)({api:URL.createObjectURL(e.blob),filename:"授权承诺书"})})):l.nk.warning("下载链接不能为空")}function b(){const e=n.empowerPromiseLink;e&&(0,u.Wr)(e,"授权承诺书","application/pdf").then((e=>{R(URL.createObjectURL(e.file)).then((e=>{w.list=e}))}))}async function R(e){const t=await a.getDocument(e).promise,n=document.createElement("canvas"),i=n.getContext("2d"),o=[];for(let s=1;s<=t._pdfInfo.numPages;s++){const e=await t.getPage(s),l=e.getViewport({scale:1});n.width=l.width,n.height=l.height,await e.render({canvasContext:i,viewport:l}).promise;const a=n.toDataURL("image/png");o.push(a)}return o}g.containerWidth=(g.itemWidth+g.spacingWidth)*g.viewCount;const P=()=>{const e=L.value.clientWidth,t=L.value.scrollLeft,n=g.itemWidth+g.spacingWidth,i=t-e;if(i>=0){const e=t%n,i=Math.floor(t/n),o=0===e?i-1:i;L.value.scrollTo({left:o*n,behavior:"smooth"})}else L.value.scrollTo({left:0,behavior:"smooth"})},_=()=>{const e=L.value.clientWidth,t=L.value.scrollLeft,n=g.itemWidth+g.spacingWidth,i=L.value.scrollWidth-e,o=t+e;if(o<=i){const e=t%n,i=Math.ceil(t/n),o=0===e?i+1:i;L.value.scrollTo({left:o*n,behavior:"smooth"})}else L.value.scrollTo({left:i,behavior:"smooth"})};function X(e){w.isDown=!0,w.startX=e.pageX-L.value.offsetLeft,w.scrollLeft=L.value.scrollLeft}function x(){w.isDown=!1}function y(e){if(!w.isDown)return;e.preventDefault();const t=e.pageX-L.value.offsetLeft,n=t-w.startX;L.value.scrollLeft=w.scrollLeft-n,w.scrollLeft=w.scrollLeft-n,requestAnimationFrame((()=>{L.value.scrollLeft=w.scrollLeft}))}function D(e,t,n){r("emitFunc",{title:e,imgList:t,index:n})}const I=setInterval((function(){n.empowerPromiseLink&&(clearInterval(I),b())}),2e3);return(e,t)=>{const n=(0,i.g2)("CustomPreviewImage");return(0,i.uX)(),(0,i.CE)("div",p,[(0,i.Lk)("h5",{class:"title"},[t[0]||(t[0]=(0,i.Lk)("div",{class:"counter-mark"},[(0,i.eW)(" 3. 授权承诺书"),(0,i.Lk)("span",null,"契约锁电子签章"),(0,i.Lk)("span",null,"存证报告"),(0,i.Lk)("span",null,"CA认证")],-1)),(0,i.Lk)("div",{class:"button-group"},[(0,i.Lk)("span",{onClick:C},"查看全部"),(0,i.Lk)("span",{onClick:W},"下载全部")])]),(0,i.Lk)("div",{ref_key:"carouselContainerRef",ref:k,class:(0,o.C4)(["carousel-container",w.list.length<g.viewCount?"carousel-center":""]),style:(0,o.Tr)({width:`${g.containerWidth}px`})},[(0,i.Lk)("div",{ref_key:"carouselListRef",ref:L,class:"carousel-list",onMousedown:X,onMouseup:x,onMousemove:y},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(w.list,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{class:"carousel-item",onClick:e=>D("授权承诺书",w.list,t),style:(0,o.Tr)({width:`${g.itemWidth}px`,height:`${g.itemHeight}px`,marginLeft:`${g.spacingWidth}px`}),key:t},[(0,i.Lk)("img",{src:e,alt:""},null,8,m)],12,h)))),128))],544),(0,i.Lk)("div",d,[(0,i.Lk)("span",{class:"arrow-left",onClick:P}),(0,i.Lk)("span",null,(0,o.v_)(w.list.length),1),(0,i.Lk)("span",{class:"arrow-right",onClick:_})])],6),(0,i.bF)(n,{ref_key:"previewImageRef",ref:v},null,512)])}}}),L=n(83936);const k=(0,L.A)(v,[["__scopeId","data-v-45559fc3"]]);var w=k},74007:function(){},19590:function(){},70659:function(){},28850:function(){},29142:function(){},39160:function(){}}]);
//# sourceMappingURL=4076.c2180560.js.map