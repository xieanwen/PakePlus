"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[8196],{8196:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});l(59784),l(47961);var o=l(6254),i=l(25598),n=l(79689),t=l(88365),s=(0,o.pM)({__name:"select-company-dialog",emits:["emitFunc"],setup(e,{expose:a,emit:s}){const d=(0,o.$V)((()=>Promise.all([l.e(2076),l.e(6580)]).then(l.bind(l,10044)))),u=s,{bd_userInfo:m,bd_existCallInterface:c}=t.DT.batchGetItem(["bd_userInfo","bd_existCallInterface"]),r=(0,i.KR)(),p=(0,i.Gc)({visible:!1,businessType:void 0,companyList:[],addSubCustomerVisible:!1}),b=(0,i.Gc)({companyId:""}),y={companyId:[{required:!0,message:"请选择公司",trigger:"blur"}]},f=()=>{p.addSubCustomerVisible=!0},I=e=>{e&&e.validate(((e,a)=>{if(e){const e=p.companyList.find((e=>e.companyId===b.companyId)),a={companyId:e.companyId,companyName:e.companyName,companyCode:e.companyCode??"",industryId:e.industrId,businessType:e.businessType};u("emitFunc",{type:"add",info:a}),g()}else console.log("error submit!",a)}))};async function v(e){if(!e)return;const a={parentId:m.profileId,businessType:p.businessType,pageSize:5e3,companyName:e??""},{data:l}=await n.ey.getData(a);p.companyList=n.ey.handleData(l).list}function g(){b.companyId="",p.visible=!1}function k(e,a){p.visible=e,p.businessType=a,e&&v()}return a({trigger:k}),(e,a)=>{const l=(0,o.g2)("el-option"),n=(0,o.g2)("el-select"),t=(0,o.g2)("el-button"),s=(0,o.g2)("el-form-item"),u=(0,o.g2)("el-form"),m=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(m,{modelValue:(0,i.R1)(p).visible,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,i.R1)(p).visible=e),class:"custom-dialog",width:"580px",title:"选择公司","before-close":g},{footer:(0,o.k6)((()=>[(0,o.bF)(t,{type:"primary",onClick:a[1]||(a[1]=e=>I(r.value))},{default:(0,o.k6)((()=>a[5]||(a[5]=[(0,o.eW)("确  定")]))),_:1})])),default:(0,o.k6)((()=>[(0,o.bF)(u,{ref_key:"ruleFormRef",ref:r,model:(0,i.R1)(b),rules:y,"label-width":"80"},{default:(0,o.k6)((()=>[(0,o.bF)(s,{label:"公司名称",prop:"companyId"},{default:(0,o.k6)((()=>[(0,o.bF)(n,{modelValue:(0,i.R1)(b).companyId,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,i.R1)(b).companyId=e),placeholder:"请选择公司",clearable:"",filterable:"",remote:"","reserve-keyword":"","remote-method":v},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,i.R1)(p).companyList,(e=>((0,o.uX)(),(0,o.Wv)(l,{key:e.companyId,label:`${e.companyName}（${e.companyCode}）`,value:e.companyId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),0!==(0,i.R1)(c)?((0,o.uX)(),(0,o.Wv)(t,{key:0,onClick:f},{default:(0,o.k6)((()=>a[4]||(a[4]=[(0,o.eW)("新增子客户")]))),_:1})):(0,o.Q3)("",!0)])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"]),(0,o.bF)((0,i.R1)(d),{visible:(0,i.R1)(p).addSubCustomerVisible,"onUpdate:visible":a[3]||(a[3]=e=>(0,i.R1)(p).addSubCustomerVisible=e)},null,8,["visible"])],64)}}}),d=l(83936);const u=(0,d.A)(s,[["__scopeId","data-v-0005f6ba"]]);var m=u}}]);
//# sourceMappingURL=8196.3d0391a1.js.map