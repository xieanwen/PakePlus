{"version":3,"file":"static/js/3747.e6747d92.js","mappings":"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","sources":["webpack://daili/./src/components/order-management/create-order/product-detail/cloud-call-package-big.vue?10af","webpack://daili/./src/components/order-management/create-order/product-detail/cloud-call-package-big.vue","webpack://daili/./src/components/order-management/create-order/product-detail/cloud-call-package-big.vue?ee5a"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode } from \"vue\"\nimport _imports_0 from '@/assets/images/icon-question.png'\n\n\nconst _hoisted_1 = { class: \"product-detail\" }\nconst _hoisted_2 = { class: \"service-specs\" }\nconst _hoisted_3 = { class: \"word\" }\nconst _hoisted_4 = { class: \"word\" }\nconst _hoisted_5 = { class: \"word\" }\n\nimport { computed, onMounted, reactive, ref, shallowRef } from \"vue\";\r\nimport { createdOrder, handlePrice } from \"./common\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nimport BaseServiceInfo from \"./base-service-info.vue\";\r\nimport CustomRadioButtonGroup from \"@components/common/custom-radio-button-group.vue\";\r\nimport BusinessScenariosDialog from \"@components/common/business-scenarios-dialog.vue\";\r\nimport BaseSumPrice from \"@components/order-management/create-order/product-detail/base-sum-price.vue\";\r\n\r\ninterface InitDataType {\r\n  scenariosLabel: string[];\r\n  scenariosList: Record<string, any>[];\r\n  minConsume: string;\r\n  minConsumeList: Record<string, any>[];\r\n  seatPrice: string;\r\n  seatPriceList: Record<string, any>[];\r\n  cycle: number;\r\n  cycleList: Record<string, any>[];\r\n  seatNum: number;\r\n  seatCustomNum: number;\r\n  minSeatNum: number;\r\n  maxSeatNum: number;\r\n  seatList: Record<string, any>[];\r\n  giftMinutes: string;\r\n  isOvertake: boolean;\r\n}\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'cloud-call-package-big',\n  props: {\n    tagList: {},\n    productData: {},\n    purchasedData: {}\n  },\n  setup(__props: any) {\n\r\nconst { routeQuery } = useVueRouter();\r\nconst { serviceCode, companyId, profileId } = routeQuery.value;\r\nconst { bd_userInfo: userInfo } = LocalStorage.batchGetItem([\"bd_userInfo\"]);\r\n\r\nconst props = __props;\r\n\r\nconst businessScenariosRef = ref();\r\nconst initData = reactive<InitDataType>({\r\n  scenariosLabel: props.tagList.map((item) => item.tagName),\r\n  scenariosList: props.tagList,\r\n  minConsume: \"\",\r\n  minConsumeList: [],\r\n  seatPrice: \"\",\r\n  seatPriceList: [],\r\n  cycle: 1,\r\n  cycleList: [\r\n    { label: \"1个月\", value: 1 },\r\n    { label: \"3个月\", value: 3 },\r\n    { label: \"6个月\", value: 6 },\r\n    { label: \"12个月\", value: 12 },\r\n    { label: \"自定义\", value: -1 },\r\n  ],\r\n  seatNum: 1,\r\n  seatCustomNum: 1,\r\n  minSeatNum: 1,\r\n  maxSeatNum: 10000000,\r\n  seatList: [\r\n    { label: \"10个\", value: 10 },\r\n    { label: \"30个\", value: 30 },\r\n    { label: \"50个\", value: 50 },\r\n  ],\r\n  giftMinutes: \"\",\r\n  isOvertake: false,\r\n});\r\n\r\n// 购买的商品价格信息\r\nconst agentInfo = shallowRef({\r\n  price: \"0.00\",\r\n  sumPrice: \"0.00\",\r\n  unitPrice: \"0.00\",\r\n  addedPrice: \"0.00\",\r\n  subMarketList: [],\r\n  hasAgentPrice: false,\r\n});\r\n\r\n// 所有信息\r\nconst productInfo = computed(() => {\r\n  return props.productData;\r\n});\r\n\r\n// 服务基本信息\r\nconst serviceInfo = computed(() => {\r\n  return productInfo.value.serviceInfo;\r\n});\r\n\r\n// 增值服务\r\nconst addedServiceInfo = computed(() => {\r\n  const addedServiceList = productInfo.value?.addedServiceList ?? [];\r\n  return addedServiceList.find(\r\n    (item: any) => item.addedServiceCode === \"CALL_PACKAGE_BIG_ADDED\"\r\n  );\r\n});\r\n\r\n// 规格数据\r\nconst specsList = computed(() => {\r\n  return addedServiceInfo.value?.specsList?.map((item: any) => {\r\n    return {\r\n      ...item,\r\n      nameList: item.groupNames.split(\",\"),\r\n      codesList: item.groupCodes.split(\",\"),\r\n      valueList: item.groupValues.split(\",\"),\r\n    };\r\n  });\r\n});\r\n\r\n// 最终坐席数量\r\nconst seatCount = computed(() => {\r\n  return initData.seatNum === -1 ? initData.seatCustomNum : initData.seatNum;\r\n});\r\n\r\n// 总分钟数\r\nconst totalMinuteCount = computed(() => {\r\n  const minuteCount = parseFloat(initData.giftMinutes);\r\n  return minuteCount * seatCount.value;\r\n});\r\n\r\n// 赠送分钟数描述\r\nconst giftDesc = computed(() => {\r\n  return parseFloat(initData.giftMinutes) >= 5000\r\n    ? \"不限制分钟数 （不限制分钟数，分钟数可共享）\"\r\n    : `${initData.giftMinutes}分钟/坐席/月 （总计${totalMinuteCount.value}分钟/月，分钟数可共享）`;\r\n});\r\n\r\n// 合计描述\r\nconst sumDescribe = computed(() =>\r\n  productInfo.value?.canBuy\r\n    ? `合计：${initData.cycle}个月 x 坐席单价${initData.seatPrice}元/坐席/月 x ${seatCount.value}坐席 = ${agentInfo.value.sumPrice}元`\r\n    : \"\"\r\n);\r\n\r\n// 当前规格coding\r\nconst specsCoding = computed(() => {\r\n  const { minConsume, seatPrice, giftMinutes } = initData;\r\n  return specsList.value?.find((item: any) => {\r\n    return (\r\n      item.valueList[0] === minConsume &&\r\n      item.valueList[1] === seatPrice &&\r\n      item.valueList[2] === giftMinutes\r\n    );\r\n  })?.coding;\r\n});\r\n\r\n// 产品规格codeList列表\r\nconst specsBaseCodeList = computed(() => {\r\n  return [\r\n    {\r\n      baseCode: \"MINIMUM_CHARGE\",\r\n      number: initData.minConsume,\r\n    },\r\n    {\r\n      baseCode: \"MONTH_MINUTE\",\r\n      number: initData.giftMinutes,\r\n    },\r\n    {\r\n      baseCode: \"MIN_PRICE\",\r\n      number: initData.seatPrice,\r\n    },\r\n  ];\r\n});\r\n\r\n// 打开业务场景弹框\r\nfunction openBusinessScenarios() {\r\n  const list = initData.scenariosList.map((item: any) => {\r\n    return {\r\n      id: item.id,\r\n      pid: item.pid,\r\n      name: item.tagName || item.name,\r\n    };\r\n  });\r\n  businessScenariosRef.value.trigger(true, list);\r\n}\r\n\r\n// 获取业务标签\r\nfunction updateBusinessScenarios(data: any) {\r\n  const { list = [], label = [] } = data;\r\n  initData.scenariosList = list;\r\n  initData.scenariosLabel = label;\r\n}\r\n\r\n// 获取最低消费列表\r\nfunction getMinConsumeList() {\r\n  initData.minConsumeList = [\r\n    ...new Map(\r\n      specsList.value.map((item: any) => [item.nameList[0], item.valueList[0]])\r\n    ),\r\n  ].map(([label, value]) => ({ label, value }));\r\n  initData.minConsume = initData.minConsumeList[0].value;\r\n  getSeatPriceList();\r\n}\r\n\r\n// 获取坐席单价列表\r\nfunction getSeatPriceList() {\r\n  const list: Record<string, any>[] = [];\r\n  const cycleList = specsList.value?.filter((item: Record<string, any>) => {\r\n    return item.valueList[0] === initData.minConsume;\r\n  });\r\n  cycleList.map((item: Record<string, any>) => {\r\n    recastList(list, {\r\n      label: `${item.nameList[1]}/坐席/月`,\r\n      value: item.valueList[1],\r\n    });\r\n  });\r\n  initData.seatPriceList = list;\r\n  initData.seatPrice = list[0].value;\r\n  getGiftMinutes();\r\n}\r\n\r\n// 获取含分钟数\r\nfunction getGiftMinutes() {\r\n  const list: Record<string, any>[] = [];\r\n  const cycleList = specsList.value?.filter((item: Record<string, any>) => {\r\n    return (\r\n      item.valueList[0] === initData.minConsume &&\r\n      item.valueList[1] === initData.seatPrice\r\n    );\r\n  });\r\n  cycleList.map((item: Record<string, any>) => {\r\n    recastList(list, {\r\n      value: item.valueList[2],\r\n    });\r\n  });\r\n  initData.giftMinutes = list[0].value;\r\n  handleSeatNumList();\r\n}\r\n\r\n// 获取坐席数量列表\r\nfunction handleSeatNumList() {\r\n  const { minConsume, seatPrice, giftMinutes } = initData;\r\n  const matchingItem = specsList.value?.find(\r\n    (item: any) =>\r\n      item.valueList[0] === minConsume &&\r\n      item.valueList[1] === seatPrice &&\r\n      item.valueList[2] === giftMinutes\r\n  );\r\n  if (matchingItem) {\r\n    const defaultSeatList = [\r\n      { label: `${matchingItem.minNum}个`, value: matchingItem.minNum },\r\n      { label: \"10个\", value: 10 },\r\n      { label: \"30个\", value: 30 },\r\n      { label: \"50个\", value: 50 },\r\n    ];\r\n    initData.seatList = addedServiceInfo.value?.isDiy\r\n      ? [...defaultSeatList, { label: \"自定义\", value: -1 }]\r\n      : defaultSeatList;\r\n    initData.seatNum = initData.seatList[0].value;\r\n    initData.minSeatNum = matchingItem.minNum;\r\n    initData.maxSeatNum = matchingItem.maxNum;\r\n  }\r\n}\r\n\r\n// 重组数组\r\nfunction recastList(list: Record<string, any>[], info: Record<string, any>) {\r\n  const result = list.find((item) => item.value === info.value);\r\n  !result && list.push(info);\r\n}\r\n\r\n// 重置合作周期和坐席数量\r\nfunction handleReset() {\r\n  initData.cycle = initData.cycleList[0].value;\r\n  initData.seatNum = initData.seatList[0].value;\r\n}\r\n\r\n// 切换不同规格\r\nfunction handleModelValue(value: any, type: string) {\r\n  const actions: Record<string, () => void> = {\r\n    minConsume: () => {\r\n      initData.minConsume = value;\r\n      getSeatPriceList();\r\n      handleReset();\r\n    },\r\n    seatPrice: () => {\r\n      initData.seatPrice = value;\r\n      getGiftMinutes();\r\n      handleReset();\r\n    },\r\n  };\r\n  actions[type]?.();\r\n  getPrice();\r\n}\r\n\r\n// 参数处理\r\nfunction handleParams() {\r\n  const tagList = initData.scenariosList.map((item: any) => {\r\n    return {\r\n      id: item.id,\r\n      name: item.name,\r\n    };\r\n  });\r\n  const params = {\r\n    helpOrder: 1, // 是否代客下单0：否，1：是\r\n    agentId: userInfo.profileId, // 代理商id\r\n    companyId: companyId, // 代理商子公司id\r\n    profileId: profileId, // 代理商子公司操作人id\r\n    buyType: \"BUY_SERVER\", // 购买：BUY_SERVER、升级：UPGRADE、续费：RENEW\r\n    businessTagsInfo: JSON.stringify(tagList),\r\n    shopBuyList: [\r\n      {\r\n        agentId: userInfo.profileId,\r\n        isisTry: false, // 是否试用\r\n        dateType: \"2\", // 时间单位 1:日, 2:月, 3:年\r\n        dateValue: initData.cycle, // 合作期限\r\n        marketCode: serviceCode,\r\n        userNumber: seatCount.value,\r\n        coding: [\r\n          {\r\n            code: \"CALL_PACKAGE_BIG_ADDED\",\r\n            coding: specsCoding.value, // 规格编码\r\n            num: seatCount.value, // 坐席数\r\n          },\r\n        ],\r\n        baseCodeList: specsBaseCodeList.value,\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n\r\n  const commodityInfo = {\r\n    list: [\r\n      {\r\n        ...serviceInfo.value,\r\n        price: agentInfo.value.price,\r\n        specsInfo: `坐席数量：${seatCount.value}个；合作周期：${initData.cycle}个月；最低消费：${initData.minConsume}元起；坐席单价：${initData.seatPrice}元/坐席/月；含分钟数：${initData.giftMinutes}分钟/坐席/月`,\r\n        augmentedServiceList: agentInfo.value?.subMarketList.map(\r\n          (item: Record<string, any>) => {\r\n            if (item.calculateType === \"1\") {\r\n              item.specsInfo = `${initData.cycle}个月`;\r\n            }\r\n            return item;\r\n          }\r\n        ),\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n  return {\r\n    params,\r\n    commodityInfo,\r\n  };\r\n}\r\n\r\n// 计算价格\r\nasync function getPrice() {\r\n  const params = handleParams().params;\r\n  agentInfo.value = await handlePrice(params);\r\n  initData.isOvertake = false;\r\n  // initData.isOvertake =\r\n  //   parseFloat(initData.minConsume) > parseFloat(agentInfo.value.sumPrice);\r\n}\r\n\r\n// 购买\r\nfunction handleBuy() {\r\n  if (!initData.scenariosList?.length) {\r\n    return ElMessage.warning(\"请选择业务场景!\");\r\n  }\r\n  createdOrder(handleParams());\r\n}\r\n\r\n// 初始化\r\nfunction init() {\r\n  getMinConsumeList();\r\n  getPrice();\r\n}\r\n\r\nonMounted(() => {\r\n  init();\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_input_number = _resolveComponent(\"el-input-number\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(BaseServiceInfo, { serviceData: serviceInfo.value }, null, 8, [\"serviceData\"]),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_el_form, { \"label-width\": \"150px\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, { label: \"业务场景\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  readonly: \"\",\n                  placeholder: \"请输入\",\n                  modelValue: initData.scenariosLabel,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((initData.scenariosLabel) = $event)),\n                  onClick: openBusinessScenarios\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"最低消费\" }, {\n              default: _withCtx(() => [\n                _createVNode(CustomRadioButtonGroup, {\n                  list: initData.minConsumeList,\n                  modelValue: initData.minConsume,\n                  minWidth: \"95px\",\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (handleModelValue($event, 'minConsume')))\n                }, null, 8, [\"list\", \"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"坐席单价\" }, {\n              default: _withCtx(() => [\n                _createVNode(CustomRadioButtonGroup, {\n                  list: initData.seatPriceList,\n                  modelValue: initData.seatPrice,\n                  minWidth: \"95px\",\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => (handleModelValue($event, 'seatPrice')))\n                }, null, 8, [\"list\", \"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"合作周期\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_select, {\n                  modelValue: initData.cycle,\n                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((initData.cycle) = $event)),\n                  disabled: \"\"\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(initData.cycleList, (item) => {\n                      return (_openBlock(), _createBlock(_component_el_option, {\n                        key: item.value,\n                        label: item.label,\n                        value: item.value\n                      }, null, 8, [\"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, {\n              label: \"坐席数量\",\n              class: \"amount-form-item\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_select, {\n                  modelValue: initData.seatNum,\n                  \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((initData.seatNum) = $event)),\n                  onChange: getPrice\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(initData.seatList, (item, index) => {\n                      return (_openBlock(), _createBlock(_component_el_option, {\n                        key: index,\n                        label: item.label,\n                        value: item.value\n                      }, null, 8, [\"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"]),\n                (initData.seatNum === -1)\n                  ? (_openBlock(), _createBlock(_component_el_input_number, {\n                      key: 0,\n                      modelValue: initData.seatCustomNum,\n                      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((initData.seatCustomNum) = $event)),\n                      min: initData.minSeatNum,\n                      max: initData.maxSeatNum,\n                      step: addedServiceInfo.value.miniNum,\n                      \"step-strictly\": \"\",\n                      \"value-on-clear\": initData.minSeatNum,\n                      onChange: getPrice\n                    }, null, 8, [\"modelValue\", \"min\", \"max\", \"step\", \"value-on-clear\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"含分钟数\" }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"p\", _hoisted_3, [\n                  _createTextVNode(_toDisplayString(giftDesc.value) + \" \", 1),\n                  (parseFloat(initData.giftMinutes) < 5000)\n                    ? (_openBlock(), _createBlock(_component_el_tooltip, {\n                        key: 0,\n                        placement: \"top-start\",\n                        trigger: \"hover\",\n                        \"popper-class\": \"custom-tooltip\",\n                        content: \"当分钟数超出后，会根据使用的资源不同，定价不相同。\"\n                      }, {\n                        default: _withCtx(() => _cache[6] || (_cache[6] = [\n                          _createElementVNode(\"img\", {\n                            class: \"question-icon\",\n                            src: _imports_0,\n                            alt: \"\"\n                          }, null, -1)\n                        ])),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _createElementVNode(\"p\", _hoisted_4, _toDisplayString(sumDescribe.value), 1),\n                _createElementVNode(\"p\", _hoisted_5, \" 注意：金额需要超过最低消费金额\" + _toDisplayString(initData.minConsume) + \"元，才可购买或加购 \", 1)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }),\n        _createVNode(BaseSumPrice, {\n          onEmitFunc: handleBuy,\n          isOvertake: initData.isOvertake,\n          \"buy-price\": agentInfo.value.sumPrice,\n          \"can-buy\": productInfo.value?.canBuy,\n          hasAgentPrice: agentInfo.value.hasAgentPrice\n        }, null, 8, [\"isOvertake\", \"buy-price\", \"can-buy\", \"hasAgentPrice\"])\n      ])\n    ]),\n    _createVNode(BusinessScenariosDialog, {\n      ref_key: \"businessScenariosRef\",\n      ref: businessScenariosRef,\n      onEmitFunc: updateBusinessScenarios\n    }, null, 512)\n  ], 64))\n}\n}\n\n})","<template>\r\n  <div class=\"product-detail\">\r\n    <BaseServiceInfo :serviceData=\"serviceInfo\"></BaseServiceInfo>\r\n    <div class=\"service-specs\">\r\n      <el-form label-width=\"150px\">\r\n        <el-form-item label=\"业务场景\">\r\n          <el-input\r\n            readonly\r\n            placeholder=\"请输入\"\r\n            v-model=\"initData.scenariosLabel\"\r\n            @click=\"openBusinessScenarios\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"最低消费\">\r\n          <CustomRadioButtonGroup\r\n            :list=\"initData.minConsumeList\"\r\n            :modelValue=\"initData.minConsume\"\r\n            minWidth=\"95px\"\r\n            @update:modelValue=\"handleModelValue($event, 'minConsume')\"\r\n          >\r\n          </CustomRadioButtonGroup>\r\n        </el-form-item>\r\n        <el-form-item label=\"坐席单价\">\r\n          <CustomRadioButtonGroup\r\n            :list=\"initData.seatPriceList\"\r\n            :modelValue=\"initData.seatPrice\"\r\n            minWidth=\"95px\"\r\n            @update:modelValue=\"handleModelValue($event, 'seatPrice')\"\r\n          >\r\n          </CustomRadioButtonGroup>\r\n        </el-form-item>\r\n        <el-form-item label=\"合作周期\">\r\n          <el-select v-model=\"initData.cycle\" disabled>\r\n            <el-option\r\n              v-for=\"item in initData.cycleList\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"坐席数量\" class=\"amount-form-item\">\r\n          <el-select v-model=\"initData.seatNum\" @change=\"getPrice\">\r\n            <el-option\r\n              v-for=\"(item, index) in initData.seatList\"\r\n              :key=\"index\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n          <el-input-number\r\n            v-if=\"initData.seatNum === -1\"\r\n            v-model=\"initData.seatCustomNum\"\r\n            :min=\"initData.minSeatNum\"\r\n            :max=\"initData.maxSeatNum\"\r\n            :step=\"addedServiceInfo.miniNum\"\r\n            step-strictly\r\n            :value-on-clear=\"initData.minSeatNum\"\r\n            @change=\"getPrice\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"含分钟数\">\r\n          <p class=\"word\">\r\n            {{ giftDesc }}\r\n            <el-tooltip\r\n              v-if=\"parseFloat(initData.giftMinutes) < 5000\"\r\n              placement=\"top-start\"\r\n              trigger=\"hover\"\r\n              popper-class=\"custom-tooltip\"\r\n              content=\"当分钟数超出后，会根据使用的资源不同，定价不相同。\"\r\n            >\r\n              <img\r\n                class=\"question-icon\"\r\n                src=\"@/assets/images/icon-question.png\"\r\n                alt=\"\"\r\n              />\r\n            </el-tooltip>\r\n          </p>\r\n          <p class=\"word\">{{ sumDescribe }}</p>\r\n          <p class=\"word\">\r\n            注意：金额需要超过最低消费金额{{\r\n              initData.minConsume\r\n            }}元，才可购买或加购\r\n          </p>\r\n        </el-form-item>\r\n      </el-form>\r\n      <BaseSumPrice\r\n        @emitFunc=\"handleBuy\"\r\n        :isOvertake=\"initData.isOvertake\"\r\n        :buy-price=\"agentInfo.sumPrice\"\r\n        :can-buy=\"productInfo?.canBuy\"\r\n        :hasAgentPrice=\"agentInfo.hasAgentPrice\"\r\n      ></BaseSumPrice>\r\n    </div>\r\n  </div>\r\n  <BusinessScenariosDialog\r\n    ref=\"businessScenariosRef\"\r\n    @emitFunc=\"updateBusinessScenarios\"\r\n  ></BusinessScenariosDialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, onMounted, reactive, ref, shallowRef } from \"vue\";\r\nimport { createdOrder, handlePrice } from \"./common\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nimport BaseServiceInfo from \"./base-service-info.vue\";\r\nimport CustomRadioButtonGroup from \"@components/common/custom-radio-button-group.vue\";\r\nimport BusinessScenariosDialog from \"@components/common/business-scenarios-dialog.vue\";\r\nimport BaseSumPrice from \"@components/order-management/create-order/product-detail/base-sum-price.vue\";\r\n\r\nconst { routeQuery } = useVueRouter();\r\nconst { serviceCode, companyId, profileId } = routeQuery.value;\r\nconst { bd_userInfo: userInfo } = LocalStorage.batchGetItem([\"bd_userInfo\"]);\r\n\r\ninterface InitDataType {\r\n  scenariosLabel: string[];\r\n  scenariosList: Record<string, any>[];\r\n  minConsume: string;\r\n  minConsumeList: Record<string, any>[];\r\n  seatPrice: string;\r\n  seatPriceList: Record<string, any>[];\r\n  cycle: number;\r\n  cycleList: Record<string, any>[];\r\n  seatNum: number;\r\n  seatCustomNum: number;\r\n  minSeatNum: number;\r\n  maxSeatNum: number;\r\n  seatList: Record<string, any>[];\r\n  giftMinutes: string;\r\n  isOvertake: boolean;\r\n}\r\n\r\nconst props = defineProps<{\r\n  tagList: Record<string, any>[];\r\n  productData: Record<string, any>;\r\n  purchasedData: Record<string, any>[];\r\n}>();\r\n\r\nconst businessScenariosRef = ref();\r\nconst initData = reactive<InitDataType>({\r\n  scenariosLabel: props.tagList.map((item) => item.tagName),\r\n  scenariosList: props.tagList,\r\n  minConsume: \"\",\r\n  minConsumeList: [],\r\n  seatPrice: \"\",\r\n  seatPriceList: [],\r\n  cycle: 1,\r\n  cycleList: [\r\n    { label: \"1个月\", value: 1 },\r\n    { label: \"3个月\", value: 3 },\r\n    { label: \"6个月\", value: 6 },\r\n    { label: \"12个月\", value: 12 },\r\n    { label: \"自定义\", value: -1 },\r\n  ],\r\n  seatNum: 1,\r\n  seatCustomNum: 1,\r\n  minSeatNum: 1,\r\n  maxSeatNum: 10000000,\r\n  seatList: [\r\n    { label: \"10个\", value: 10 },\r\n    { label: \"30个\", value: 30 },\r\n    { label: \"50个\", value: 50 },\r\n  ],\r\n  giftMinutes: \"\",\r\n  isOvertake: false,\r\n});\r\n\r\n// 购买的商品价格信息\r\nconst agentInfo = shallowRef({\r\n  price: \"0.00\",\r\n  sumPrice: \"0.00\",\r\n  unitPrice: \"0.00\",\r\n  addedPrice: \"0.00\",\r\n  subMarketList: [],\r\n  hasAgentPrice: false,\r\n});\r\n\r\n// 所有信息\r\nconst productInfo = computed(() => {\r\n  return props.productData;\r\n});\r\n\r\n// 服务基本信息\r\nconst serviceInfo = computed(() => {\r\n  return productInfo.value.serviceInfo;\r\n});\r\n\r\n// 增值服务\r\nconst addedServiceInfo = computed(() => {\r\n  const addedServiceList = productInfo.value?.addedServiceList ?? [];\r\n  return addedServiceList.find(\r\n    (item: any) => item.addedServiceCode === \"CALL_PACKAGE_BIG_ADDED\"\r\n  );\r\n});\r\n\r\n// 规格数据\r\nconst specsList = computed(() => {\r\n  return addedServiceInfo.value?.specsList?.map((item: any) => {\r\n    return {\r\n      ...item,\r\n      nameList: item.groupNames.split(\",\"),\r\n      codesList: item.groupCodes.split(\",\"),\r\n      valueList: item.groupValues.split(\",\"),\r\n    };\r\n  });\r\n});\r\n\r\n// 最终坐席数量\r\nconst seatCount = computed(() => {\r\n  return initData.seatNum === -1 ? initData.seatCustomNum : initData.seatNum;\r\n});\r\n\r\n// 总分钟数\r\nconst totalMinuteCount = computed(() => {\r\n  const minuteCount = parseFloat(initData.giftMinutes);\r\n  return minuteCount * seatCount.value;\r\n});\r\n\r\n// 赠送分钟数描述\r\nconst giftDesc = computed(() => {\r\n  return parseFloat(initData.giftMinutes) >= 5000\r\n    ? \"不限制分钟数 （不限制分钟数，分钟数可共享）\"\r\n    : `${initData.giftMinutes}分钟/坐席/月 （总计${totalMinuteCount.value}分钟/月，分钟数可共享）`;\r\n});\r\n\r\n// 合计描述\r\nconst sumDescribe = computed(() =>\r\n  productInfo.value?.canBuy\r\n    ? `合计：${initData.cycle}个月 x 坐席单价${initData.seatPrice}元/坐席/月 x ${seatCount.value}坐席 = ${agentInfo.value.sumPrice}元`\r\n    : \"\"\r\n);\r\n\r\n// 当前规格coding\r\nconst specsCoding = computed(() => {\r\n  const { minConsume, seatPrice, giftMinutes } = initData;\r\n  return specsList.value?.find((item: any) => {\r\n    return (\r\n      item.valueList[0] === minConsume &&\r\n      item.valueList[1] === seatPrice &&\r\n      item.valueList[2] === giftMinutes\r\n    );\r\n  })?.coding;\r\n});\r\n\r\n// 产品规格codeList列表\r\nconst specsBaseCodeList = computed(() => {\r\n  return [\r\n    {\r\n      baseCode: \"MINIMUM_CHARGE\",\r\n      number: initData.minConsume,\r\n    },\r\n    {\r\n      baseCode: \"MONTH_MINUTE\",\r\n      number: initData.giftMinutes,\r\n    },\r\n    {\r\n      baseCode: \"MIN_PRICE\",\r\n      number: initData.seatPrice,\r\n    },\r\n  ];\r\n});\r\n\r\n// 打开业务场景弹框\r\nfunction openBusinessScenarios() {\r\n  const list = initData.scenariosList.map((item: any) => {\r\n    return {\r\n      id: item.id,\r\n      pid: item.pid,\r\n      name: item.tagName || item.name,\r\n    };\r\n  });\r\n  businessScenariosRef.value.trigger(true, list);\r\n}\r\n\r\n// 获取业务标签\r\nfunction updateBusinessScenarios(data: any) {\r\n  const { list = [], label = [] } = data;\r\n  initData.scenariosList = list;\r\n  initData.scenariosLabel = label;\r\n}\r\n\r\n// 获取最低消费列表\r\nfunction getMinConsumeList() {\r\n  initData.minConsumeList = [\r\n    ...new Map(\r\n      specsList.value.map((item: any) => [item.nameList[0], item.valueList[0]])\r\n    ),\r\n  ].map(([label, value]) => ({ label, value }));\r\n  initData.minConsume = initData.minConsumeList[0].value;\r\n  getSeatPriceList();\r\n}\r\n\r\n// 获取坐席单价列表\r\nfunction getSeatPriceList() {\r\n  const list: Record<string, any>[] = [];\r\n  const cycleList = specsList.value?.filter((item: Record<string, any>) => {\r\n    return item.valueList[0] === initData.minConsume;\r\n  });\r\n  cycleList.map((item: Record<string, any>) => {\r\n    recastList(list, {\r\n      label: `${item.nameList[1]}/坐席/月`,\r\n      value: item.valueList[1],\r\n    });\r\n  });\r\n  initData.seatPriceList = list;\r\n  initData.seatPrice = list[0].value;\r\n  getGiftMinutes();\r\n}\r\n\r\n// 获取含分钟数\r\nfunction getGiftMinutes() {\r\n  const list: Record<string, any>[] = [];\r\n  const cycleList = specsList.value?.filter((item: Record<string, any>) => {\r\n    return (\r\n      item.valueList[0] === initData.minConsume &&\r\n      item.valueList[1] === initData.seatPrice\r\n    );\r\n  });\r\n  cycleList.map((item: Record<string, any>) => {\r\n    recastList(list, {\r\n      value: item.valueList[2],\r\n    });\r\n  });\r\n  initData.giftMinutes = list[0].value;\r\n  handleSeatNumList();\r\n}\r\n\r\n// 获取坐席数量列表\r\nfunction handleSeatNumList() {\r\n  const { minConsume, seatPrice, giftMinutes } = initData;\r\n  const matchingItem = specsList.value?.find(\r\n    (item: any) =>\r\n      item.valueList[0] === minConsume &&\r\n      item.valueList[1] === seatPrice &&\r\n      item.valueList[2] === giftMinutes\r\n  );\r\n  if (matchingItem) {\r\n    const defaultSeatList = [\r\n      { label: `${matchingItem.minNum}个`, value: matchingItem.minNum },\r\n      { label: \"10个\", value: 10 },\r\n      { label: \"30个\", value: 30 },\r\n      { label: \"50个\", value: 50 },\r\n    ];\r\n    initData.seatList = addedServiceInfo.value?.isDiy\r\n      ? [...defaultSeatList, { label: \"自定义\", value: -1 }]\r\n      : defaultSeatList;\r\n    initData.seatNum = initData.seatList[0].value;\r\n    initData.minSeatNum = matchingItem.minNum;\r\n    initData.maxSeatNum = matchingItem.maxNum;\r\n  }\r\n}\r\n\r\n// 重组数组\r\nfunction recastList(list: Record<string, any>[], info: Record<string, any>) {\r\n  const result = list.find((item) => item.value === info.value);\r\n  !result && list.push(info);\r\n}\r\n\r\n// 重置合作周期和坐席数量\r\nfunction handleReset() {\r\n  initData.cycle = initData.cycleList[0].value;\r\n  initData.seatNum = initData.seatList[0].value;\r\n}\r\n\r\n// 切换不同规格\r\nfunction handleModelValue(value: any, type: string) {\r\n  const actions: Record<string, () => void> = {\r\n    minConsume: () => {\r\n      initData.minConsume = value;\r\n      getSeatPriceList();\r\n      handleReset();\r\n    },\r\n    seatPrice: () => {\r\n      initData.seatPrice = value;\r\n      getGiftMinutes();\r\n      handleReset();\r\n    },\r\n  };\r\n  actions[type]?.();\r\n  getPrice();\r\n}\r\n\r\n// 参数处理\r\nfunction handleParams() {\r\n  const tagList = initData.scenariosList.map((item: any) => {\r\n    return {\r\n      id: item.id,\r\n      name: item.name,\r\n    };\r\n  });\r\n  const params = {\r\n    helpOrder: 1, // 是否代客下单0：否，1：是\r\n    agentId: userInfo.profileId, // 代理商id\r\n    companyId: companyId, // 代理商子公司id\r\n    profileId: profileId, // 代理商子公司操作人id\r\n    buyType: \"BUY_SERVER\", // 购买：BUY_SERVER、升级：UPGRADE、续费：RENEW\r\n    businessTagsInfo: JSON.stringify(tagList),\r\n    shopBuyList: [\r\n      {\r\n        agentId: userInfo.profileId,\r\n        isisTry: false, // 是否试用\r\n        dateType: \"2\", // 时间单位 1:日, 2:月, 3:年\r\n        dateValue: initData.cycle, // 合作期限\r\n        marketCode: serviceCode,\r\n        userNumber: seatCount.value,\r\n        coding: [\r\n          {\r\n            code: \"CALL_PACKAGE_BIG_ADDED\",\r\n            coding: specsCoding.value, // 规格编码\r\n            num: seatCount.value, // 坐席数\r\n          },\r\n        ],\r\n        baseCodeList: specsBaseCodeList.value,\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n\r\n  const commodityInfo = {\r\n    list: [\r\n      {\r\n        ...serviceInfo.value,\r\n        price: agentInfo.value.price,\r\n        specsInfo: `坐席数量：${seatCount.value}个；合作周期：${initData.cycle}个月；最低消费：${initData.minConsume}元起；坐席单价：${initData.seatPrice}元/坐席/月；含分钟数：${initData.giftMinutes}分钟/坐席/月`,\r\n        augmentedServiceList: agentInfo.value?.subMarketList.map(\r\n          (item: Record<string, any>) => {\r\n            if (item.calculateType === \"1\") {\r\n              item.specsInfo = `${initData.cycle}个月`;\r\n            }\r\n            return item;\r\n          }\r\n        ),\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n  return {\r\n    params,\r\n    commodityInfo,\r\n  };\r\n}\r\n\r\n// 计算价格\r\nasync function getPrice() {\r\n  const params = handleParams().params;\r\n  agentInfo.value = await handlePrice(params);\r\n  initData.isOvertake = false;\r\n  // initData.isOvertake =\r\n  //   parseFloat(initData.minConsume) > parseFloat(agentInfo.value.sumPrice);\r\n}\r\n\r\n// 购买\r\nfunction handleBuy() {\r\n  if (!initData.scenariosList?.length) {\r\n    return ElMessage.warning(\"请选择业务场景!\");\r\n  }\r\n  createdOrder(handleParams());\r\n}\r\n\r\n// 初始化\r\nfunction init() {\r\n  getMinConsumeList();\r\n  getPrice();\r\n}\r\n\r\nonMounted(() => {\r\n  init();\r\n});\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@use \"./common.scss\" as *;\r\n</style>\r\n","import script from \"./cloud-call-package-big.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./cloud-call-package-big.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./cloud-call-package-big.vue?vue&type=style&index=0&id=cc77828e&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-cc77828e\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_defineComponent","__name","props","tagList","productData","purchasedData","setup","__props","routeQuery","useVueRouter","serviceCode","companyId","profileId","value","bd_userInfo","userInfo","LocalStorage","batchGetItem","businessScenariosRef","ref","initData","reactive","scenariosLabel","map","item","tagName","scenariosList","minConsume","minConsumeList","seatPrice","seatPriceList","cycle","cycleList","label","seatNum","seatCustomNum","minSeatNum","maxSeatNum","seatList","giftMinutes","isOvertake","agentInfo","shallowRef","price","sumPrice","unitPrice","addedPrice","subMarketList","hasAgentPrice","productInfo","computed","serviceInfo","addedServiceInfo","_productInfo$value","addedServiceList","find","addedServiceCode","specsList","_addedServiceInfo$val","nameList","groupNames","split","codesList","groupCodes","valueList","groupValues","seatCount","totalMinuteCount","minuteCount","parseFloat","giftDesc","sumDescribe","_productInfo$value2","canBuy","specsCoding","_specsList$value","coding","specsBaseCodeList","baseCode","number","openBusinessScenarios","list","id","pid","name","trigger","updateBusinessScenarios","data","getMinConsumeList","Map","getSeatPriceList","_specsList$value2","filter","recastList","getGiftMinutes","_specsList$value3","handleSeatNumList","_specsList$value4","matchingItem","_addedServiceInfo$val2","defaultSeatList","minNum","isDiy","maxNum","info","result","push","handleReset","handleModelValue","type","_actions$type","actions","call","getPrice","handleParams","_agentInfo$value","params","helpOrder","agentId","buyType","businessTagsInfo","JSON","stringify","shopBuyList","isisTry","dateType","dateValue","marketCode","userNumber","code","num","baseCodeList","commodityInfo","specsInfo","augmentedServiceList","calculateType","async","handlePrice","handleBuy","_initData$scenariosLi","length","ElMessage","warning","createdOrder","init","onMounted","_ctx","_cache","_productInfo$value3","_component_el_input","_resolveComponent","_component_el_form_item","_component_el_option","_component_el_select","_component_el_input_number","_component_el_tooltip","_component_el_form","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","BaseServiceInfo","serviceData","default","_withCtx","readonly","placeholder","modelValue","$event","onClick","_","CustomRadioButtonGroup","minWidth","disabled","_renderList","_createBlock","key","onChange","index","min","max","step","miniNum","_createCommentVNode","_createTextVNode","_toDisplayString","placement","content","src","_imports_0","alt","BaseSumPrice","onEmitFunc","BusinessScenariosDialog","ref_key","__exports__"],"sourceRoot":""}