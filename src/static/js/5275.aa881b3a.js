"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[5275],{34917:function(e,o,l){l.r(o),l.d(o,{default:function(){return P}});var r=l(6254),a=l(38627),d=l(25598),t=l(55533),s=l(59259),i=l(88365),n=l(616),p=l(10901),u=l(27656),m=l(74718),c=l(86220);const h={class:"register"},g={class:"container"},b=["src"],f={class:"telephone-code"},C={key:0,class:"count"},k=["xlink:href"],w=["xlink:href"],v={class:"copyright"};var F=(0,r.pM)({name:"register",__name:"register",setup(e){const o=(0,d.KR)(),l=(0,d.KR)(),{storeState:F}=(0,p.VO)(),{routeQuery:y}=(0,p.dG)(),V={mobile:[{validator:(e,o,l)=>{(0,u.lr)(e,o,l)},trigger:"blur"}],imgCode:[{required:!0,message:"请输入右侧验证码",trigger:"blur"}],telephoneCode:[{required:!0,message:"请输入4位验证码",trigger:"blur"}],realName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{validator:(e,o,r)=>{(0,u.Oj)(e,o,r,O,l,"rePassword")},trigger:"blur"}],rePassword:[{validator:(e,o,l)=>{(0,u.lx)(e,o,l,O,"password")},trigger:"blur"}]},P=(0,d.Kh)({step:1,telephoneCodeObj:{flag:!0,timer:0,count:60},imgCodeUrl:(0,m.vI)(),telephoneCodeFlag:!1,passwordType:"password",rePasswordType:"password"}),I=(0,d.Kh)({mobile:"",imgCode:"",telephoneCode:""}),O=(0,d.Kh)({realName:"",password:"",rePassword:""}),j=()=>{P.imgCodeUrl=(0,m.vI)()+"?t="+(new Date).getTime()},N=()=>{if(P.telephoneCodeFlag)return;if(P.telephoneCodeFlag=!0,!I.mobile)return P.telephoneCodeFlag=!1,void s.nk.error("请输入手机号");if(!(0,i.Pk)(I.mobile))return P.telephoneCodeFlag=!1,void s.nk.error("请输入正确的手机号码");if(!I.imgCode)return P.telephoneCodeFlag=!1,void s.nk.error("请输入图形验证码");const e={mobile:I.mobile,code:I.imgCode};(0,m.ru)(e).then((()=>{s.nk.success("短信发送成功"),P.telephoneCodeFlag=!1,L()})).catch((()=>{P.telephoneCodeFlag=!1,P.imgCodeUrl=(0,m.vI)()+"?t="+(new Date).getTime()}))},L=()=>{P.telephoneCodeObj.timer=setInterval((()=>{0===P.telephoneCodeObj.count?(clearInterval(P.telephoneCodeObj.timer),P.telephoneCodeObj.flag=!0,P.telephoneCodeObj.count=60):(P.telephoneCodeObj.flag=!1,P.telephoneCodeObj.count-=1)}),1e3)},T=()=>{o.value.validate((e=>{if(!e)return!1;{const e={mobile:I.mobile,checkCode:I.telephoneCode};(0,m.c_)(e).then((()=>{P.step=2}))}}))},U=_.throttle((()=>{l.value.validate((async e=>{if(!e)return!1;{const{state:e,data:o}=await(0,n.vf)(M());if(!e)return;y.value.inviterId&&await(0,n.vf)(R(o.profileId,y.value.inviterId))}}))}),3e3,{leading:!0,trailing:!1}),M=()=>{const e={mobile:I.mobile,realName:O.realName,password:O.password,rePassword:O.rePassword,agencyCode:"",parentId:0};return(0,m.MN)(e)},R=(e,o)=>{const l={mobilePhone:I.mobile,userName:O.realName,userId:e,refererId:o};return(0,m.Kt)(l)},x=(e,o)=>{o[e]="text"===o[e]?"password":"text"};return(0,r.hi)((()=>{clearInterval(P.telephoneCodeObj.timer)})),(e,s)=>{const i=(0,r.g2)("el-input"),p=(0,r.g2)("el-form-item"),u=(0,r.g2)("el-form");return(0,r.uX)(),(0,r.CE)("div",h,[(0,r.bF)(c.A,{pageName:"register"}),(0,r.Lk)("div",g,[(0,r.Lk)("h6",null,"注册"+(0,a.v_)(["ec-line"].includes((0,d.R1)(n.N9))?"":"企业")+"服务商",1),(0,r.bo)((0,r.bF)(u,{ref_key:"formRef",ref:o,model:I,rules:V},{default:(0,r.k6)((()=>[(0,r.bF)(p,{prop:"mobile"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:I.mobile,"onUpdate:modelValue":s[0]||(s[0]=e=>I.mobile=e),modelModifiers:{trim:!0},placeholder:"手机号"},null,8,["modelValue"])])),_:1}),(0,r.bF)(p,{prop:"imgCode",class:"image-verification"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:I.imgCode,"onUpdate:modelValue":s[1]||(s[1]=e=>I.imgCode=e),modelModifiers:{trim:!0},placeholder:"请输入右侧验证码"},null,8,["modelValue"]),(0,r.Lk)("div",{class:"img-code",onClick:j},[(0,r.Lk)("img",{src:P.imgCodeUrl,alt:""},null,8,b)])])),_:1}),(0,r.bF)(p,{prop:"telephoneCode",class:"telephone-verification"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:I.telephoneCode,"onUpdate:modelValue":s[2]||(s[2]=e=>I.telephoneCode=e),modelModifiers:{trim:!0},placeholder:"请输入4位验证码"},null,8,["modelValue"]),(0,r.Lk)("div",f,[P.telephoneCodeObj.flag?((0,r.uX)(),(0,r.CE)("span",{key:1,class:"word",onClick:N},"获取验证码")):((0,r.uX)(),(0,r.CE)("span",C,(0,a.v_)(P.telephoneCodeObj.count)+"s",1))])])),_:1}),(0,r.bF)(p,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{class:"submit-button",onClick:T},"下一步")])),_:1})])),_:1},8,["model"]),[[t.aG,1===P.step]]),(0,r.bo)((0,r.bF)(u,{ref_key:"ruleFormRef",ref:l,model:O,rules:V},{default:(0,r.k6)((()=>[(0,r.bF)(p,{prop:"realName"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:O.realName,"onUpdate:modelValue":s[3]||(s[3]=e=>O.realName=e),modelModifiers:{trim:!0},placeholder:"用户名"},null,8,["modelValue"])])),_:1}),(0,r.bF)(p,{prop:"password",class:"password-item"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:O.password,"onUpdate:modelValue":s[4]||(s[4]=e=>O.password=e),modelModifiers:{trim:!0},placeholder:"请设置密码",type:P.passwordType},null,8,["modelValue","type"]),((0,r.uX)(),(0,r.CE)("svg",{class:"icon","aria-hidden":"true",onClick:s[5]||(s[5]=e=>x("passwordType",P))},[(0,r.Lk)("use",{"xlink:href":"password"===P.passwordType?"#icon-password-hide":"#icon-password-show"},null,8,k)]))])),_:1}),(0,r.bF)(p,{prop:"rePassword",class:"password-item"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:O.rePassword,"onUpdate:modelValue":s[6]||(s[6]=e=>O.rePassword=e),modelModifiers:{trim:!0},placeholder:"再次输入密码",type:P.rePasswordType},null,8,["modelValue","type"]),((0,r.uX)(),(0,r.CE)("svg",{class:"icon","aria-hidden":"true",onClick:s[7]||(s[7]=e=>x("rePasswordType",P))},[(0,r.Lk)("use",{"xlink:href":"password"===P.rePasswordType?"#icon-password-hide":"#icon-password-show"},null,8,w)]))])),_:1}),(0,r.bF)(p,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{class:"submit-button",onClick:s[8]||(s[8]=(...e)=>(0,d.R1)(U)&&(0,d.R1)(U)(...e))},"完成注册")])),_:1})])),_:1},8,["model"]),[[t.aG,2===P.step]])]),(0,r.Lk)("div",v,(0,a.v_)((0,d.R1)(F).copyright),1)])}}}),y=l(83936);const V=(0,y.A)(F,[["__scopeId","data-v-54520392"]]);var P=V}}]);
//# sourceMappingURL=5275.aa881b3a.js.map