{"version":3,"file":"static/js/8867.6f33c49e.js","mappings":"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","sources":["webpack://daili/./src/views/business-management/osprey-cloud-call/speech-library/index.vue?07b1","webpack://daili/./src/views/business-management/osprey-cloud-call/speech-library/index.vue","webpack://daili/./src/views/business-management/osprey-cloud-call/speech-library/index.vue?f0c1"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, withKeys as _withKeys, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"business-management\" }\nconst _hoisted_2 = { class: \"form-container\" }\nconst _hoisted_3 = { class: \"form\" }\nconst _hoisted_4 = { class: \"table-container\" }\n\nimport { ElMessageBox, ElMessage } from \"element-plus\";\r\nimport { ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\n\r\nimport { usePage } from \"jz-tool-lib\";\r\n\r\nimport {\r\n  deleteSpeechLibraryApi,\r\n  pageListAgentAdminCallTextApi,\r\n} from \"@api/business-management-api\";\r\n\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { speechLibraryStatusList } from \"@assets/typeStatus\";\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'index',\n  setup(__props) {\n\r\nconst SelectCompanyDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/select-company-dialog.vue\"\r\n    )\r\n);\r\nconst AddEditSpeechLibraryDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/sub-customer/details/speech-library/add-edit-speech-drawer.vue\"\r\n    )\r\n);\r\n\r\nconst tabList = speechLibraryStatusList.slice(0, 3);\r\ntabList.unshift({\r\n  label: \"全部\",\r\n  value: \"\",\r\n  styleType: \"\",\r\n});\r\nconst virCompanyId = LocalStorage.getItem(\"bd_virCompanyId\");\r\nconst { bd_userInfo: userInfo, bd_agentInfo: agentInfo } =\r\n  LocalStorage.batchGetItem([\"bd_userInfo\", \"bd_agentInfo\"]);\r\n\r\nconst selectCompanyRef = ref();\r\nconst addEditSpeechLibraryRef = ref();\r\nconst initData = shallowReactive({\r\n  active: \"\",\r\n});\r\nconst paramsData = shallowReactive({\r\n  status: \"\",\r\n  applyName: \"\",\r\n  companyId: virCompanyId,\r\n  agentUserId: agentInfo.userId,\r\n});\r\n// 获取话术库列表\r\nconst { getList, pageNumberChange, pageSizeChange, pageData } = usePage({\r\n  listApi: pageListAgentAdminCallTextApi,\r\n  props: {\r\n    pageNumber: \"pageNo\",\r\n    pageSize: \"pageSize\",\r\n  },\r\n  paramsData,\r\n});\r\n\r\n// 选择公司\r\nfunction handleSelectCompany() {\r\n  selectCompanyRef.value.trigger(true);\r\n}\r\n\r\nfunction handleAddEditSpeech(data: {\r\n  type: \"add\" | \"edit\";\r\n  info: Record<string, any>;\r\n}) {\r\n  console.log(data);\r\n  const params = {\r\n    ...data.info,\r\n    companyId: data.info.companyId,\r\n    businessType: Number(data.info.businessType),\r\n    subCompanyCode: data.info.companyCode,\r\n  };\r\n  addEditSpeechLibraryRef.value?.toggle(data.type, true, params);\r\n}\r\n\r\n/*\r\n * 删除模板\r\n * */\r\nfunction handleDelete(info: Record<string, any>) {\r\n  ElMessageBox.confirm(\"是否删除当前模板\", \"提示\", {\r\n    confirmButtonText: \"确定\",\r\n    cancelButtonText: \"取消\",\r\n    type: \"warning\",\r\n  })\r\n    .then(async () => {\r\n      await deleteSpeechLibraryApi.getData({\r\n        id: info.id,\r\n        profileId: userInfo.profileId,\r\n      });\r\n      ElMessage({\r\n        type: \"success\",\r\n        message: \"删除成功\",\r\n      });\r\n      await getList();\r\n    })\r\n    .catch(() => {});\r\n}\r\n\r\n/**\r\n * tab切换\r\n * */\r\nconst tabClick = (item) => {\r\n  initData.active = item.value;\r\n  paramsData.status = item.value;\r\n  getList();\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TabList = _resolveComponent(\"TabList\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_link = _resolveComponent(\"el-link\")!\n  const _component_TableEmpty = _resolveComponent(\"TableEmpty\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_PagePagination = _resolveComponent(\"PagePagination\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_TabList, {\n        list: _unref(tabList),\n        activeIndex: _unref(initData).active,\n        onEmitTab: tabClick\n      }, null, 8, [\"list\", \"activeIndex\"]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_component_el_input, {\n          modelValue: _unref(paramsData).applyName,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(paramsData).applyName) = $event)),\n          placeholder: \"请输入公司名称\",\n          onKeyup: _withKeys(_unref(getList), [\"enter\"]),\n          clearable: \"\"\n        }, null, 8, [\"modelValue\", \"onKeyup\"]),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: _unref(getList)\n        }, {\n          default: _withCtx(() => _cache[1] || (_cache[1] = [\n            _createTextVNode(\"搜索\")\n          ])),\n          _: 1\n        }, 8, [\"onClick\"]),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: handleSelectCompany\n        }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [\n            _createTextVNode(\"新增话术报备 \")\n          ])),\n          _: 1\n        })\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createVNode(_component_el_table, {\n        data: _unref(pageData).list,\n        height: \"calc(100vh - 268px)\"\n      }, {\n        empty: _withCtx(() => [\n          _createVNode(_component_TableEmpty, { \"empty-text\": \"暂无数据\" })\n        ]),\n        default: _withCtx(() => [\n          _createVNode(_component_el_table_column, {\n            prop: \"applyName\",\n            label: \"企业名称\",\n            align: \"center\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"status\",\n            label: \"审核状态\",\n            width: \"200px\",\n            align: \"center\"\n          }, {\n            default: _withCtx(({ row }) => [\n              _createVNode(_component_el_tag, {\n                type: row.statusStyleType\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(row.statusName), 1)\n                ]),\n                _: 2\n              }, 1032, [\"type\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"createByName\",\n            label: \"创建人\",\n            align: \"center\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"createdTime\",\n            label: \"创建时间\",\n            align: \"center\"\n          }),\n          _createVNode(_component_el_table_column, {\n            label: \"操作\",\n            align: \"center\",\n            fixed: \"right\",\n            width: \"150\",\n            \"class-name\": \"operation-group\"\n          }, {\n            default: _withCtx(({ row }) => [\n              _createVNode(_component_el_link, {\n                type: \"primary\",\n                underline: false,\n                onClick: ($event: any) => (\r\n                handleAddEditSpeech({\r\n                  type: 'edit',\r\n                  info: row,\r\n                })\r\n              )\n              }, {\n                default: _withCtx(() => _cache[3] || (_cache[3] = [\n                  _createTextVNode(\"编辑 \")\n                ])),\n                _: 2\n              }, 1032, [\"onClick\"]),\n              _createVNode(_component_el_link, {\n                type: \"primary\",\n                underline: false,\n                onClick: ($event: any) => (handleDelete(row))\n              }, {\n                default: _withCtx(() => _cache[4] || (_cache[4] = [\n                  _createTextVNode(\"删除 \")\n                ])),\n                _: 2\n              }, 1032, [\"onClick\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"data\"]),\n      _createVNode(_component_PagePagination, {\n        pageTotal: _unref(pageData).pageTotal,\n        pageSize: _unref(pageData).pageSize,\n        pageNumber: _unref(pageData).pageNumber,\n        onEmitPageSizeChange: _unref(pageSizeChange),\n        onEmitPageNumberChange: _unref(pageNumberChange)\n      }, null, 8, [\"pageTotal\", \"pageSize\", \"pageNumber\", \"onEmitPageSizeChange\", \"onEmitPageNumberChange\"])\n    ]),\n    _createVNode(_unref(SelectCompanyDialog), {\n      ref_key: \"selectCompanyRef\",\n      ref: selectCompanyRef,\n      onEmitFunc: handleAddEditSpeech\n    }, null, 512),\n    _createVNode(_unref(AddEditSpeechLibraryDrawer), {\n      ref_key: \"addEditSpeechLibraryRef\",\n      ref: addEditSpeechLibraryRef,\n      onEmitFunc: _unref(getList)\n    }, null, 8, [\"onEmitFunc\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <!-- 话术库 -->\r\n  <div class=\"business-management\">\r\n    <div class=\"form-container\">\r\n      <TabList\r\n        :list=\"tabList\"\r\n        :activeIndex=\"initData.active\"\r\n        @emitTab=\"tabClick\"\r\n      ></TabList>\r\n      <div class=\"form\">\r\n        <el-input\r\n          v-model=\"paramsData.applyName\"\r\n          placeholder=\"请输入公司名称\"\r\n          @keyup.enter=\"getList\"\r\n          clearable\r\n        />\r\n        <el-button type=\"primary\" @click=\"getList\">搜索</el-button>\r\n        <el-button type=\"primary\" @click=\"handleSelectCompany\"\r\n          >新增话术报备\r\n        </el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"table-container\">\r\n      <!--   列表   -->\r\n      <el-table :data=\"pageData.list\" height=\"calc(100vh - 268px)\">\r\n        <el-table-column\r\n          prop=\"applyName\"\r\n          label=\"企业名称\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"status\"\r\n          label=\"审核状态\"\r\n          width=\"200px\"\r\n          align=\"center\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <el-tag :type=\"row.statusStyleType\">{{ row.statusName }}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"createByName\"\r\n          label=\"创建人\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          prop=\"createdTime\"\r\n          label=\"创建时间\"\r\n          align=\"center\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          label=\"操作\"\r\n          align=\"center\"\r\n          fixed=\"right\"\r\n          width=\"150\"\r\n          class-name=\"operation-group\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <el-link\r\n              type=\"primary\"\r\n              :underline=\"false\"\r\n              @click=\"\r\n                handleAddEditSpeech({\r\n                  type: 'edit',\r\n                  info: row,\r\n                })\r\n              \"\r\n              >编辑\r\n            </el-link>\r\n            <el-link\r\n              type=\"primary\"\r\n              :underline=\"false\"\r\n              @click=\"handleDelete(row)\"\r\n              >删除\r\n            </el-link>\r\n          </template>\r\n        </el-table-column>\r\n        <template #empty>\r\n          <TableEmpty empty-text=\"暂无数据\"></TableEmpty>\r\n        </template>\r\n      </el-table>\r\n      <!--   分页   -->\r\n      <PagePagination\r\n        :pageTotal=\"pageData.pageTotal\"\r\n        :pageSize=\"pageData.pageSize\"\r\n        :pageNumber=\"pageData.pageNumber\"\r\n        @emitPageSizeChange=\"pageSizeChange\"\r\n        @emitPageNumberChange=\"pageNumberChange\"\r\n      >\r\n      </PagePagination>\r\n    </div>\r\n    <!-- 选择公司 -->\r\n    <SelectCompanyDialog\r\n      ref=\"selectCompanyRef\"\r\n      @emitFunc=\"handleAddEditSpeech\"\r\n    />\r\n    <AddEditSpeechLibraryDrawer\r\n      ref=\"addEditSpeechLibraryRef\"\r\n      @emitFunc=\"getList\"\r\n    ></AddEditSpeechLibraryDrawer>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { ElMessageBox, ElMessage } from \"element-plus\";\r\nimport { ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\n\r\nimport { usePage } from \"jz-tool-lib\";\r\n\r\nimport {\r\n  deleteSpeechLibraryApi,\r\n  pageListAgentAdminCallTextApi,\r\n} from \"@api/business-management-api\";\r\n\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { speechLibraryStatusList } from \"@assets/typeStatus\";\r\n\r\nconst SelectCompanyDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/select-company-dialog.vue\"\r\n    )\r\n);\r\nconst AddEditSpeechLibraryDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/sub-customer/details/speech-library/add-edit-speech-drawer.vue\"\r\n    )\r\n);\r\n\r\nconst tabList = speechLibraryStatusList.slice(0, 3);\r\ntabList.unshift({\r\n  label: \"全部\",\r\n  value: \"\",\r\n  styleType: \"\",\r\n});\r\nconst virCompanyId = LocalStorage.getItem(\"bd_virCompanyId\");\r\nconst { bd_userInfo: userInfo, bd_agentInfo: agentInfo } =\r\n  LocalStorage.batchGetItem([\"bd_userInfo\", \"bd_agentInfo\"]);\r\n\r\nconst selectCompanyRef = ref();\r\nconst addEditSpeechLibraryRef = ref();\r\nconst initData = shallowReactive({\r\n  active: \"\",\r\n});\r\nconst paramsData = shallowReactive({\r\n  status: \"\",\r\n  applyName: \"\",\r\n  companyId: virCompanyId,\r\n  agentUserId: agentInfo.userId,\r\n});\r\n// 获取话术库列表\r\nconst { getList, pageNumberChange, pageSizeChange, pageData } = usePage({\r\n  listApi: pageListAgentAdminCallTextApi,\r\n  props: {\r\n    pageNumber: \"pageNo\",\r\n    pageSize: \"pageSize\",\r\n  },\r\n  paramsData,\r\n});\r\n\r\n// 选择公司\r\nfunction handleSelectCompany() {\r\n  selectCompanyRef.value.trigger(true);\r\n}\r\n\r\nfunction handleAddEditSpeech(data: {\r\n  type: \"add\" | \"edit\";\r\n  info: Record<string, any>;\r\n}) {\r\n  console.log(data);\r\n  const params = {\r\n    ...data.info,\r\n    companyId: data.info.companyId,\r\n    businessType: Number(data.info.businessType),\r\n    subCompanyCode: data.info.companyCode,\r\n  };\r\n  addEditSpeechLibraryRef.value?.toggle(data.type, true, params);\r\n}\r\n\r\n/*\r\n * 删除模板\r\n * */\r\nfunction handleDelete(info: Record<string, any>) {\r\n  ElMessageBox.confirm(\"是否删除当前模板\", \"提示\", {\r\n    confirmButtonText: \"确定\",\r\n    cancelButtonText: \"取消\",\r\n    type: \"warning\",\r\n  })\r\n    .then(async () => {\r\n      await deleteSpeechLibraryApi.getData({\r\n        id: info.id,\r\n        profileId: userInfo.profileId,\r\n      });\r\n      ElMessage({\r\n        type: \"success\",\r\n        message: \"删除成功\",\r\n      });\r\n      await getList();\r\n    })\r\n    .catch(() => {});\r\n}\r\n\r\n/**\r\n * tab切换\r\n * */\r\nconst tabClick = (item) => {\r\n  initData.active = item.value;\r\n  paramsData.status = item.value;\r\n  getList();\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.form-container {\r\n  justify-content: space-between;\r\n\r\n  .el-input {\r\n    width: 200px;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./index.vue?vue&type=style&index=0&id=62e84707&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-62e84707\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_defineComponent","__name","setup","__props","SelectCompanyDialog","defineAsyncComponent","AddEditSpeechLibraryDrawer","tabList","speechLibraryStatusList","slice","unshift","label","value","styleType","virCompanyId","LocalStorage","getItem","bd_userInfo","userInfo","bd_agentInfo","agentInfo","batchGetItem","selectCompanyRef","ref","addEditSpeechLibraryRef","initData","shallowReactive","active","paramsData","status","applyName","companyId","agentUserId","userId","getList","pageNumberChange","pageSizeChange","pageData","usePage","listApi","pageListAgentAdminCallTextApi","props","pageNumber","pageSize","handleSelectCompany","trigger","handleAddEditSpeech","data","_addEditSpeechLibrary","console","log","params","info","businessType","Number","subCompanyCode","companyCode","toggle","type","handleDelete","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","async","deleteSpeechLibraryApi","getData","id","profileId","ElMessage","message","catch","tabClick","item","_ctx","_cache","_component_TabList","_resolveComponent","_component_el_input","_component_el_button","_component_el_table_column","_component_el_tag","_component_el_link","_component_TableEmpty","_component_el_table","_component_PagePagination","_openBlock","_createElementBlock","_createElementVNode","_createVNode","list","_unref","activeIndex","onEmitTab","modelValue","$event","placeholder","onKeyup","_withKeys","clearable","onClick","default","_withCtx","_createTextVNode","_","height","empty","prop","align","width","row","statusStyleType","_toDisplayString","statusName","fixed","underline","pageTotal","onEmitPageSizeChange","onEmitPageNumberChange","ref_key","onEmitFunc","__exports__"],"sourceRoot":""}