"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[4877],{57295:function(e,a,l){l.r(a),l.d(a,{default:function(){return k}});l(95226),l(59784),l(29296),l(47961),l(83238);var u=l(6254),t=l(85723),c=l(25598),i=l(4710),s=l(88365),n=l(10901),o=l(64108),d=l(51409),r=l(8610);const v={class:"product-detail"},p={class:"service-specs"};var m=(0,u.pM)({__name:"im21-yunChaKe-package",props:{productData:{},purchasedData:{}},setup(e){const{routeQuery:a}=(0,n.dG)(),{bd_userInfo:l}=s.DT.batchGetItem(["bd_userInfo"]),m=e,V=(0,c.Kh)({packageNameList:[],packageNameValue:"",packageNameLabel:"",seatValue:"",seatList:[],unlockValue:"",unlockList:[],cycleValue:"",cycleList:[]}),b=(0,c.IJ)({price:"0.00",sumPrice:"0.00",unitPrice:"0.00",addedPrice:"0.00",subMarketList:[],hasAgentPrice:!1}),k=(0,u.EW)((()=>m.productData)),L=(0,u.EW)((()=>k.value.serviceInfo)),f=(0,u.EW)((()=>k.value.addedServiceList)),g=(0,u.EW)((()=>{var e;return null===(e=f.value[0])||void 0===e||null===(e=e.specsList)||void 0===e?void 0:e.map((e=>({...e,nameList:e.groupNames.split(","),codesList:e.groupCodes.split(","),valueList:e.groupValues.split(",")})))})),y=(0,u.EW)((()=>{var e;const{seatValue:a,unlockValue:l,cycleValue:u}=V;return null===(e=g.value)||void 0===e||null===(e=e.find((e=>e.valueList[0]===a&&e.valueList[1]===l&&e.valueList[2]===u)))||void 0===e?void 0:e.coding})),_=(0,u.EW)((()=>[{baseCode:"PRO_CUS_SEAT_NUM",number:V.seatValue},{baseCode:"PRO_CUS_UNLOCHED_NUM",number:V.unlockValue},{baseCode:"PRO_CUS_SERVICE_CYCLE",number:V.cycleValue}]));function C(){var e;V.packageNameList=null===(e=f.value)||void 0===e?void 0:e.map((e=>({label:e.addedServiceName,value:e.addedServiceCode}))),V.packageNameValue=V.packageNameList[0].value,V.packageNameLabel=V.packageNameList[0].label,N()}function N(){V.seatList=[...new Map(g.value.map((e=>[e.nameList[0],e.valueList[0]])))].map((([e,a])=>({label:e,value:a}))),V.seatValue=V.seatList[0].value,I()}function I(){V.unlockList=[...new Map(g.value.map((e=>[e.nameList[1],e.valueList[1]])))].map((([e,a])=>({label:e,value:a}))),V.unlockValue=V.unlockList[0].value,P()}function P(){var e;const a=[],l=null===(e=g.value)||void 0===e?void 0:e.filter((e=>e.valueList[0]===V.seatValue&&e.valueList[1]===V.unlockValue));l.map((e=>{h(a,{label:`${e.nameList[2]}/${e.unitPrice}元`,value:e.valueList[2]})})),V.cycleList=a,V.cycleValue=a[0].value}function h(e,a){const l=e.find((e=>e.value===a.value));!l&&e.push(a)}function E(e,a){switch(a){case"packageNameValue":V.packageNameValue=e;break;case"seatValue":I();break;case"unlockValue":P();break;case"cycleValue":V.cycleValue=e;break}F()}function A(){var e;const u={helpOrder:1,agentId:l.profileId,companyId:a.value.companyId,profileId:a.value.profileId,buyType:"BUY_SERVER",shopBuyList:[{agentId:l.profileId,isisTry:!1,dateType:3,dateValue:V.cycleValue,marketCode:a.value.serviceCode,userNumber:V.seatValue,coding:[{code:"EXPAND_CUS_ADD_PRO",num:V.seatValue,coding:y.value}],baseCodeList:_.value}],sumPrice:b.value.sumPrice},t={list:[{...L.value,price:b.value.price,specsInfo:`套餐名称：${V.packageNameLabel}；坐席数量：${V.seatValue}个；含解锁量：${V.unlockValue}条；服务周期：${V.cycleValue}年；`,augmentedServiceList:null===(e=b.value)||void 0===e?void 0:e.subMarketList.map((e=>("22"===e.calculateType&&(e.specsInfo=`${new BigNumber(V.cycleValue).multipliedBy(12)}个月`),e)))}],sumPrice:b.value.sumPrice};return{params:u,commodityInfo:t}}async function F(){const e=A().params;b.value=await(0,i.AV)(e)}function D(){(0,i.$d)(A())}function S(){C(),F()}return(0,u.sV)((()=>{S()})),(e,a)=>{var l;const c=(0,u.g2)("el-form-item"),i=(0,u.g2)("el-option"),s=(0,u.g2)("el-select"),n=(0,u.g2)("el-tooltip"),m=(0,u.g2)("el-form");return(0,u.uX)(),(0,u.CE)("div",v,[(0,u.bF)(o.A,{serviceData:L.value},null,8,["serviceData"]),(0,u.Lk)("div",p,[(0,u.bF)(m,{"label-width":"150px"},{default:(0,u.k6)((()=>[(0,u.bF)(c,{label:"套餐名称"},{default:(0,u.k6)((()=>[(0,u.bF)(d.A,{list:V.packageNameList,modelValue:V.packageNameValue,minWidth:"95px","onUpdate:modelValue":a[0]||(a[0]=e=>E(e,"packageNameValue"))},null,8,["list","modelValue"])])),_:1}),(0,u.bF)(c,{label:"坐席数"},{default:(0,u.k6)((()=>[(0,u.bF)(s,{modelValue:V.seatValue,"onUpdate:modelValue":[a[1]||(a[1]=e=>V.seatValue=e),a[2]||(a[2]=e=>E(e,"seatValue"))],disabled:""},{default:(0,u.k6)((()=>[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(V.seatList,(e=>((0,u.uX)(),(0,u.Wv)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),"EXPAND_CUS_ADD_PRO"===f.value[0].addedServiceCode?((0,u.uX)(),(0,u.Wv)(n,{key:0,placement:"top-start",trigger:"hover","popper-class":"custom-tooltip",content:"购买后，可自由分配使用人员。"},{default:(0,u.k6)((()=>a[6]||(a[6]=[(0,u.Lk)("img",{class:"question-icon",src:t,alt:""},null,-1)]))),_:1})):(0,u.Q3)("",!0)])),_:1}),(0,u.bF)(c,{label:"含解锁量"},{default:(0,u.k6)((()=>[(0,u.bF)(s,{modelValue:V.unlockValue,"onUpdate:modelValue":[a[3]||(a[3]=e=>V.unlockValue=e),a[4]||(a[4]=e=>E(e,"unlockValue"))]},{default:(0,u.k6)((()=>[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(V.unlockList,(e=>((0,u.uX)(),(0,u.Wv)(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,u.bF)(c,{label:"服务周期"},{default:(0,u.k6)((()=>[(0,u.bF)(d.A,{list:V.cycleList,modelValue:V.cycleValue,minWidth:"95px","onUpdate:modelValue":a[5]||(a[5]=e=>E(e,"cycleValue"))},null,8,["list","modelValue"])])),_:1})])),_:1}),(0,u.bF)(r.A,{onEmitFunc:D,"buy-price":b.value.sumPrice,"can-buy":null===(l=k.value)||void 0===l?void 0:l.canBuy,hasAgentPrice:b.value.hasAgentPrice},null,8,["buy-price","can-buy","hasAgentPrice"])])])}}}),V=l(83936);const b=(0,V.A)(m,[["__scopeId","data-v-346341cc"]]);var k=b}}]);
//# sourceMappingURL=4877.bbe1bbda.js.map