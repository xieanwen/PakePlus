{"version":3,"file":"static/js/5266.b695e4a2.js","mappings":"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","sources":["webpack://daili/./src/components/business-management/ospreyCloudCall/sub-customer/details/third-party-docking/components/add-seat-dialog.vue?9e5e","webpack://daili/./src/components/business-management/ospreyCloudCall/sub-customer/details/third-party-docking/components/add-seat-dialog.vue","webpack://daili/./src/components/business-management/ospreyCloudCall/sub-customer/details/third-party-docking/components/add-seat-dialog.vue?a3d1"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { reactive, ref } from \"vue\";\r\nimport { seatEditApi } from \"@api/ec-line-api\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { ElMessage } from \"element-plus\";\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'add-seat-dialog',\n  props: {\n    visible: { type: Boolean },\n    info: {},\n    isEditing: { type: Boolean }\n  },\n  emits: [\"update:visible\", \"emitFunc\"],\n  setup(__props: any, { emit: __emit }) {\n\r\nconst agentId = LocalStorage.getItem(\"bd_agentId\");\r\nconst userInfo = LocalStorage.getItem(\"bd_userInfo\");\r\nconst formRef = ref();\r\nconst props = __props;\r\nconst emits = __emit;\r\nconst { routeQuery } = useVueRouter();\r\nconst formData = reactive({\r\n  seatId: \"\",\r\n  isEditing: false,\r\n  userName: \"\",\r\n  userAccount: \"\",\r\n});\r\n// 手机号校验\r\nconst validatePhoneNumber = (rule: any, value: string, callback: any) => {\r\n  if (value && !/^1[3-9]\\d{9}$/.test(value)) {\r\n    callback(new Error(\"请输入有效的手机号\"));\r\n  } else {\r\n    callback();\r\n  }\r\n};\r\nconst rules = {\r\n  seatId: [\r\n    {\r\n      required: true,\r\n      message: \"请输入坐席ID\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  userAccount: [\r\n    {\r\n      validator: validatePhoneNumber,\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n};\r\n//打开弹框\r\nconst handleOpen = () => {\r\n  formData.seatId = props.info.userId;\r\n  formData.isEditing = props.isEditing;\r\n  formData.userName = props.info.userName;\r\n  formData.userAccount = props.info.mobile;\r\n};\r\n\r\n// 关闭弹框\r\nconst handleClose = () => {\r\n  emits(\"update:visible\", false);\r\n  if (formRef.value) {\r\n    formRef.value.resetFields();\r\n  }\r\n  formData.seatId = \"\";\r\n  formData.userAccount = \"\";\r\n  formData.userName = \"\";\r\n  formData.isEditing = false;\r\n};\r\n//提交\r\nconst handleSubmit = () => {\r\n  if (!formRef.value) return;\r\n  formData.seatId =\r\n    typeof formData.seatId === \"string\"\r\n      ? formData.seatId.trim().replace(/\\s+/g, \"\")\r\n      : \"\";\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      const params = {\r\n        agentId: agentId,\r\n        companyId: routeQuery.value.companyId,\r\n        userId: formData.seatId,\r\n        id: 0,\r\n        profileId: userInfo.profileId,\r\n        mobile: formData.userAccount,\r\n        userName: formData.userName,\r\n      };\r\n      if (props.isEditing) {\r\n        params.id = props.info.id;\r\n        seatEditApi.getData(params).then((res) => {\r\n          if (res.statusCode === 0) {\r\n            emits(\"emitFunc\");\r\n            ElMessage.success(\"编辑成功\");\r\n            handleClose();\r\n          } else {\r\n            ElMessage.warning(res.msg || \"编辑失败\");\r\n          }\r\n        });\r\n      } else {\r\n        seatEditApi.getData(params).then((res) => {\r\n          if (res.statusCode === 0) {\r\n            emits(\"emitFunc\");\r\n            ElMessage.success(\"新增成功\");\r\n            handleClose();\r\n          } else {\r\n            ElMessage.warning(res.msg || \"新增失败\");\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    \"model-value\": _ctx.visible,\n    title: formData.isEditing ? '编辑坐席' : '新增坐席',\n    width: \"500px\",\n    class: \"custom-dialog\",\n    onOpen: handleOpen,\n    \"before-close\": handleClose\n  }, {\n    footer: _withCtx(() => [\n      _createVNode(_component_el_button, { onClick: handleClose }, {\n        default: _withCtx(() => _cache[4] || (_cache[4] = [\n          _createTextVNode(\"取 消\")\n        ])),\n        _: 1\n      }),\n      _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: handleSubmit\n      }, {\n        default: _withCtx(() => _cache[5] || (_cache[5] = [\n          _createTextVNode(\"确 定\")\n        ])),\n        _: 1\n      })\n    ]),\n    default: _withCtx(() => [\n      _createVNode(_component_el_form, {\n        ref_key: \"formRef\",\n        ref: formRef,\n        rules: rules,\n        model: formData,\n        class: \"package-form\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_form_item, {\n            label: \"用户ID\",\n            prop: \"seatId\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_input, {\n                modelValue: formData.seatId,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((formData.seatId) = $event)),\n                placeholder: \"请输入\",\n                maxlength: \"50\",\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _cache[3] || (_cache[3] = _createElementVNode(\"p\", null, \"EC系统中的用户ID\", -1)),\n          _createVNode(_component_el_form_item, { label: \"用户名称\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_input, {\n                modelValue: formData.userName,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((formData.userName) = $event)),\n                placeholder: \"请输入\",\n                maxlength: \"50\",\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, {\n            label: \"用户账号\",\n            prop: \"userAccount\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_input, {\n                modelValue: formData.userAccount,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((formData.userAccount) = $event)),\n                placeholder: \"请输入\",\n                maxlength: \"50\",\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"model\"])\n    ]),\n    _: 1\n  }, 8, [\"model-value\", \"title\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    :model-value=\"visible\"\r\n    :title=\"formData.isEditing ? '编辑坐席' : '新增坐席'\"\r\n    width=\"500px\"\r\n    class=\"custom-dialog\"\r\n    @open=\"handleOpen\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n    <el-form\r\n      ref=\"formRef\"\r\n      :rules=\"rules\"\r\n      :model=\"formData\"\r\n      class=\"package-form\"\r\n    >\r\n      <el-form-item label=\"用户ID\" prop=\"seatId\">\r\n        <el-input\r\n          v-model=\"formData.seatId\"\r\n          placeholder=\"请输入\"\r\n          maxlength=\"50\"\r\n          clearable\r\n        />\r\n      </el-form-item>\r\n      <p>EC系统中的用户ID</p>\r\n      <el-form-item label=\"用户名称\">\r\n        <el-input\r\n          v-model=\"formData.userName\"\r\n          placeholder=\"请输入\"\r\n          maxlength=\"50\"\r\n          clearable\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"用户账号\" prop=\"userAccount\">\r\n        <el-input\r\n          v-model=\"formData.userAccount\"\r\n          placeholder=\"请输入\"\r\n          maxlength=\"50\"\r\n          clearable\r\n        />\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <el-button @click=\"handleClose\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleSubmit\">确 定</el-button>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { reactive, ref } from \"vue\";\r\nimport { seatEditApi } from \"@api/ec-line-api\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { ElMessage } from \"element-plus\";\r\nconst agentId = LocalStorage.getItem(\"bd_agentId\");\r\nconst userInfo = LocalStorage.getItem(\"bd_userInfo\");\r\nconst formRef = ref();\r\nconst props = defineProps<{\r\n  visible: boolean;\r\n  info: Record<string, any>;\r\n  isEditing: boolean;\r\n}>();\r\nconst emits = defineEmits<{\r\n  (e: \"update:visible\", value: boolean);\r\n  (e: \"emitFunc\", value?: Record<string, any>);\r\n}>();\r\nconst { routeQuery } = useVueRouter();\r\nconst formData = reactive({\r\n  seatId: \"\",\r\n  isEditing: false,\r\n  userName: \"\",\r\n  userAccount: \"\",\r\n});\r\n// 手机号校验\r\nconst validatePhoneNumber = (rule: any, value: string, callback: any) => {\r\n  if (value && !/^1[3-9]\\d{9}$/.test(value)) {\r\n    callback(new Error(\"请输入有效的手机号\"));\r\n  } else {\r\n    callback();\r\n  }\r\n};\r\nconst rules = {\r\n  seatId: [\r\n    {\r\n      required: true,\r\n      message: \"请输入坐席ID\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  userAccount: [\r\n    {\r\n      validator: validatePhoneNumber,\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n};\r\n//打开弹框\r\nconst handleOpen = () => {\r\n  formData.seatId = props.info.userId;\r\n  formData.isEditing = props.isEditing;\r\n  formData.userName = props.info.userName;\r\n  formData.userAccount = props.info.mobile;\r\n};\r\n\r\n// 关闭弹框\r\nconst handleClose = () => {\r\n  emits(\"update:visible\", false);\r\n  if (formRef.value) {\r\n    formRef.value.resetFields();\r\n  }\r\n  formData.seatId = \"\";\r\n  formData.userAccount = \"\";\r\n  formData.userName = \"\";\r\n  formData.isEditing = false;\r\n};\r\n//提交\r\nconst handleSubmit = () => {\r\n  if (!formRef.value) return;\r\n  formData.seatId =\r\n    typeof formData.seatId === \"string\"\r\n      ? formData.seatId.trim().replace(/\\s+/g, \"\")\r\n      : \"\";\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      const params = {\r\n        agentId: agentId,\r\n        companyId: routeQuery.value.companyId,\r\n        userId: formData.seatId,\r\n        id: 0,\r\n        profileId: userInfo.profileId,\r\n        mobile: formData.userAccount,\r\n        userName: formData.userName,\r\n      };\r\n      if (props.isEditing) {\r\n        params.id = props.info.id;\r\n        seatEditApi.getData(params).then((res) => {\r\n          if (res.statusCode === 0) {\r\n            emits(\"emitFunc\");\r\n            ElMessage.success(\"编辑成功\");\r\n            handleClose();\r\n          } else {\r\n            ElMessage.warning(res.msg || \"编辑失败\");\r\n          }\r\n        });\r\n      } else {\r\n        seatEditApi.getData(params).then((res) => {\r\n          if (res.statusCode === 0) {\r\n            emits(\"emitFunc\");\r\n            ElMessage.success(\"新增成功\");\r\n            handleClose();\r\n          } else {\r\n            ElMessage.warning(res.msg || \"新增失败\");\r\n          }\r\n        });\r\n      }\r\n    }\r\n  });\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.package-form {\r\n  p {\r\n    color: #9ca6b9;\r\n    margin: 0 0 20px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./add-seat-dialog.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./add-seat-dialog.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./add-seat-dialog.vue?vue&type=style&index=0&id=08fcc5a2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-08fcc5a2\"]])\n\nexport default __exports__"],"names":["_defineComponent","__name","props","visible","type","Boolean","info","isEditing","emits","setup","__props","emit","__emit","agentId","LocalStorage","getItem","userInfo","formRef","ref","routeQuery","useVueRouter","formData","reactive","seatId","userName","userAccount","validatePhoneNumber","rule","value","callback","test","Error","rules","required","message","trigger","validator","handleOpen","userId","mobile","handleClose","resetFields","handleSubmit","trim","replace","validate","async","valid","params","companyId","id","profileId","seatEditApi","getData","then","res","statusCode","ElMessage","success","warning","msg","_ctx","_cache","_component_el_input","_resolveComponent","_component_el_form_item","_component_el_form","_component_el_button","_component_el_dialog","_openBlock","_createBlock","title","width","class","onOpen","footer","_withCtx","_createVNode","onClick","default","_createTextVNode","_","ref_key","model","label","prop","modelValue","$event","placeholder","maxlength","clearable","_createElementVNode","__exports__"],"sourceRoot":""}