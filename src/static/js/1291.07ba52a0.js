"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[1291],{11291:function(e,l,n){n.r(l),n.d(l,{default:function(){return d}});var a=n(6254),t=n(25598),i=n(59259),u=n(79689),s=n(88365),o=(0,a.pM)({__name:"add-package-drawer",props:{visible:{type:Boolean},info:{},isEditing:{type:Boolean}},emits:["update:visible","emitFunc"],setup(e,{emit:l}){const n=s.DT.getItem("bd_agentId"),o=e,m=l,c=(0,t.Kh)({packageName:"",minutesCount:0,minutesWithin:0,minutesOutside:0,seatFees:0,monthlyRent:0,collectionRules:null,smallMonthlyRent:0,smallAcollectionRules:null,isEditing:!1,id:0}),d=()=>{o.isEditing&&o.info?(c.packageName=o.info.packageName,c.minutesCount=o.info.packageMinutes,c.minutesWithin=o.info.packageInsideUnitPrice,c.minutesOutside=o.info.packageOutsideUnitPrice,c.seatFees=o.info.seatFee,c.monthlyRent=o.info.midNumberFee,c.smallMonthlyRent=o.info.smallNumberFee,c.collectionRules=o.info.midNumberRule,c.smallAcollectionRules=o.info.smallNumberRule,c.id=o.info.id):(c.packageName="",c.minutesCount=0,c.minutesWithin=0,c.minutesOutside=0,c.seatFees=0,c.monthlyRent=0,c.smallAcollectionRules=null,c.collectionRules=null)},r=()=>{m("update:visible",!1),c.packageName="",c.minutesCount=0,c.minutesWithin=0,c.minutesOutside=0,c.seatFees=0,c.monthlyRent=0,c.collectionRules=null,c.smallMonthlyRent=0,c.smallAcollectionRules=null,c.isEditing=!1},p=async()=>{const e={id:c.id};try{const l=await u.g1.getData(e);return 0===l.statusCode||(i.nk.warning(l.msg||"正在使用中,请勿编辑！"),!1)}catch(l){return!1}},b=async()=>{if(o.isEditing){const e=await p();if(!e)return}if(!c.packageName)return i.nk.warning("套餐名称不能为空"),!1;if(c.packageName.length>20)return i.nk.warning("套餐名称不能超过20个字符"),!1;const e={agencyId:n,midNumberFee:c.monthlyRent,midNumberRule:c.collectionRules,packageInsideUnitPrice:c.minutesWithin,packageMinutes:c.minutesCount,packageName:c.packageName,packageOutsideUnitPrice:c.minutesOutside,seatFee:c.seatFees,smallNumberFee:c.smallMonthlyRent,smallNumberRule:c.smallAcollectionRules,id:0};o.isEditing?(e.id=c.id,u.bL.getData(e).then((e=>{0===e.statusCode?(i.nk.success("编辑成功"),m("emitFunc"),r()):i.nk.warning(e.msg||"编辑失败")}))):u.YF.getData(e).then((e=>{0===e.statusCode?(i.nk.success("新增成功"),m("emitFunc"),r()):i.nk.warning(e.msg||"新增失败")}))};return(e,l)=>{const n=(0,a.g2)("el-input"),t=(0,a.g2)("el-form-item"),i=(0,a.g2)("el-input-number"),u=(0,a.g2)("el-form"),s=(0,a.g2)("el-button"),o=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.Wv)(o,{"model-value":e.visible,title:e.isEditing?"编辑套餐":"新增套餐",size:"550",class:"custom-drawer",onOpen:d,"before-close":r},{footer:(0,a.k6)((()=>[(0,a.bF)(s,{type:"primary",onClick:b},{default:(0,a.k6)((()=>l[18]||(l[18]=[(0,a.eW)("确 定")]))),_:1}),(0,a.bF)(s,{onClick:r},{default:(0,a.k6)((()=>l[19]||(l[19]=[(0,a.eW)("取 消")]))),_:1})])),default:(0,a.k6)((()=>[(0,a.bF)(u,{class:"package-form"},{default:(0,a.k6)((()=>[(0,a.bF)(t,{label:"套餐名称"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{modelValue:c.packageName,"onUpdate:modelValue":l[0]||(l[0]=e=>c.packageName=e),placeholder:"请输入",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(t,{label:"套餐分钟数"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:c.minutesCount,"onUpdate:modelValue":l[1]||(l[1]=e=>c.minutesCount=e),placeholder:"请输入",min:0,step:1,precision:0,max:999999,controls:!1,clearable:""},null,8,["modelValue"]),l[9]||(l[9]=(0,a.Lk)("span",null,"分钟",-1))])),_:1}),(0,a.bF)(t,{label:"套餐内分钟数单价"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:c.minutesWithin,"onUpdate:modelValue":l[2]||(l[2]=e=>c.minutesWithin=e),min:0,max:999999,precision:3,controls:!1,placeholder:"请输入",clearable:""},null,8,["modelValue"]),l[10]||(l[10]=(0,a.Lk)("span",null,"元/分钟",-1))])),_:1}),(0,a.bF)(t,{label:"套餐外分钟数单价"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:c.minutesOutside,"onUpdate:modelValue":l[3]||(l[3]=e=>c.minutesOutside=e),min:0,precision:3,max:999999,controls:!1,placeholder:"请输入",clearable:""},null,8,["modelValue"]),l[11]||(l[11]=(0,a.Lk)("span",null,"元/分钟",-1))])),_:1}),(0,a.bF)(t,{label:"坐席费用"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:c.seatFees,"onUpdate:modelValue":l[4]||(l[4]=e=>c.seatFees=e),min:0,precision:3,max:999999,controls:!1,placeholder:"请输入",clearable:""},null,8,["modelValue"]),l[12]||(l[12]=(0,a.Lk)("span",null,"元/位/月",-1))])),_:1}),(0,a.bF)(t,{label:"中间号月租"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:c.monthlyRent,"onUpdate:modelValue":l[5]||(l[5]=e=>c.monthlyRent=e),min:0,precision:3,max:999999,controls:!1,placeholder:"请输入",clearable:""},null,8,["modelValue"]),l[13]||(l[13]=(0,a.Lk)("span",null,"元/月",-1))])),_:1}),(0,a.bF)(t,{label:"中间号收取规则"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:c.collectionRules,"onUpdate:modelValue":l[6]||(l[6]=e=>c.collectionRules=e),min:0,max:999999,step:1,precision:0,controls:!1,placeholder:"请输入",clearable:"",class:"rule-input"},null,8,["modelValue"]),l[14]||(l[14]=(0,a.Lk)("span",null,"坐席 = 1码号",-1))])),_:1}),(0,a.bF)(t,{label:"小号月租"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:c.smallMonthlyRent,"onUpdate:modelValue":l[7]||(l[7]=e=>c.smallMonthlyRent=e),min:0,precision:3,max:999999,controls:!1,placeholder:"请输入",clearable:""},null,8,["modelValue"]),l[15]||(l[15]=(0,a.Lk)("span",null,"元/月",-1))])),_:1}),(0,a.bF)(t,{label:"小号收取规则"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{modelValue:c.smallAcollectionRules,"onUpdate:modelValue":l[8]||(l[8]=e=>c.smallAcollectionRules=e),min:0,max:999999,step:1,precision:0,controls:!1,placeholder:"请输入",clearable:"",class:"rule-input"},null,8,["modelValue"]),l[16]||(l[16]=(0,a.Lk)("span",null,"坐席 = 1码号",-1))])),_:1}),(0,a.bF)(t,null,{default:(0,a.k6)((()=>l[17]||(l[17]=[(0,a.Lk)("p",null," 套餐费用在坐席开通时或套餐周期开始时，从客户账户上进行扣费。如果扣费失败（客户余额不足），会导致子客户套餐续费失败。请关注客户余额。 ",-1),(0,a.Lk)("p",null," 注：您设置的套餐仅用于，您与客户直接进行结算计算，不影响您与代理商平台的计算。 ",-1)]))),_:1})])),_:1})])),_:1},8,["model-value","title"])}}}),m=n(83936);const c=(0,m.A)(o,[["__scopeId","data-v-89445b98"]]);var d=c}}]);
//# sourceMappingURL=1291.07ba52a0.js.map