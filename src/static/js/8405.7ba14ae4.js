"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[8405],{24995:function(e,a,l){l.r(a),l.d(a,{default:function(){return P}});l(95226);var t=l(6254),n=l(38627),o=l(25598),r=l(91373),i=l(65802),d=l(59259),c=l(616),u=l(88365),s=l.p+"static/img/qrcode_wx_demo.a6f42352.jpg",p=l.p+"static/img/qrcode_wx_prod.ae8afdd8.jpg";const m={class:"dialog-footer"};var b=(0,t.pM)({__name:"InsufficientBalanceDialog",props:{alarmBalance:{}},emits:["update:alarmBalance"],setup(e,{expose:a,emit:l}){const n=e,r=l,b=(0,o.KR)([["demo"].includes((0,c.cA)())?s:p]),g=(0,o.KR)(!1),k=u.DT.getItem("bd_agentId"),v=(0,t.EW)({get(){return n.alarmBalance},set(e){r("update:alarmBalance",e)}});function f(){if(!(0,u.Bl)(v.value))return d.nk.warning("请输入正确金额");(0,i.Kb)({agencyId:k,alarmBalance:v.value}).then((e=>{h(!1),d.nk.success((null===e||void 0===e?void 0:e.msg)||"设置成功")}))}function h(e=!0){g.value=e}return a({toggle:h}),(e,a)=>{const l=(0,t.g2)("el-input-number"),n=(0,t.g2)("el-form-item"),o=(0,t.g2)("el-image"),r=(0,t.g2)("el-form"),i=(0,t.g2)("el-button"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value=e),title:"余额不足提醒",class:"custom-dialog",width:500},{footer:(0,t.k6)((()=>[(0,t.Lk)("span",m,[(0,t.bF)(i,{type:"primary",onClick:f},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("确定")]))),_:1}),(0,t.bF)(i,{onClick:a[1]||(a[1]=e=>g.value=!1)},{default:(0,t.k6)((()=>a[6]||(a[6]=[(0,t.eW)("取消")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"阈值设置："},{default:(0,t.k6)((()=>[(0,t.bF)(l,{class:"ein",modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),placeholder:"请输入阈值",controls:!1,min:0},null,8,["modelValue"]),a[3]||(a[3]=(0,t.Lk)("p",{class:"tip"},"阈值为余额预警额度，余额低于阈值时将提醒您进行充值。",-1))])),_:1}),(0,t.bF)(n,{label:"扫码绑定："},{default:(0,t.k6)((()=>[(0,t.bF)(o,{style:{width:"150px",height:"150px"},src:b.value[0],"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":b.value,"initial-index":4,fit:"cover"},null,8,["src","preview-src-list"]),a[4]||(a[4]=(0,t.Lk)("p",{class:"tip"}," 使用微信扫码进入公众号-支持中心绑定账号，绑定代理商账号，当余额低于闽值时将通过微信公众号通知管理员。 ",-1))])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),g=l(83936);const k=(0,g.A)(b,[["__scopeId","data-v-50cd730d"]]);var v=k,f=l(31665);const h={class:"table-container"};var _=(0,t.pM)({__name:"BondDetailsDrawer",props:{ensureBalance:{}},setup(e,{expose:a}){const l=e,r=(0,o.KR)(!1),d=(0,f.rd)();function c(e=!0){r.value=e,e&&g()}const s=u.DT.getItem("bd_agentId"),{pageNumberChange:p,pageSizeChange:m,pageData:b,getList:g}=(0,u.N5)({listApi:i.O6,props:{pageNumber:"page",pageSize:"pageSize"},searchParams(){return{agencyId:s}},notExecute:!0});function k(e){localStorage.setItem("selectedOrderNumber",e),d.push({name:"financialCenter.billManagement.dailyStatement"})}return a({toggle:c}),(e,a)=>{const i=(0,t.g2)("el-table-column"),d=(0,t.g2)("el-link"),c=(0,t.g2)("TableEmpty"),u=(0,t.g2)("el-table"),s=(0,t.g2)("PagePagination"),g=(0,t.g2)("el-drawer");return(0,t.uX)(),(0,t.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),title:"保证金明细",size:"1200",class:"custom-drawer"},{default:(0,t.k6)((()=>[(0,t.Lk)("p",null,"当前保证金总额："+(0,n.v_)(l.ensureBalance),1),(0,t.Lk)("div",h,[(0,t.bF)(u,{data:(0,o.R1)(b).list,height:"calc(100vh - 225px)"},{empty:(0,t.k6)((()=>[(0,t.bF)(c)])),default:(0,t.k6)((()=>[(0,t.bF)(i,{prop:"createdTime",label:"时间",width:"220"}),(0,t.bF)(i,{prop:"orderNo",label:"订单号\\交易号",width:"220"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(d,{onClick:a=>k(e.orderNo),type:"primary"},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.orderNo),1)])),_:2},1032,["onClick"])])),_:1}),(0,t.bF)(i,{prop:"companyName",label:"使用账户",width:"180"}),(0,t.bF)(i,{prop:"productName",label:"产品名称",width:"180"}),(0,t.bF)(i,{prop:"typeText",label:"类型",width:"100"}),(0,t.bF)(i,{prop:"sourceText",label:"来源",width:"180"}),(0,t.bF)(i,{prop:"amount",label:"变动金额",width:"150"}),(0,t.bF)(i,{prop:"frozenAmount",label:"总保证金",width:"150"})])),_:1},8,["data"]),(0,t.bF)(s,{pageTotal:(0,o.R1)(b).pageTotal,pageSize:(0,o.R1)(b).pageSize,pageNumber:(0,o.R1)(b).pageNumber,onEmitPageSizeChange:(0,o.R1)(m),onEmitPageNumberChange:(0,o.R1)(p)},null,8,["pageTotal","pageSize","pageNumber","onEmitPageSizeChange","onEmitPageNumberChange"])])])),_:1},8,["modelValue"])}}});const F=_;var N=F,w=l(4240);const y={class:"transaction-details-page"},C={class:"container"},B={class:"item"},R={class:"value"},L={class:"item available-balance"},z={class:"value"},S={class:"item"},T={class:"value"},x={class:"table-container"},D={class:"one-row"};var E=(0,t.pM)({__name:"index",setup(e){const a=(0,f.rd)(),l=(0,o.Kh)({dateList:[],orderNumber:""}),d=(0,o.Kh)({alarmBalance:"",availableBalance:0,balance:0,ensureBalance:0}),s=u.DT.getItem("bd_agentId"),p=(0,o.KR)(),m=(0,o.KR)(),b=()=>{console.log(l),P(),I()};function g(){(0,i.GM)({agencyId:s}).then((e=>{var a,l,t,n;console.log(e,"line 143"),d.alarmBalance=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.alarmBalance,d.availableBalance=(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.availableBalance)||0,d.balance=(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.balance)||0,d.ensureBalance=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.ensureBalance)||0}))}function k(e){localStorage.setItem("selectedOrderNumber",e),a.push({name:"financialCenter.billManagement.dailyStatement"})}function h(e){const[a,l]=e||[];return[a?`${a} 00:00:00`:"",l?`${l} 23:59:59`:""]}const{pageNumberChange:_,pageSizeChange:F,pageData:E,getList:I,resetPageNumber:P}=(0,u.N5)({listApi:i.sx,props:{pageNumber:"page",pageSize:"pageSize"},searchParams(){const[e,a]=h(l.dateList);return{agencyId:s,orderNo:l.orderNumber,startTime:e,endTime:a}},notExecute:!0});return g(),I(),(e,a)=>{const i=(0,t.g2)("el-date-picker"),s=(0,t.g2)("el-form-item"),g=(0,t.g2)("el-input"),f=(0,t.g2)("el-button"),h=(0,t.g2)("el-form"),I=(0,t.g2)("el-link"),P=(0,t.g2)("el-card"),V=(0,t.g2)("el-table-column"),W=(0,t.g2)("el-icon"),K=(0,t.g2)("el-tooltip"),M=(0,t.g2)("TableEmpty"),O=(0,t.g2)("el-table"),Y=(0,t.g2)("PagePagination");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("div",y,[(0,t.bF)(h,{inline:!0,model:l},{default:(0,t.k6)((()=>[(0,t.bF)(s,{label:"交易时间："},{default:(0,t.k6)((()=>[(0,t.bF)(i,{modelValue:l.dateList,"onUpdate:modelValue":a[0]||(a[0]=e=>l.dateList=e),type:"daterange","range-separator":"~",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])])),_:1}),(0,t.bF)(s,{label:"订单号："},{default:(0,t.k6)((()=>[(0,t.bF)(g,{modelValue:l.orderNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>l.orderNumber=e),placeholder:"请输入订单号"},null,8,["modelValue"])])),_:1}),(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(f,{type:"primary",onClick:b},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("搜索")]))),_:1})])),_:1})])),_:1},8,["model"]),(0,t.bF)(P,{class:"balance-composition",shadow:"never"},{default:(0,t.k6)((()=>[a[11]||(a[11]=(0,t.Lk)("h6",null,"余额组成",-1)),(0,t.Lk)("div",C,[(0,t.Lk)("div",B,[a[6]||(a[6]=(0,t.Lk)("div",{class:"title"},"余额",-1)),(0,t.Lk)("div",R,(0,n.v_)((0,o.R1)(u.qG)(d.balance)),1)]),(0,t.Lk)("div",L,[a[8]||(a[8]=(0,t.Lk)("div",{class:"title"},"可用余额",-1)),(0,t.Lk)("div",z,(0,n.v_)((0,o.R1)(u.qG)(d.availableBalance)),1),["ec-line"].includes((0,o.R1)(c.N9))?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(I,{key:0,type:"primary",onClick:a[2]||(a[2]=e=>p.value.toggle())},{default:(0,t.k6)((()=>a[7]||(a[7]=[(0,t.eW)("提醒设置 ")]))),_:1}))]),(0,t.Lk)("div",S,[a[10]||(a[10]=(0,t.Lk)("div",{class:"title"},"保证金",-1)),(0,t.Lk)("div",T,(0,n.v_)((0,o.R1)(u.qG)(d.ensureBalance)),1),(0,t.bF)(I,{type:"primary",onClick:a[3]||(a[3]=e=>m.value.toggle())},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.eW)("查看明细 ")]))),_:1})])])])),_:1}),(0,t.Lk)("div",x,[(0,t.bF)(O,{data:(0,o.R1)(E).list,height:"calc(100vh - 448px)"},{empty:(0,t.k6)((()=>[(0,t.bF)(M)])),default:(0,t.k6)((()=>[(0,t.bF)(V,{prop:"id",label:"流水号",width:"220"}),(0,t.bF)(V,{prop:"createdTime",label:"交易时间",width:"200"}),(0,t.bF)(V,{prop:"tradeTypeName",label:"交易类型",width:"140"},{header:(0,t.k6)((()=>[a[12]||(a[12]=(0,t.eW)(" 交易类型 ")),(0,t.bF)(K,{class:"box-item",effect:"dark",content:"交易类型分为：消费-订单消耗；充值-代理商充值；退款-订单退款；调拨-现金券下发；返佣-因客户订单产生的返佣；",placement:"top"},{default:(0,t.k6)((()=>[(0,t.bF)(W,{size:16,color:"#b1b3b8"},{default:(0,t.k6)((()=>[(0,t.bF)((0,o.R1)(r.lOC))])),_:1})])),_:1})])),_:1}),(0,t.bF)(V,{prop:"cashOutNo",label:"订单号/流水号",width:"220"},{header:(0,t.k6)((()=>[a[13]||(a[13]=(0,t.eW)(" 订单号/流水号 ")),(0,t.bF)(K,{class:"box-item",effect:"dark",content:"余额变动关联的交易订单号/流水号",placement:"top"},{default:(0,t.k6)((()=>[(0,t.bF)(W,{size:16,color:"#b1b3b8"},{default:(0,t.k6)((()=>[(0,t.bF)((0,o.R1)(r.lOC))])),_:1})])),_:1})])),default:(0,t.k6)((({row:e})=>[(0,o.R1)(w.Jc).includes(e.tradeType)?((0,t.uX)(),(0,t.Wv)(I,{key:0,onClick:a=>k(e.cashOutNo),type:"primary"},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.cashOutNo),1)])),_:2},1032,["onClick"])):((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.eW)((0,n.v_)(e.cashOutNo),1)],64))])),_:1}),(0,t.bF)(V,{prop:"remark",label:"备注","min-width":"250"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(K,{class:"box-item",effect:"dark",content:e.remark,placement:"top"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",D,(0,n.v_)(e.remark),1)])),_:2},1032,["content"])])),_:1}),(0,t.bF)(V,{prop:"cashOutTypeName",label:"收支类型",width:"140"}),(0,t.bF)(V,{prop:"amount",label:"金额",width:"140"}),(0,t.bF)(V,{prop:"accountBalance",label:"余额",width:"140"})])),_:1},8,["data"]),(0,t.bF)(Y,{pageTotal:(0,o.R1)(E).pageTotal,pageSize:(0,o.R1)(E).pageSize,pageNumber:(0,o.R1)(E).pageNumber,onEmitPageSizeChange:(0,o.R1)(F),onEmitPageNumberChange:(0,o.R1)(_)},null,8,["pageTotal","pageSize","pageNumber","onEmitPageSizeChange","onEmitPageNumberChange"])])]),(0,t.bF)(v,{"alarm-balance":d.alarmBalance,"onUpdate:alarmBalance":a[4]||(a[4]=e=>d.alarmBalance=e),ref_key:"insufficientBalanceDialogRef",ref:p},null,8,["alarm-balance"]),(0,t.bF)(N,{"ensure-balance":d.ensureBalance,ref_key:"bondDetailsDrawerRef",ref:m},null,8,["ensure-balance"])],64)}}});const I=(0,g.A)(E,[["__scopeId","data-v-281a8555"]]);var P=I}}]);
//# sourceMappingURL=8405.7ba14ae4.js.map