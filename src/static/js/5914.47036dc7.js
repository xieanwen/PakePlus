"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[4559,5914],{9040:function(l,e,a){a.r(e),a.d(e,{default:function(){return w}});a(71954),a(20876),a(62597),a(50460),a(90435),a(3080),a(60234),a(59784),a(29296),a(47961),a(83238),a(84e3);var u=a(6254),v=a(38627),b=a(55533),n=a(85723),t=a(25598),i=a(59259),s=a(88365),r=a(10901),o=a(4710),c=a(35287),d=a(95239),p=a(64108),m=(a(95226),[{value:"110000",label:"北京市"},{value:"120000",label:"天津市"},{value:"130000",label:"河北省",children:[{value:"130100",label:"石家庄市"},{value:"130200",label:"唐山市"},{value:"130300",label:"秦皇岛市"},{value:"130400",label:"邯郸市"},{value:"130500",label:"邢台市"},{value:"130600",label:"保定市"},{value:"130700",label:"张家口市"},{value:"130800",label:"承德市"},{value:"130900",label:"沧州市"},{value:"131000",label:"廊坊市"},{value:"131100",label:"衡水市"}]},{value:"140000",label:"山西省",children:[{value:"140100",label:"太原市"},{value:"140200",label:"大同市"},{value:"140300",label:"阳泉市"},{value:"140400",label:"长治市"},{value:"140500",label:"晋城市"},{value:"140600",label:"朔州市"},{value:"140700",label:"晋中市"},{value:"140800",label:"运城市"},{value:"140900",label:"忻州市"},{value:"141000",label:"临汾市"},{value:"141100",label:"吕梁市"}]},{value:"150000",label:"内蒙古自治区",children:[{value:"150100",label:"呼和浩特市"},{value:"150200",label:"包头市"},{value:"150300",label:"乌海市"},{value:"150400",label:"赤峰市"},{value:"150500",label:"通辽市"},{value:"150600",label:"鄂尔多斯市"},{value:"150700",label:"呼伦贝尔市"},{value:"150800",label:"巴彦淖尔市"},{value:"150900",label:"乌兰察布市"},{value:"152200",label:"兴安盟"},{value:"152500",label:"锡林郭勒盟"},{value:"152900",label:"阿拉善盟"}]},{value:"210000",label:"辽宁省",children:[{value:"210100",label:"沈阳市"},{value:"210200",label:"大连市"},{value:"210300",label:"鞍山市"},{value:"210400",label:"抚顺市"},{value:"210500",label:"本溪市"},{value:"210600",label:"丹东市"},{value:"210700",label:"锦州市"},{value:"210800",label:"营口市"},{value:"210900",label:"阜新市"},{value:"211000",label:"辽阳市"},{value:"211100",label:"盘锦市"},{value:"211200",label:"铁岭市"},{value:"211300",label:"朝阳市"},{value:"211400",label:"葫芦岛市"}]},{value:"220000",label:"吉林省",children:[{value:"220100",label:"长春市"},{value:"220200",label:"吉林市"},{value:"220300",label:"四平市"},{value:"220400",label:"辽源市"},{value:"220500",label:"通化市"},{value:"220600",label:"白山市"},{value:"220700",label:"松原市"},{value:"220800",label:"白城市"},{value:"222400",label:"延边朝鲜族自治州"}]},{value:"230000",label:"黑龙江省",children:[{value:"230100",label:"哈尔滨市"},{value:"230200",label:"齐齐哈尔市"},{value:"230300",label:"鸡西市"},{value:"230400",label:"鹤岗市"},{value:"230500",label:"双鸭山市"},{value:"230600",label:"大庆市"},{value:"230700",label:"伊春市"},{value:"230800",label:"佳木斯市"},{value:"230900",label:"七台河市"},{value:"231000",label:"牡丹江市"},{value:"231100",label:"黑河市"},{value:"231200",label:"绥化市"},{value:"232700",label:"大兴安岭地区"}]},{value:"310000",label:"上海市"},{value:"320000",label:"江苏省",children:[{value:"320100",label:"南京市"},{value:"320200",label:"无锡市"},{value:"320300",label:"徐州市"},{value:"320400",label:"常州市"},{value:"320500",label:"苏州市"},{value:"320600",label:"南通市"},{value:"320700",label:"连云港市"},{value:"320800",label:"淮安市"},{value:"320900",label:"盐城市"},{value:"321000",label:"扬州市"},{value:"321100",label:"镇江市"},{value:"321200",label:"泰州市"},{value:"321300",label:"宿迁市"}]},{value:"330000",label:"浙江省",children:[{value:"330100",label:"杭州市"},{value:"330200",label:"宁波市"},{value:"330300",label:"温州市"},{value:"330400",label:"嘉兴市"},{value:"330500",label:"湖州市"},{value:"330600",label:"绍兴市"},{value:"330700",label:"金华市"},{value:"330800",label:"衢州市"},{value:"330900",label:"舟山市"},{value:"331000",label:"台州市"},{value:"331100",label:"丽水市"}]},{value:"340000",label:"安徽省",children:[{value:"340100",label:"合肥市"},{value:"340200",label:"芜湖市"},{value:"340300",label:"蚌埠市"},{value:"340400",label:"淮南市"},{value:"340500",label:"马鞍山市"},{value:"340600",label:"淮北市"},{value:"340700",label:"铜陵市"},{value:"340800",label:"安庆市"},{value:"341000",label:"黄山市"},{value:"341100",label:"滁州市"},{value:"341200",label:"阜阳市"},{value:"341300",label:"宿州市"},{value:"341500",label:"六安市"},{value:"341600",label:"亳州市"},{value:"341700",label:"池州市"},{value:"341800",label:"宣城市"}]},{value:"350000",label:"福建省",children:[{value:"350100",label:"福州市"},{value:"350200",label:"厦门市"},{value:"350300",label:"莆田市"},{value:"350400",label:"三明市"},{value:"350500",label:"泉州市"},{value:"350600",label:"漳州市"},{value:"350700",label:"南平市"},{value:"350800",label:"龙岩市"},{value:"350900",label:"宁德市"}]},{value:"360000",label:"江西省",children:[{value:"360100",label:"南昌市"},{value:"360200",label:"景德镇市"},{value:"360300",label:"萍乡市"},{value:"360400",label:"九江市"},{value:"360500",label:"新余市"},{value:"360600",label:"鹰潭市"},{value:"360700",label:"赣州市"},{value:"360800",label:"吉安市"},{value:"360900",label:"宜春市"},{value:"361000",label:"抚州市"},{value:"361100",label:"上饶市"}]},{value:"370000",label:"山东省",children:[{value:"370100",label:"济南市"},{value:"370200",label:"青岛市"},{value:"370300",label:"淄博市"},{value:"370400",label:"枣庄市"},{value:"370500",label:"东营市"},{value:"370600",label:"烟台市"},{value:"370700",label:"潍坊市"},{value:"370800",label:"济宁市"},{value:"370900",label:"泰安市"},{value:"371000",label:"威海市"},{value:"371100",label:"日照市"},{value:"371200",label:"莱芜市"},{value:"371300",label:"临沂市"},{value:"371400",label:"德州市"},{value:"371500",label:"聊城市"},{value:"371600",label:"滨州市"},{value:"371700",label:"菏泽市"}]},{value:"410000",label:"河南省",children:[{value:"410100",label:"郑州市"},{value:"410200",label:"开封市"},{value:"410300",label:"洛阳市"},{value:"410400",label:"平顶山市"},{value:"410500",label:"安阳市"},{value:"410600",label:"鹤壁市"},{value:"410700",label:"新乡市"},{value:"410800",label:"焦作市"},{value:"410900",label:"濮阳市"},{value:"411000",label:"许昌市"},{value:"411100",label:"漯河市"},{value:"411200",label:"三门峡市"},{value:"411300",label:"南阳市"},{value:"411400",label:"商丘市"},{value:"411500",label:"信阳市"},{value:"411600",label:"周口市"},{value:"411700",label:"驻马店市"},{value:"419000",label:"省直辖县级行政区划"}]},{value:"420000",label:"湖北省",children:[{value:"420100",label:"武汉市"},{value:"420200",label:"黄石市"},{value:"420300",label:"十堰市"},{value:"420500",label:"宜昌市"},{value:"420600",label:"襄阳市"},{value:"420700",label:"鄂州市"},{value:"420800",label:"荆门市"},{value:"420900",label:"孝感市"},{value:"421000",label:"荆州市"},{value:"421100",label:"黄冈市"},{value:"421200",label:"咸宁市"},{value:"421300",label:"随州市"},{value:"422800",label:"恩施土家族苗族自治州"},{value:"429000",label:"省直辖县级行政区划"}]},{value:"430000",label:"湖南省",children:[{value:"430100",label:"长沙市"},{value:"430200",label:"株洲市"},{value:"430300",label:"湘潭市"},{value:"430400",label:"衡阳市"},{value:"430500",label:"邵阳市"},{value:"430600",label:"岳阳市"},{value:"430700",label:"常德市"},{value:"430800",label:"张家界市"},{value:"430900",label:"益阳市"},{value:"431000",label:"郴州市"},{value:"431100",label:"永州市"},{value:"431200",label:"怀化市"},{value:"431300",label:"娄底市"},{value:"433100",label:"湘西土家族苗族自治州"}]},{value:"440000",label:"广东省",children:[{value:"440100",label:"广州市"},{value:"440200",label:"韶关市"},{value:"440300",label:"深圳市"},{value:"440400",label:"珠海市"},{value:"440500",label:"汕头市"},{value:"440600",label:"佛山市"},{value:"440700",label:"江门市"},{value:"440800",label:"湛江市"},{value:"440900",label:"茂名市"},{value:"441200",label:"肇庆市"},{value:"441300",label:"惠州市"},{value:"441400",label:"梅州市"},{value:"441500",label:"汕尾市"},{value:"441600",label:"河源市"},{value:"441700",label:"阳江市"},{value:"441800",label:"清远市"},{value:"441900",label:"东莞市"},{value:"442000",label:"中山市"},{value:"445100",label:"潮州市"},{value:"445200",label:"揭阳市"},{value:"445300",label:"云浮市"}]},{value:"450000",label:"广西壮族自治区",children:[{value:"450100",label:"南宁市"},{value:"450200",label:"柳州市"},{value:"450300",label:"桂林市"},{value:"450400",label:"梧州市"},{value:"450500",label:"北海市"},{value:"450600",label:"防城港市"},{value:"450700",label:"钦州市"},{value:"450800",label:"贵港市"},{value:"450900",label:"玉林市"},{value:"451000",label:"百色市"},{value:"451100",label:"贺州市"},{value:"451200",label:"河池市"},{value:"451300",label:"来宾市"},{value:"451400",label:"崇左市"}]},{value:"460000",label:"海南省",children:[{value:"460100",label:"海口市"},{value:"460200",label:"三亚市"},{value:"460300",label:"三沙市"},{value:"469000",label:"省直辖县级行政区划"}]},{value:"500000",label:"重庆市"},{value:"510000",label:"四川省",children:[{value:"510100",label:"成都市"},{value:"510300",label:"自贡市"},{value:"510400",label:"攀枝花市"},{value:"510500",label:"泸州市"},{value:"510600",label:"德阳市"},{value:"510700",label:"绵阳市"},{value:"510800",label:"广元市"},{value:"510900",label:"遂宁市"},{value:"511000",label:"内江市"},{value:"511100",label:"乐山市"},{value:"511300",label:"南充市"},{value:"511400",label:"眉山市"},{value:"511500",label:"宜宾市"},{value:"511600",label:"广安市"},{value:"511700",label:"达州市"},{value:"511800",label:"雅安市"},{value:"511900",label:"巴中市"},{value:"512000",label:"资阳市"},{value:"513200",label:"阿坝藏族羌族自治州"},{value:"513300",label:"甘孜藏族自治州"},{value:"513400",label:"凉山彝族自治州"}]},{value:"520000",label:"贵州省",children:[{value:"520100",label:"贵阳市"},{value:"520200",label:"六盘水市"},{value:"520300",label:"遵义市"},{value:"520400",label:"安顺市"},{value:"520500",label:"毕节市"},{value:"520600",label:"铜仁市"},{value:"522300",label:"黔西南布依族苗族自治州"},{value:"522600",label:"黔东南苗族侗族自治州"},{value:"522700",label:"黔南布依族苗族自治州"}]},{value:"530000",label:"云南省",children:[{value:"530100",label:"昆明市"},{value:"530300",label:"曲靖市"},{value:"530400",label:"玉溪市"},{value:"530500",label:"保山市"},{value:"530600",label:"昭通市"},{value:"530700",label:"丽江市"},{value:"530800",label:"普洱市"},{value:"530900",label:"临沧市"},{value:"532300",label:"楚雄彝族自治州"},{value:"532500",label:"红河哈尼族彝族自治州"},{value:"532600",label:"文山壮族苗族自治州"},{value:"532800",label:"西双版纳傣族自治州"},{value:"532900",label:"大理白族自治州"},{value:"533100",label:"德宏傣族景颇族自治州"},{value:"533300",label:"怒江傈僳族自治州"},{value:"533400",label:"迪庆藏族自治州"}]},{value:"540000",label:"西藏自治区",children:[{value:"540100",label:"拉萨市"},{value:"540200",label:"日喀则市"},{value:"542100",label:"昌都地区"},{value:"542200",label:"山南地区"},{value:"542400",label:"那曲地区"},{value:"542500",label:"阿里地区"},{value:"542600",label:"林芝地区"}]},{value:"610000",label:"陕西省",children:[{value:"610100",label:"西安市"},{value:"610200",label:"铜川市"},{value:"610300",label:"宝鸡市"},{value:"610400",label:"咸阳市"},{value:"610500",label:"渭南市"},{value:"610600",label:"延安市"},{value:"610700",label:"汉中市"},{value:"610800",label:"榆林市"},{value:"610900",label:"安康市"},{value:"611000",label:"商洛市"}]},{value:"620000",label:"甘肃省",children:[{value:"620100",label:"兰州市"},{value:"620200",label:"嘉峪关市"},{value:"620300",label:"金昌市"},{value:"620400",label:"白银市"},{value:"620500",label:"天水市"},{value:"620600",label:"武威市"},{value:"620700",label:"张掖市"},{value:"620800",label:"平凉市"},{value:"620900",label:"酒泉市"},{value:"621000",label:"庆阳市"},{value:"621100",label:"定西市"},{value:"621200",label:"陇南市"},{value:"622900",label:"临夏回族自治州"},{value:"623000",label:"甘南藏族自治州"}]},{value:"630000",label:"青海省",children:[{value:"630100",label:"西宁市"},{value:"630200",label:"海东市"},{value:"632200",label:"海北藏族自治州"},{value:"632300",label:"黄南藏族自治州"},{value:"632500",label:"海南藏族自治州"},{value:"632600",label:"果洛藏族自治州"},{value:"632700",label:"玉树藏族自治州"},{value:"632800",label:"海西蒙古族藏族自治州"}]},{value:"640000",label:"宁夏回族自治区",children:[{value:"640100",label:"银川市"},{value:"640200",label:"石嘴山市"},{value:"640300",label:"吴忠市"},{value:"640400",label:"固原市"},{value:"640500",label:"中卫市"}]},{value:"650000",label:"新疆维吾尔自治区",children:[{value:"650100",label:"乌鲁木齐市"},{value:"650200",label:"克拉玛依市"},{value:"652100",label:"吐鲁番地区"},{value:"652200",label:"哈密地区"},{value:"652300",label:"昌吉回族自治州"},{value:"652700",label:"博尔塔拉蒙古自治州"},{value:"652800",label:"巴音郭楞蒙古自治州"},{value:"652900",label:"阿克苏地区"},{value:"653000",label:"克孜勒苏柯尔克孜自治州"},{value:"653100",label:"喀什地区"},{value:"653200",label:"和田地区"},{value:"654000",label:"伊犁哈萨克自治州"},{value:"654200",label:"塔城地区"},{value:"654300",label:"阿勒泰地区"},{value:"659000",label:"自治区直辖县级行政区划"}]},{value:"710000",label:"台湾省"},{value:"810000",label:"香港特别行政区"},{value:"820000",label:"澳门特别行政区"}]),g=(0,u.pM)({__name:"index",props:{index:{default:0},area:{default:()=>[]}},emits:["emitFunc"],setup(l,{emit:e}){const a=l,v=(0,u.EW)((()=>i(a.area).map((l=>l.value)))),b=e,n=l=>{b("emitFunc",{areaCode:l,areaLabel:i(l).map((l=>l.label)),area:i(l),index:a.index})},i=l=>{if(!l||!l.length)return[];const e=[],a=l[0].slice(0,2),u=m.find((l=>l.value.startsWith(a)));if(e.push({label:u.label,value:u.value}),!u.children||!u.children.length)return e;const v=u.children.find((e=>e.value===l.at(-1)));return e.push({label:v.label,value:v.value}),e};return(l,e)=>{const a=(0,u.g2)("el-cascader");return(0,u.uX)(),(0,u.Wv)(a,{"model-value":v.value,options:(0,t.R1)(m),onChange:n},null,8,["model-value","options"])}}});const y=g;var h=y,f=a(51409),L=a(99821),C=a(83862),k=a(8610);const _={class:"product-detail"},E={class:"service-specs"},T={class:"purchased-info"},V={class:"word"},I={class:"number-count"},F={class:"operate"},N=["onClick"],W=["onClick"],A={class:"word"};var R=(0,u.pM)({__name:"number-ordering",props:{tagList:{default:()=>[]},productData:{},purchasedData:{default:()=>[]}},setup(l){const e=[{value:3,label:"3个月"},{value:6,label:"6个月"},{value:12,label:"12个月"},{value:-1,label:"自定义"}],a=[{value:5,label:"5个号码"},{value:10,label:"10个号码"},{value:15,label:"15个号码"},{value:-1,label:"自定义"}],m=(0,t.KR)(),{routeQuery:g}=(0,r.dG)(),{bd_userInfo:y}=s.DT.batchGetItem(["bd_userInfo"]),R=l,x=(0,t.KR)([]),B=(0,t.Kh)({list:R.tagList,label:R.tagList.map((l=>l.tagName))}),w=(0,t.Kh)({lineType:"",callType:"",numberType:"",cycleCount:3,customCycle:3,belongingList:[{id:`${Date.now()}`,value:"",label:"",count:5,customCount:1}],canBuyCount:0,isExistResources:!1}),X=(0,t.IJ)({price:"0.00",sumPrice:"0.00",unitPrice:"0.00",addedPrice:"0.00",hasAgentPrice:!1,subMarketList:[]}),D=(0,u.EW)((()=>(ll(),al(),R.productData))),M=(0,u.EW)((()=>D.value.serviceInfo)),S=(0,u.EW)((()=>{const l=D.value.addedServiceList??[],e="1"===g.value.businessType?l.filter((l=>"CALL_NUMBER_HB_MID"!==l.addedServiceCode)):l,a=e.reduce(((l,e)=>l.concat(e.specsList)),[]);return a.map((l=>({...l,groupCodeList:l.groupCodes.split(","),groupNameList:l.groupNames.split(","),groupValueList:l.groupValues.split(",")})))})),U=(0,u.EW)((()=>{const l=x.value.map((l=>`${l.lineType}`)),e=S.value.filter((e=>!l.length||l.includes(e.groupValueList[0]))),a=e.reduce(((l,e)=>{const a=l.find((l=>l.value===e.groupValues[0]));if(a)return l;{const a={label:e.groupNameList[0],value:e.groupValueList[0],disabled:!B.list.length};return[...l,a]}}),[]);return B.list.length?w.callType=a[0].value:w.callType="",a})),$=(0,u.EW)((()=>{const l=[w.callType||"2"].filter((l=>!!l)),e=S.value.filter((e=>e.groupValues.startsWith(l.toString()))),a=e.reduce(((l,e)=>{const a=l.find((l=>l.value===e.groupValueList[1]));if(a)return l;{const a={label:e.groupNameList[1],value:e.groupValueList[1],disabled:!w.callType};return[...l,a]}}),[]);return w.callType&&a.length?w.lineType=a[0].value:w.lineType="",a})),P=(0,u.EW)((()=>{const l=[w.callType||"2",w.lineType||"4"].filter((l=>!!l)),e="2"===w.callType?S.value.filter((e=>e.groupValues.startsWith(l.toString()))):[],a=x.value.find((l=>`${l.lineType}`===w.callType)),u=e.reduce(((l,e)=>{const{groupNameList:u=[],groupValueList:v=[]}=e,b=l.find((l=>l.value===v[2]));if(b)return l;{const e={label:u[2],value:v[2]};return"1"===v[2]?Reflect.set(e,"disabled",!w.lineType):Reflect.set(e,"disabled",!w.lineType||!(null!==a&&void 0!==a&&a.isSupportMixedNumber)),[...l,e]}}),[]);return w.lineType&&u.length?w.numberType=u[0].value:w.numberType="",u})),K=(0,u.EW)((()=>{const l=x.value.find((l=>l.lineType===Number(w.callType)))??{lineLabelName:"",isSupportMixedNumber:!0},e=l.lineLabelName?l.lineLabelName.split(","):[];return{list:e.map((l=>({label:l,value:l}))),label:e,isMixedNumber:l.isSupportMixedNumber}})),Q=(0,u.EW)((()=>{const l=[w.callType,w.lineType,w.numberType].filter((l=>!!l));return l.length?S.value.find((e=>e.groupValues.startsWith(l.toString()))):{}})),j=(0,u.EW)((()=>["2","3"].includes(w.callType)||["7"].includes(w.lineType))),G=(0,u.EW)((()=>{const l=["购买当日开始收取当月月租，号码发放完成不可退款；可在号码管理页面退订号码，退订号码不退月租费。","当月退订的号码不收取次月月租费，不使用的号码需要在结算日前退订，以免持续扣费。","账号欠费超过保留期后会自动退订号码资源，为避免欠费影响业务使用，请及时充值。"],{serviceCode:e=""}=Q.value;switch(e){case"CALL_NUMBER_VIR_SMALL":return{serviceCode:"CALL_NUMBER_VIR_SMALL",tip:"1个号码可以绑定1个坐席；",list:["小号线路坐席（A路）拨打被叫（B路），由数企提供的中间号直接呼叫B，被叫手机端显示为中间号来电。",...l]};case"CALL_NUMBER_VIR_LANDLINE":return{serviceCode:"CALL_NUMBER_VIR_LANDLINE",tip:"1个号码可以绑定1个坐席；",list:["小号线路坐席（A路）拨打被叫（B路），由数企提供的中间号直接呼叫B，被叫手机端显示为中间号来电。",...l]};case"CALL_NUMBER_HB_MID":return{serviceCode:"CALL_NUMBER_HB_MID",tip:"1个号码可以绑定3个坐席；",list:["回拨线路坐席（A路）拨打被叫（B路），由数企先呼叫A，等A接通后，再呼叫B，B接通后，AB双方建立通话。坐席手机端显示为中间号。被叫手机",...l]};default:return{serviceCode:"",tip:"",list:l}}})),O=(0,u.EW)((()=>{const l=w.belongingList.reduce(((l,e)=>{const a=-1===e.count?e.customCount:e.count;return l+a}),0);return B.label.length?j.value?l:w.canBuyCount:0})),H=(0,u.EW)((()=>{const l=R.purchasedData.find((l=>{var e;return l.resourceCode==(null===(e=Q.value)||void 0===e?void 0:e.serviceCode)}));if(w.isExistResources&&l){const e=l.endTime,a=dayjs(e).year(),u=dayjs(e).month(),v=dayjs(e).date(),b=dayjs().year(),n=dayjs().month(),t=dayjs().date();return 12*(a-b)+(u-n)+(v-t>0?1:0)}return 0})),J=(0,u.EW)((()=>{const l=-1===w.cycleCount?w.customCycle:w.cycleCount,e=H.value;return w.isExistResources?e:l})),q=(0,u.EW)((()=>`合计：${X.value.unitPrice}元/月 x 周期${J.value}个月 x 订购数${O.value}个号码 = ${X.value.sumPrice}元`)),z=(0,u.EW)((()=>!(w.isExistResources&&"1"===w.lineType)));async function Y(){const l=B.list.map((l=>({id:l.id,pid:l.pid,name:l.tagName||l.name})));m.value.trigger(!0,l)}async function Z({list:l=[],label:e=[]}){B.list=l,B.label=e,await ll()}async function ll(){const{data:l}=await c.G1.getData(B.list.map((l=>l.id)).toString());x.value=c.G1.handleData(l)}function el(l,e){w[l]=e}async function al(){const{data:l}=await d.HO.getData({companyId:g.value.companyId,numberType:"1",seatNumber:""});w.canBuyCount=l}async function ul(){var l;const{data:e}=await d.vf.getData({companyId:g.value.companyId,resourceCode:null===(l=Q.value)||void 0===l?void 0:l.serviceCode});w.isExistResources=e}async function vl(l){const{index:e,areaLabel:a,areaCode:u}=l;w.belongingList[e].label=a.toString().toString().replace(/,/g,"-"),w.belongingList[e].value=u.toString()}const bl=l=>{if(w.belongingList.length>=5)return i.nk.error("最多可选择5个");w.belongingList.splice(l+1,0,{id:`${Date.now()}`,value:"",label:"",count:5,customCount:1}),il()},nl=l=>{w.belongingList.splice(l,1),il()};function tl(){var l;const e=B.list.map((l=>({id:l.id,name:l.name}))),a=w.belongingList.reduce(((l,e)=>{const a=-1===e.count?e.customCount:e.count;return l+`号码归属地：${e.label}x${a}个；`}),""),u=w.belongingList.map((l=>{const e=-1===l.count?l.customCount:l.count;return{districtCode:l.value,districtName:l.label,number:e}})),{coding:v="",serviceCode:b="",groupCodeList:n=[],groupNameList:t=[],groupValueList:i=[]}=Q.value,s={helpOrder:1,agentId:y.profileId,companyId:g.value.companyId,profileId:g.value.profileId,buyType:w.isExistResources?"UPGRADE":"BUY_SERVER",businessTagsInfo:JSON.stringify(e),shopBuyList:[{agentId:y.profileId,dateType:"2",dateValue:J.value,marketCode:g.value.serviceCode,userNumber:O.value,paramStr:j.value?JSON.stringify(u):"",coding:[{code:b,coding:v,num:O.value}],baseCodeList:n.map(((l,e)=>({baseCode:l,number:i[e]})))}],sumPrice:X.value.sumPrice},r={list:[{...M.value,price:X.value.price,specsInfo:`拨打方式：${t[0]}；线路类型：${t[1]}；号码类型：${t[2]}；号码月租：${X.value.unitPrice}元/月；月租周期：${J.value}个月；号码数量：${O.value}个；${j.value?a:""}`,augmentedServiceList:null===(l=X.value)||void 0===l?void 0:l.subMarketList.map((l=>("1"===l.calculateType&&(l.specsInfo=`${J.value}个月`),l)))}],sumPrice:X.value.sumPrice};return{params:s,commodityInfo:r}}async function il(){const l=tl().params;X.value=await(0,o.AV)(l)}function sl(){if(!B.list||!B.list.length)return void i.nk.warning("请选择业务场景!");if(!j.value)return void(0,o.$d)(tl());const l=w.belongingList.filter((l=>!l.label||!l.value)),e=new Set(w.belongingList.map((l=>l.value)));l.length?i.nk.error("请选择号码归属地"):e.size===w.belongingList.length?(0,o.$d)(tl()):i.nk.error("号码归属地不能重复")}return(0,u.wB)((()=>Q.value),(async l=>{l&&Object.keys(l).length&&l.serviceCode&&(await ul(),await il())}),{deep:!0}),(l,t)=>{const i=(0,u.g2)("el-form-item"),s=(0,u.g2)("el-input"),r=(0,u.g2)("el-tooltip"),o=(0,u.g2)("el-option"),c=(0,u.g2)("el-select"),d=(0,u.g2)("el-input-number"),g=(0,u.g2)("el-form");return(0,u.uX)(),(0,u.CE)(u.FK,null,[(0,u.Lk)("div",_,[(0,u.bF)(p.A,{serviceData:M.value},null,8,["serviceData"]),(0,u.Lk)("div",E,[(0,u.bF)(g,{"label-width":"160px"},{default:(0,u.k6)((()=>[l.purchasedData.length?((0,u.uX)(!0),(0,u.CE)(u.FK,{key:0},(0,u.pI)(l.purchasedData,((l,e)=>((0,u.uX)(),(0,u.Wv)(i,{key:e,label:"已购详情"},{default:(0,u.k6)((()=>[(0,u.Lk)("div",T,[(0,u.Lk)("span",null,"拨打方式："+(0,v.v_)(l.groupNameList[0]),1),(0,u.Lk)("span",null,"线路类型："+(0,v.v_)(l.groupNameList[1]),1),(0,u.Lk)("span",null,"号码月租："+(0,v.v_)(l.groupNameList[2]),1),(0,u.Lk)("span",null,"月租周期："+(0,v.v_)(l.serviceMonthCycle)+"个月",1),(0,u.Lk)("span",null,"已购号码数："+(0,v.v_)(l.owned)+"个",1),(0,u.Lk)("span",null,"服务到期时间："+(0,v.v_)(l.endTime),1)])])),_:2},1024)))),128)):(0,u.Q3)("",!0),(0,u.bF)(i,{label:"业务场景"},{default:(0,u.k6)((()=>[(0,u.bF)(s,{readonly:"",modelValue:B.label,"onUpdate:modelValue":t[0]||(t[0]=l=>B.label=l),onClick:Y},null,8,["modelValue"])])),_:1}),(0,u.bF)(i,{label:"拨打方式"},{default:(0,u.k6)((()=>[(0,u.bF)(f.A,{list:U.value,"model-value":w.callType,minWidth:"95px","onUpdate:modelValue":t[1]||(t[1]=l=>el("callType",l))},null,8,["list","model-value"])])),_:1}),K.value.label.length?((0,u.uX)(),(0,u.Wv)(i,{key:1,label:"适用业务场景"},{default:(0,u.k6)((()=>[(0,u.bF)(C["default"],{list:K.value.list,"model-value":K.value.label,direction:"row"},null,8,["list","model-value"])])),_:1})):(0,u.Q3)("",!0),(0,u.bF)(i,{label:"线路类型"},{default:(0,u.k6)((()=>[(0,u.bF)(f.A,{list:$.value,"model-value":w.lineType,minWidth:"95px","onUpdate:modelValue":t[2]||(t[2]=l=>el("lineType",l))},null,8,["list","model-value"])])),_:1}),P.value.length?((0,u.uX)(),(0,u.Wv)(i,{key:2,label:"号码类型"},{default:(0,u.k6)((()=>[(0,u.bF)(f.A,{minWidth:"95px",tooltip:{1:"该号码的归属地为您选购的指定地区",2:"该号码为混显号码，外显号与归属地为系统随机分配"},list:P.value,"model-value":w.numberType,"onUpdate:modelValue":t[3]||(t[3]=l=>el("numberType",l))},null,8,["list","model-value"])])),_:1})):(0,u.Q3)("",!0),Q.value?((0,u.uX)(),(0,u.Wv)(i,{key:3,label:"号码月租"},{default:(0,u.k6)((()=>[(0,u.Lk)("p",V,[(0,u.eW)((0,v.v_)(X.value.unitPrice)+"元/月 ",1),G.value.tip?((0,u.uX)(),(0,u.Wv)(r,{key:0,placement:"top-start",trigger:"hover","popper-class":"custom-tooltip",content:G.value.tip},{default:(0,u.k6)((()=>t[7]||(t[7]=[(0,u.Lk)("img",{class:"question-icon",src:n,alt:""},null,-1)]))),_:1},8,["content"])):(0,u.Q3)("",!0)])])),_:1})):(0,u.Q3)("",!0),(0,u.bF)(i,{label:"合作周期"},{default:(0,u.k6)((()=>[w.isExistResources?((0,u.uX)(),(0,u.Wv)(s,{key:1,value:H.value+"个月",readonly:""},null,8,["value"])):((0,u.uX)(),(0,u.CE)(u.FK,{key:0},[(0,u.bF)(c,{modelValue:w.cycleCount,"onUpdate:modelValue":t[4]||(t[4]=l=>w.cycleCount=l),onChange:il,disabled:!B.label.length},{default:(0,u.k6)((()=>[((0,u.uX)(),(0,u.CE)(u.FK,null,(0,u.pI)(e,(l=>(0,u.bF)(o,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue","disabled"]),-1===w.cycleCount?((0,u.uX)(),(0,u.Wv)(d,{key:0,modelValue:w.customCycle,"onUpdate:modelValue":t[5]||(t[5]=l=>w.customCycle=l),onChange:il,min:1,max:180,step:1,"value-on-clear":1},null,8,["modelValue"])):(0,u.Q3)("",!0)],64))])),_:1}),B.label.length?((0,u.uX)(),(0,u.CE)(u.FK,{key:4},[j.value?((0,u.uX)(),(0,u.Wv)(i,{key:0,label:"号码归属地"},{default:(0,u.k6)((()=>[(0,u.bF)(b.F,{name:"list",tag:"ul"},{default:(0,u.k6)((()=>[((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(w.belongingList,((l,e)=>((0,u.uX)(),(0,u.CE)("li",{class:"belonging-item",key:l.id},[(0,u.bF)(h,{index:e,onEmitFunc:vl},null,8,["index"]),(0,u.Lk)("div",I,[t[8]||(t[8]=(0,u.Lk)("span",{class:"word"},"订购数",-1)),(0,u.bF)(c,{modelValue:l.count,"onUpdate:modelValue":e=>l.count=e,onChange:il},{default:(0,u.k6)((()=>[((0,u.uX)(),(0,u.CE)(u.FK,null,(0,u.pI)(a,(l=>(0,u.bF)(o,{label:l.label,value:l.value,key:l.value},null,8,["label","value"]))),64))])),_:2},1032,["modelValue","onUpdate:modelValue"]),-1===l.count?((0,u.uX)(),(0,u.Wv)(d,{key:0,modelValue:l.customCount,"onUpdate:modelValue":e=>l.customCount=e,min:1,precision:0,onChange:il},null,8,["modelValue","onUpdate:modelValue"])):(0,u.Q3)("",!0)]),(0,u.Lk)("div",F,[(0,u.Lk)("span",{onClick:l=>bl(e),class:"increase"},null,8,N),0!==e?((0,u.uX)(),(0,u.CE)("span",{key:0,onClick:l=>nl(e),class:"decrease"},null,8,W)):(0,u.Q3)("",!0)])])))),128))])),_:1})])),_:1})):((0,u.uX)(),(0,u.Wv)(i,{key:1,label:"订购数"},{default:(0,u.k6)((()=>[(0,u.bF)(s,{modelValue:O.value,"onUpdate:modelValue":t[6]||(t[6]=l=>O.value=l),readonly:""},null,8,["modelValue"])])),_:1}))],64)):(0,u.Q3)("",!0),(0,u.bF)(i,{class:"message-form-item"},{default:(0,u.k6)((()=>[(0,u.Lk)("p",A,(0,v.v_)(q.value),1),((0,u.uX)(!0),(0,u.CE)(u.FK,null,(0,u.pI)(G.value.list,((l,e)=>((0,u.uX)(),(0,u.CE)("p",{class:"word",key:e},(0,v.v_)(e+1)+"、"+(0,v.v_)(l),1)))),128))])),_:1})])),_:1}),(0,u.bF)(k.A,{onEmitFunc:sl,buyPrice:X.value.sumPrice,canBuy:z.value,hasAgentPrice:X.value.hasAgentPrice},null,8,["buyPrice","canBuy","hasAgentPrice"])])]),(0,u.bF)(L.A,{ref_key:"scenariosRef",ref:m,onEmitFunc:Z},null,512)],64)}}}),x=a(83936);const B=(0,x.A)(R,[["__scopeId","data-v-38b684c6"]]);var w=B}}]);
//# sourceMappingURL=5914.47036dc7.js.map