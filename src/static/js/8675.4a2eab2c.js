"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[8675],{38675:function(e,a,l){l.r(a),l.d(a,{default:function(){return F}});var t=l(6254),d=l(25598),r=l(88365),n=l(10901),i=l(6934),o=l(59259),p=l(1683),u=l(616),s=l(63148);const c={class:"parameter-setting"},m={class:"inline-form-items"},b={class:"inline-form-items-input"},f={class:"query-input"},g={class:"btn-container"};var k=(0,t.pM)({__name:"parameter-setting",setup(e){const{routeQuery:a}=(0,n.dG)(),k=r.DT.getItem("bd_userInfo"),I=r.DT.getItem("bd_agentId"),y=(0,d.KR)(),F=(0,d.KR)(),V=(0,d.Kh)({appId:"",appsecret:"",token:"",seat:"",corpId:"",id:"",addSeatVisible:!1,list:[],createdTime:"",userId:"",isEditing:!1,info:"",seatId:"",userName:"",userAccount:""}),_=(0,t.$V)((()=>l.e(37).then(l.bind(l,40037)))),h=(0,t.$V)((()=>l.e(5266).then(l.bind(l,25266)))),v={corpId:[{required:!0,message:"请输入CorpID",trigger:"blur"}],appId:[{required:!0,message:"请输入APPID",trigger:"blur"}],appsecret:[{required:!0,message:"请输入APPSECRET",trigger:"blur"}],token:[{required:!0,message:"请输入TOKEN",trigger:"blur"}]};function C(e,a){V.info=a,V.isEditing=!("edit"!==e||!a),V.addSeatVisible=!0}function w(e){i.s.confirm("您确定要删除该用户吗?",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((async()=>{const a={id:e.id,agentId:I},{statusCode:l,msg:t}=await s.Tr.getData(a);if(l)return o.nk.warning(t||"删除失败");o.nk.success(t||"删除成功"),await T()}))}async function x(){y.value.trigger(!0,{data:{companyId:a.value.companyId,profileId:k.profileId,userName:k.realName},limit:1,autoUpload:!1,accept:".xls,.xlsx",actionUrl:`${u.fe.agentSystem}/company-ec/seat/import`,templateUrl:()=>(0,p.PE)({api:`${u.fe.agentSystem}/company-ec/download/template`})})}const E=()=>{F.value&&F.value.validate((async e=>{if(e){const e={agentId:I,code:a.value.code,companyId:a.value.companyId,ecAppid:V.appId,ecAppsecret:V.appsecret,ecCorpid:V.corpId,ecToken:V.token,id:V.id},{statusCode:l}=await s.x6.getData(e);0===l?((0,o.nk)({type:"success",message:"保存成功"}),await T()):(0,o.nk)({type:"warning",message:"保存失败"})}else console.log("error submit!")}))};async function T(){const e={companyId:a.value.companyId,userId:V.seatId,userName:V.userName,mobile:V.userAccount},{data:l}=await s.fJ.getData(e),{info:t,userList:d}=s.fJ.handleData(l);V.corpId=t.ecCorpid,V.appId=t.ecAppid,V.appsecret=t.ecAppsecret,V.token=t.ecToken,V.id=t.id,V.createdTime=t.createdTime,V.list=d}return T(),(e,a)=>{const l=(0,t.g2)("el-input"),r=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-button"),i=(0,t.g2)("el-table-column"),o=(0,t.g2)("el-link"),p=(0,t.g2)("TableEmpty"),u=(0,t.g2)("el-table"),s=(0,t.g2)("el-form");return(0,t.uX)(),(0,t.CE)("div",c,[(0,t.bF)(s,{class:"parameter-form","label-position":"top",ref_key:"formRef",ref:F,rules:v,model:V},{default:(0,t.k6)((()=>[(0,t.bF)(r,{label:"CorpID",prop:"corpId",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:V.corpId,"onUpdate:modelValue":a[0]||(a[0]=e=>V.corpId=e),placeholder:"请输入",maxlength:"255",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.Lk)("div",m,[(0,t.bF)(r,{label:"APPID",prop:"appId",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:V.appId,"onUpdate:modelValue":a[1]||(a[1]=e=>V.appId=e),placeholder:"请输入",maxlength:"255",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:"APPSECRET",prop:"appsecret",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:V.appsecret,"onUpdate:modelValue":a[2]||(a[2]=e=>V.appsecret=e),placeholder:"请输入",maxlength:"255",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:"TOKEN",prop:"token",required:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:V.token,"onUpdate:modelValue":a[3]||(a[3]=e=>V.token=e),placeholder:"请输入",maxlength:"255",clearable:""},null,8,["modelValue"])])),_:1})]),(0,t.bF)(r,{label:"坐席设置",required:"",class:"seat-setting-container"},{default:(0,t.k6)((()=>a[9]||(a[9]=[(0,t.Lk)("p",null," （每添加一个坐席，将按照配置的套餐规则进行扣费，服务周期中新增坐席将按整月收取坐席费用，坐席实时生效。） ",-1)]))),_:1}),(0,t.Lk)("div",b,[(0,t.Lk)("div",f,[(0,t.bF)(r,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:V.seatId,"onUpdate:modelValue":a[4]||(a[4]=e=>V.seatId=e),placeholder:"请输入用户ID",style:{width:"200px"},clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:V.userName,"onUpdate:modelValue":a[5]||(a[5]=e=>V.userName=e),placeholder:"请输入用户名称",style:{width:"200px"},clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(r,{label:""},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:V.userAccount,"onUpdate:modelValue":a[6]||(a[6]=e=>V.userAccount=e),placeholder:"请输入用户账号",style:{width:"200px"},clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{type:"primary",onClick:T},{default:(0,t.k6)((()=>a[10]||(a[10]=[(0,t.eW)("查询")]))),_:1})]),(0,t.Lk)("div",g,[(0,t.bF)(n,{type:"primary",class:"add-btn",onClick:a[7]||(a[7]=e=>C("add",""))},{default:(0,t.k6)((()=>a[11]||(a[11]=[(0,t.eW)("新增坐席")]))),_:1}),(0,t.bF)(n,{type:"primary",onClick:x},{default:(0,t.k6)((()=>a[12]||(a[12]=[(0,t.eW)("坐席批量导入")]))),_:1})])]),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{data:V.list,border:"","max-height":"450",style:{width:"100%"}},{empty:(0,t.k6)((()=>[(0,t.bF)(p,{"empty-text":"暂无坐席"})])),default:(0,t.k6)((()=>[(0,t.bF)(i,{prop:"userId",label:"用户ID",align:"center"}),(0,t.bF)(i,{prop:"userName",label:"用户名称",align:"center"}),(0,t.bF)(i,{prop:"mobile",label:"用户账号",align:"center"}),(0,t.bF)(i,{align:"center",label:"操作"},{default:(0,t.k6)((({row:e})=>[(0,t.bF)(o,{type:"primary",underline:!1,onClick:a=>C("edit",e)},{default:(0,t.k6)((()=>a[13]||(a[13]=[(0,t.eW)("编辑")]))),_:2},1032,["onClick"]),(0,t.bF)(o,{type:"primary",underline:!1,onClick:a=>w(e)},{default:(0,t.k6)((()=>a[14]||(a[14]=[(0,t.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,t.bF)(r,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,{style:{"margin-top":"30px"},type:"primary",onClick:E},{default:(0,t.k6)((()=>a[15]||(a[15]=[(0,t.eW)("保存")]))),_:1})])),_:1})])),_:1},8,["model"]),(0,t.bF)((0,d.R1)(_),{ref_key:"importFileRef",ref:y,onEmitFunc:T},null,512),(0,t.bF)((0,d.R1)(h),{visible:V.addSeatVisible,"onUpdate:visible":a[8]||(a[8]=e=>V.addSeatVisible=e),info:V.info,isEditing:V.isEditing,onEmitFunc:T},null,8,["visible","info","isEditing"])])}}}),I=l(83936);const y=(0,I.A)(k,[["__scopeId","data-v-24597bb2"]]);var F=y}}]);
//# sourceMappingURL=8675.4a2eab2c.js.map