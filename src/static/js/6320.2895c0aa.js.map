{"version":3,"file":"static/js/6320.2895c0aa.js","mappings":"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","sources":["webpack://daili/./src/components/order-management/create-order/product-detail/cloud-call-package.vue?1933","webpack://daili/./src/components/order-management/create-order/product-detail/cloud-call-package.vue","webpack://daili/./src/components/order-management/create-order/product-detail/cloud-call-package.vue?47a1"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode } from \"vue\"\nimport _imports_0 from '@/assets/images/icon-question.png'\n\n\nconst _hoisted_1 = { class: \"product-detail\" }\nconst _hoisted_2 = { class: \"service-specs\" }\nconst _hoisted_3 = { class: \"word\" }\nconst _hoisted_4 = { class: \"word\" }\nconst _hoisted_5 = { class: \"word\" }\n\nimport { ref, onMounted, computed, shallowRef, reactive } from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport {\r\n  createdOrder,\r\n  handlePrice,\r\n} from \"@components/order-management/create-order/product-detail/common\";\r\n\r\nimport BaseServiceInfo from \"./base-service-info.vue\";\r\nimport CustomRadioButtonGroup from \"@/components/common/custom-radio-button-group.vue\";\r\nimport BusinessScenariosDialog from \"@/components/common/business-scenarios-dialog.vue\";\r\nimport BaseSumPrice from \"@components/order-management/create-order/product-detail/base-sum-price.vue\";\r\n\r\nconst addedServiceCode = \"CALL_PACKAGE_ADDED_NEW2_CHARGE\";\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'cloud-call-package',\n  props: {\n    tagList: {},\n    productData: {},\n    purchasedData: {}\n  },\n  setup(__props: any) {\n\r\nconst scenariosRef = ref();\r\nconst { routeQuery } = useVueRouter();\r\nconst { bd_userInfo: userInfo } = LocalStorage.batchGetItem([\"bd_userInfo\"]);\r\nconst props = __props;\r\n// 所有信息\r\nconst productInfo: Record<string, any> = computed(() => {\r\n  return props.productData;\r\n});\r\n// 服务基本信息\r\nconst serviceInfo: Record<string, any> = computed(() => {\r\n  return productInfo.value.serviceInfo;\r\n});\r\n// 增值服务信息\r\nconst addedServiceInfo: Record<string, any> = computed(() => {\r\n  const addedServiceList = productInfo.value?.addedServiceList ?? [];\r\n  return addedServiceList.find(\r\n    (item) => item.addedServiceCode === addedServiceCode\r\n  );\r\n});\r\n// 增值服务数据\r\nconst addedSpecInfo: Record<string, any> = computed(() => {\r\n  // 最小数量\r\n  let minNum = 0;\r\n  // 最大数量\r\n  let maxNum = 0;\r\n  // 递增量\r\n  const increaseNum = addedServiceInfo.value.minNum;\r\n  const list = addedServiceInfo.value?.specsList.map((item, index) => {\r\n    if (index === 0) {\r\n      minNum = item.minNum;\r\n      maxNum = item.maxNum;\r\n    }\r\n    minNum > item.minNum && (minNum = item.minNum);\r\n    maxNum < item.maxNum && (minNum = item.maxNum);\r\n    const groupNameList = item.groupNames.split(\",\");\r\n    const groupCodeList = item.groupCodes.split(\",\");\r\n    const groupValueList = item.groupValues.split(\",\");\r\n    return {\r\n      ...item,\r\n      groupNameList,\r\n      groupValueList,\r\n      groupCodeList,\r\n    };\r\n  });\r\n  return {\r\n    list,\r\n    minNum,\r\n    maxNum,\r\n    increaseNum,\r\n  };\r\n});\r\nconsole.log(addedSpecInfo.value);\r\n// 坐席数量\r\nconst seatCount = computed(() => {\r\n  return formData.seatCount === -1\r\n    ? formData.customSeatCount\r\n    : formData.seatCount;\r\n});\r\n// 总分钟数\r\nconst totalMinuteCount = computed(() => {\r\n  const minuteCount = parseFloat(formData.giftMinute);\r\n  return minuteCount * seatCount.value;\r\n});\r\n// 总计描述\r\nconst sumDescribe = computed(() => {\r\n  return `合计： (坐席单价${formData.seatPrice}元/坐席/月 + 系统软件费${formData.callSoft}元/坐席/月） x ${formData.cycle}个月 x ${seatCount.value}个坐席 + 附赠产品${agentInfo.value.addedPrice}元 =\r\n            ${agentInfo.value.sumPrice}元`;\r\n});\r\n// 分钟数描述\r\nconst minuteDescribe = computed(() => {\r\n  return [\r\n    parseFloat(formData.giftMinute) >= 5000\r\n      ? \"不限制分钟数 （不限制分钟数，分钟数可共享）\"\r\n      : `${formData.giftMinute}分钟/坐席/月 （总计${totalMinuteCount.value}分钟/月，分钟数可共享）`,\r\n    parseFloat(formData.giftMinute) >= 5000\r\n      ? \"不限制分钟数\"\r\n      : `${formData.giftMinute}分钟/坐席/月`,\r\n  ];\r\n});\r\nconst listData = reactive<{\r\n  [propName: string]: Record<string, any>[];\r\n}>({\r\n  minCharge: [],\r\n  seatPrice: [],\r\n  callSoft: [],\r\n  giftMinute: [],\r\n});\r\nconst formData = reactive({\r\n  scenariosLabel: props.tagList.map((item) => item.tagName),\r\n  scenariosList: props.tagList,\r\n  minCharge: \"\",\r\n  seatPrice: \"\",\r\n  callSoft: \"\",\r\n  giftMinute: \"\",\r\n  cycle: 1,\r\n  customCycle: 1,\r\n  seatCount: addedSpecInfo.value.minNum,\r\n  customSeatCount: addedSpecInfo.value.minNum,\r\n  effectiveTime: \"\",\r\n  specInfo: {},\r\n  isOvertake: false,\r\n});\r\n// 购买的商品价格信息\r\nconst agentInfo = shallowRef({\r\n  price: \"0.00\",\r\n  sumPrice: \"0.00\",\r\n  unitPrice: \"0.00\",\r\n  addedPrice: \"0.00\",\r\n  hasAgentPrice: false,\r\n  subMarketList: [],\r\n});\r\nconst cycleList = [\r\n  { label: \"1个月\", value: 1 },\r\n  { label: \"3个月\", value: 3 },\r\n  { label: \"6个月\", value: 6 },\r\n  { label: \"12个月\", value: 12 },\r\n  { label: \"自定义\", value: -1 },\r\n];\r\nconst seatList = [addedSpecInfo.value.minNum, 30, 50, 100]\r\n  .concat(addedServiceInfo.value.isDiy ? [-1] : [])\r\n  .map((item) => {\r\n    return {\r\n      value: item,\r\n      label: item === -1 ? \"自定义\" : `${item}个`,\r\n    };\r\n  });\r\n\r\nasync function init() {\r\n  await getMinCharge();\r\n}\r\n\r\nasync function getMinCharge(value?: string) {\r\n  if (!value) {\r\n    listData.minCharge = handleSpecs(\"minCharge\", 0);\r\n    formData.minCharge = listData.minCharge[0].value;\r\n  } else {\r\n    formData.minCharge = value;\r\n  }\r\n  await getSeatPrice();\r\n}\r\n\r\nasync function getSeatPrice(value?: string) {\r\n  if (!value) {\r\n    listData.seatPrice = handleSpecs(\"seatPrice\", 1);\r\n    formData.seatPrice = listData.seatPrice[0].value;\r\n  } else {\r\n    formData.seatPrice = value;\r\n  }\r\n  await getCallSoft();\r\n}\r\n\r\nasync function getCallSoft(value?: string) {\r\n  if (!value) {\r\n    listData.callSoft = handleSpecs(\"callSoft\", 2);\r\n    formData.callSoft = listData.callSoft[0].value;\r\n  } else {\r\n    formData.callSoft = value;\r\n  }\r\n  await getGiftMinute();\r\n}\r\n\r\nasync function getGiftMinute(value?: string) {\r\n  if (!value) {\r\n    listData.giftMinute = handleSpecs(\"giftMinute\", 3);\r\n    formData.giftMinute = listData.giftMinute[0].value;\r\n  } else {\r\n    formData.giftMinute = value;\r\n  }\r\n  formData.specInfo =\r\n    addedSpecInfo.value.list.find((item) =>\r\n      item.groupValues.startsWith(\r\n        `${formData.minCharge},${formData.seatPrice},${formData.callSoft},${formData.giftMinute}`\r\n      )\r\n    ) ?? {};\r\n  await getPrice();\r\n}\r\n\r\nfunction handleSpecs(\r\n  type: \"minCharge\" | \"seatPrice\" | \"callSoft\" | \"giftMinute\",\r\n  specsIndex: number\r\n) {\r\n  const list: Record<string, any>[] = [];\r\n  const specsList = addedSpecInfo.value.list;\r\n  let filterList: Record<string, any>[] = [];\r\n  switch (type) {\r\n    case \"minCharge\":\r\n      filterList = addedSpecInfo.value.list;\r\n      break;\r\n    case \"seatPrice\":\r\n      filterList = specsList.filter((item) =>\r\n        item.groupValues.startsWith(formData.minCharge)\r\n      );\r\n      break;\r\n    case \"callSoft\":\r\n      filterList = specsList.filter((item) =>\r\n        item.groupValues.startsWith(\r\n          `${formData.minCharge},${formData.seatPrice}`\r\n        )\r\n      );\r\n      break;\r\n    case \"giftMinute\":\r\n      filterList = specsList.filter((item) =>\r\n        item.groupValues.startsWith(\r\n          `${formData.minCharge},${formData.seatPrice},${formData.callSoft}`\r\n        )\r\n      );\r\n      break;\r\n  }\r\n  filterList.forEach((item) => {\r\n    const groupNameList = item.groupNameList;\r\n    const groupValueList = item.groupValueList;\r\n    const info = list.find((sonItem: Record<string, any>) => {\r\n      return sonItem.value === item.groupValueList[specsIndex];\r\n    });\r\n    !info &&\r\n      list.push({\r\n        value: groupValueList[specsIndex],\r\n        label: `${groupNameList[specsIndex]}${\r\n          type === \"seatPrice\" ? \"/坐席/月\" : \"\"\r\n        }`,\r\n      });\r\n  });\r\n  return list.sort((a, b) => {\r\n    return a.value - b.value;\r\n  });\r\n}\r\n\r\n// 打开业务场景弹框\r\nfunction openScenarios() {\r\n  const list = formData.scenariosList.map((item) => {\r\n    return {\r\n      id: item.id,\r\n      pid: item.pid,\r\n      name: item.tagName || item.name,\r\n    };\r\n  });\r\n  scenariosRef.value.trigger(true, list);\r\n}\r\n\r\n// 获取业务标签\r\nfunction updateScenarios(data) {\r\n  const { list = [], label = [] } = data;\r\n  formData.scenariosList = list;\r\n  formData.scenariosLabel = label;\r\n}\r\n\r\n// 获取价格参数\r\nfunction handleParams() {\r\n  const tagList = formData.scenariosList.map((item) => {\r\n    return {\r\n      id: item.id,\r\n      name: item.name,\r\n    };\r\n  });\r\n  const params = {\r\n    helpOrder: 1,\r\n    agentId: userInfo.profileId,\r\n    companyId: routeQuery.value.companyId, // 代理商子公司id\r\n    profileId: routeQuery.value.profileId, // 代理商子公司操作人id\r\n    buyType: \"BUY_SERVER\",\r\n    businessTagsInfo: JSON.stringify(tagList),\r\n    shopBuyList: [\r\n      {\r\n        agentId: userInfo.profileId,\r\n        dateType: \"2\", // 时间单位 1:日, 2:月, 3:年\r\n        dateValue: formData.cycle, // 时长\r\n        marketCode: routeQuery.value.serviceCode,\r\n        userNumber: seatCount.value,\r\n        coding: [\r\n          {\r\n            code: formData.specInfo?.serviceCode,\r\n            coding: formData.specInfo?.coding,\r\n            num: seatCount.value,\r\n          },\r\n        ],\r\n        baseCodeList: formData.specInfo?.groupCodeList.map((item, index) => {\r\n          return {\r\n            baseCode: item,\r\n            number: formData.specInfo?.groupValueList[index],\r\n          };\r\n        }),\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n  const commodityInfo = {\r\n    list: [\r\n      {\r\n        ...serviceInfo.value,\r\n        price: agentInfo.value.price,\r\n        specsInfo: `坐席数量：${seatCount.value}个坐席；合作周期：${formData.cycle}个月；最低消费：${formData.minCharge}元起；坐席单价：${formData.seatPrice}元/坐席/月；系统软件费：${formData.callSoft}元/坐席/月；含分钟数：${minuteDescribe.value[1]}`,\r\n        augmentedServiceList: agentInfo.value?.subMarketList.map(\r\n          (item: Record<string, any>) => {\r\n            if (item.calculateType === \"1\") {\r\n              item.specsInfo = `${formData.cycle}个月`;\r\n            }\r\n            return item;\r\n          }\r\n        ),\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n  return {\r\n    params,\r\n    commodityInfo,\r\n  };\r\n}\r\n\r\n// 计算价格\r\nasync function getPrice() {\r\n  const params = handleParams().params;\r\n  agentInfo.value = await handlePrice(params);\r\n  formData.isOvertake = false;\r\n  // formData.isOvertake =\r\n  //   parseFloat(formData.minCharge) > parseFloat(agentInfo.value.sumPrice);\r\n}\r\n\r\n// 购买\r\nfunction handleBuy() {\r\n  if (!formData.scenariosList || !formData.scenariosList.length) {\r\n    ElMessage.warning(\"请选择业务场景!\");\r\n    return;\r\n  }\r\n  createdOrder(handleParams());\r\n}\r\n\r\nonMounted(() => {\r\n  init();\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_input_number = _resolveComponent(\"el-input-number\")!\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\")!\n  const _component_el_tooltip = _resolveComponent(\"el-tooltip\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(BaseServiceInfo, { serviceData: serviceInfo.value }, null, 8, [\"serviceData\"]),\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_el_form, { \"label-width\": \"160px\" }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, { label: \"业务场景\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  readonly: \"\",\n                  modelValue: formData.scenariosLabel,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((formData.scenariosLabel) = $event)),\n                  onClick: openScenarios\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"最低消费\" }, {\n              default: _withCtx(() => [\n                _createVNode(CustomRadioButtonGroup, {\n                  list: listData.minCharge,\n                  \"model-value\": formData.minCharge,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (getMinCharge($event))),\n                  minWidth: \"95px\"\n                }, null, 8, [\"list\", \"model-value\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"坐席单价\" }, {\n              default: _withCtx(() => [\n                _createVNode(CustomRadioButtonGroup, {\n                  list: listData.seatPrice,\n                  \"model-value\": formData.seatPrice,\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => (getSeatPrice($event))),\n                  minWidth: \"95px\"\n                }, null, 8, [\"list\", \"model-value\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"系统软件费\" }, {\n              default: _withCtx(() => [\n                _createVNode(CustomRadioButtonGroup, {\n                  list: listData.callSoft,\n                  \"model-value\": formData.callSoft,\n                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => (getSeatPrice($event))),\n                  minWidth: \"95px\"\n                }, null, 8, [\"list\", \"model-value\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"合作周期\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_select, {\n                  modelValue: formData.cycle,\n                  \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((formData.cycle) = $event)),\n                  onChange: getPrice\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(cycleList, (item) => {\n                      return _createVNode(_component_el_option, {\n                        key: item.value,\n                        label: item.label,\n                        value: item.value\n                      }, null, 8, [\"label\", \"value\"])\n                    }), 64))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"]),\n                (formData.cycle === -1)\n                  ? (_openBlock(), _createBlock(_component_el_input_number, {\n                      key: 0,\n                      modelValue: formData.customCycle,\n                      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((formData.customCycle) = $event)),\n                      onChange: getPrice,\n                      min: 1,\n                      max: 180,\n                      step: 1,\n                      \"value-on-clear\": 1\n                    }, null, 8, [\"modelValue\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"坐席数量\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_select, {\n                  modelValue: formData.seatCount,\n                  \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((formData.seatCount) = $event)),\n                  onChange: getPrice\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(seatList), (item) => {\n                      return (_openBlock(), _createBlock(_component_el_option, {\n                        key: item.value,\n                        label: item.label,\n                        value: item.value\n                      }, null, 8, [\"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"]),\n                (formData.seatCount === -1)\n                  ? (_openBlock(), _createBlock(_component_el_input_number, {\n                      key: 0,\n                      modelValue: formData.customSeatCount,\n                      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((formData.customSeatCount) = $event)),\n                      onChange: getPrice,\n                      min: addedSpecInfo.value.minNum,\n                      max: addedSpecInfo.value.maxNum,\n                      step: addedSpecInfo.value.increaseNum,\n                      \"value-on-clear\": 1\n                    }, null, 8, [\"modelValue\", \"min\", \"max\", \"step\"]))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"服务生效时间\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_date_picker, {\n                  modelValue: formData.effectiveTime,\n                  \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((formData.effectiveTime) = $event)),\n                  type: \"date\",\n                  clearable: \"\",\n                  placeholder: \"选择日期\",\n                  format: \"YYYY-MM-DD\",\n                  \"value-format\": \"YYYY-MM-DD\",\n                  \"disabled-date\": (time) => {\r\n            return time.getTime() < Date.now() || time.getTime() > Date.now() + 3600 * 1000 * 24 * 5\r\n          }\n                }, null, 8, [\"modelValue\", \"disabled-date\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"含分钟数\" }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"p\", _hoisted_3, [\n                  _createTextVNode(_toDisplayString(minuteDescribe.value[0]) + \" \", 1),\n                  (parseFloat(formData.giftMinute) < 5000)\n                    ? (_openBlock(), _createBlock(_component_el_tooltip, {\n                        key: 0,\n                        placement: \"top-start\",\n                        trigger: \"hover\",\n                        \"popper-class\": \"custom-tooltip\",\n                        content: \"当分钟数超出后，会根据使用的资源不同，定价不相同。\"\n                      }, {\n                        default: _withCtx(() => _cache[9] || (_cache[9] = [\n                          _createElementVNode(\"img\", {\n                            class: \"question-icon\",\n                            src: _imports_0,\n                            alt: \"\"\n                          }, null, -1)\n                        ])),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _createElementVNode(\"p\", _hoisted_4, _toDisplayString(sumDescribe.value), 1),\n                _createElementVNode(\"p\", _hoisted_5, \" 注意：金额需要超过最低消费金额\" + _toDisplayString(formData.minCharge) + \"元，才可购买或加购 \", 1)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }),\n        _createVNode(BaseSumPrice, {\n          onEmitFunc: handleBuy,\n          isOvertake: formData.isOvertake,\n          buyPrice: agentInfo.value.sumPrice,\n          canBuy: productInfo.value?.canBuy,\n          hasAgentPrice: agentInfo.value.hasAgentPrice\n        }, null, 8, [\"isOvertake\", \"buyPrice\", \"canBuy\", \"hasAgentPrice\"])\n      ])\n    ]),\n    _createVNode(BusinessScenariosDialog, {\n      ref_key: \"scenariosRef\",\n      ref: scenariosRef,\n      onEmitFunc: updateScenarios\n    }, null, 512)\n  ], 64))\n}\n}\n\n})","<template>\r\n  <div class=\"product-detail\">\r\n    <BaseServiceInfo :serviceData=\"serviceInfo\"></BaseServiceInfo>\r\n    <div class=\"service-specs\">\r\n      <el-form label-width=\"160px\">\r\n        <el-form-item label=\"业务场景\">\r\n          <el-input\r\n            readonly\r\n            v-model=\"formData.scenariosLabel\"\r\n            @click=\"openScenarios\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"最低消费\">\r\n          <CustomRadioButtonGroup\r\n            :list=\"listData.minCharge\"\r\n            :model-value=\"formData.minCharge\"\r\n            @update:modelValue=\"getMinCharge($event)\"\r\n            minWidth=\"95px\"\r\n          ></CustomRadioButtonGroup>\r\n        </el-form-item>\r\n        <el-form-item label=\"坐席单价\">\r\n          <CustomRadioButtonGroup\r\n            :list=\"listData.seatPrice\"\r\n            :model-value=\"formData.seatPrice\"\r\n            @update:modelValue=\"getSeatPrice($event)\"\r\n            minWidth=\"95px\"\r\n          ></CustomRadioButtonGroup>\r\n        </el-form-item>\r\n        <el-form-item label=\"系统软件费\">\r\n          <CustomRadioButtonGroup\r\n            :list=\"listData.callSoft\"\r\n            :model-value=\"formData.callSoft\"\r\n            @update:modelValue=\"getSeatPrice($event)\"\r\n            minWidth=\"95px\"\r\n          ></CustomRadioButtonGroup>\r\n        </el-form-item>\r\n        <el-form-item label=\"合作周期\">\r\n          <el-select v-model=\"formData.cycle\" @change=\"getPrice\">\r\n            <el-option\r\n              v-for=\"item in cycleList\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n          <el-input-number\r\n            v-if=\"formData.cycle === -1\"\r\n            v-model=\"formData.customCycle\"\r\n            @change=\"getPrice\"\r\n            :min=\"1\"\r\n            :max=\"180\"\r\n            :step=\"1\"\r\n            :value-on-clear=\"1\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"坐席数量\">\r\n          <el-select v-model=\"formData.seatCount\" @change=\"getPrice\">\r\n            <el-option\r\n              v-for=\"item in seatList\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n          <el-input-number\r\n            v-if=\"formData.seatCount === -1\"\r\n            v-model=\"formData.customSeatCount\"\r\n            @change=\"getPrice\"\r\n            :min=\"addedSpecInfo.minNum\"\r\n            :max=\"addedSpecInfo.maxNum\"\r\n            :step=\"addedSpecInfo.increaseNum\"\r\n            :value-on-clear=\"1\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"服务生效时间\">\r\n          <!-- 服务生效时间只能选择今天之后5天 -->\r\n          <el-date-picker\r\n            v-model=\"formData.effectiveTime\"\r\n            type=\"date\"\r\n            clearable\r\n            placeholder=\"选择日期\"\r\n            format=\"YYYY-MM-DD\"\r\n            value-format=\"YYYY-MM-DD\"\r\n            :disabled-date=\"(time: Date) => {\r\n            return time.getTime() < Date.now() || time.getTime() > Date.now() + 3600 * 1000 * 24 * 5\r\n          }\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"含分钟数\">\r\n          <p class=\"word\">\r\n            {{ minuteDescribe[0] }}\r\n            <el-tooltip\r\n              v-if=\"parseFloat(formData.giftMinute) < 5000\"\r\n              placement=\"top-start\"\r\n              trigger=\"hover\"\r\n              popper-class=\"custom-tooltip\"\r\n              content=\"当分钟数超出后，会根据使用的资源不同，定价不相同。\"\r\n            >\r\n              <img\r\n                class=\"question-icon\"\r\n                src=\"@/assets/images/icon-question.png\"\r\n                alt=\"\"\r\n              />\r\n            </el-tooltip>\r\n          </p>\r\n          <p class=\"word\">{{ sumDescribe }}</p>\r\n          <p class=\"word\">\r\n            注意：金额需要超过最低消费金额{{\r\n              formData.minCharge\r\n            }}元，才可购买或加购\r\n          </p>\r\n        </el-form-item>\r\n      </el-form>\r\n      <BaseSumPrice\r\n        @emitFunc=\"handleBuy\"\r\n        :isOvertake=\"formData.isOvertake\"\r\n        :buyPrice=\"agentInfo.sumPrice\"\r\n        :canBuy=\"productInfo?.canBuy\"\r\n        :hasAgentPrice=\"agentInfo.hasAgentPrice\"\r\n      ></BaseSumPrice>\r\n    </div>\r\n  </div>\r\n  <BusinessScenariosDialog\r\n    ref=\"scenariosRef\"\r\n    @emitFunc=\"updateScenarios\"\r\n  ></BusinessScenariosDialog>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, onMounted, computed, shallowRef, reactive } from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\n\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport {\r\n  createdOrder,\r\n  handlePrice,\r\n} from \"@components/order-management/create-order/product-detail/common\";\r\n\r\nimport BaseServiceInfo from \"./base-service-info.vue\";\r\nimport CustomRadioButtonGroup from \"@/components/common/custom-radio-button-group.vue\";\r\nimport BusinessScenariosDialog from \"@/components/common/business-scenarios-dialog.vue\";\r\nimport BaseSumPrice from \"@components/order-management/create-order/product-detail/base-sum-price.vue\";\r\n\r\nconst scenariosRef = ref();\r\nconst { routeQuery } = useVueRouter();\r\nconst addedServiceCode = \"CALL_PACKAGE_ADDED_NEW2_CHARGE\";\r\nconst { bd_userInfo: userInfo } = LocalStorage.batchGetItem([\"bd_userInfo\"]);\r\nconst props = defineProps<{\r\n  tagList: Record<string, any>[];\r\n  productData: Record<string, any>;\r\n  purchasedData: Record<string, any>[];\r\n}>();\r\n// 所有信息\r\nconst productInfo: Record<string, any> = computed(() => {\r\n  return props.productData;\r\n});\r\n// 服务基本信息\r\nconst serviceInfo: Record<string, any> = computed(() => {\r\n  return productInfo.value.serviceInfo;\r\n});\r\n// 增值服务信息\r\nconst addedServiceInfo: Record<string, any> = computed(() => {\r\n  const addedServiceList = productInfo.value?.addedServiceList ?? [];\r\n  return addedServiceList.find(\r\n    (item) => item.addedServiceCode === addedServiceCode\r\n  );\r\n});\r\n// 增值服务数据\r\nconst addedSpecInfo: Record<string, any> = computed(() => {\r\n  // 最小数量\r\n  let minNum = 0;\r\n  // 最大数量\r\n  let maxNum = 0;\r\n  // 递增量\r\n  const increaseNum = addedServiceInfo.value.minNum;\r\n  const list = addedServiceInfo.value?.specsList.map((item, index) => {\r\n    if (index === 0) {\r\n      minNum = item.minNum;\r\n      maxNum = item.maxNum;\r\n    }\r\n    minNum > item.minNum && (minNum = item.minNum);\r\n    maxNum < item.maxNum && (minNum = item.maxNum);\r\n    const groupNameList = item.groupNames.split(\",\");\r\n    const groupCodeList = item.groupCodes.split(\",\");\r\n    const groupValueList = item.groupValues.split(\",\");\r\n    return {\r\n      ...item,\r\n      groupNameList,\r\n      groupValueList,\r\n      groupCodeList,\r\n    };\r\n  });\r\n  return {\r\n    list,\r\n    minNum,\r\n    maxNum,\r\n    increaseNum,\r\n  };\r\n});\r\nconsole.log(addedSpecInfo.value);\r\n// 坐席数量\r\nconst seatCount = computed(() => {\r\n  return formData.seatCount === -1\r\n    ? formData.customSeatCount\r\n    : formData.seatCount;\r\n});\r\n// 总分钟数\r\nconst totalMinuteCount = computed(() => {\r\n  const minuteCount = parseFloat(formData.giftMinute);\r\n  return minuteCount * seatCount.value;\r\n});\r\n// 总计描述\r\nconst sumDescribe = computed(() => {\r\n  return `合计： (坐席单价${formData.seatPrice}元/坐席/月 + 系统软件费${formData.callSoft}元/坐席/月） x ${formData.cycle}个月 x ${seatCount.value}个坐席 + 附赠产品${agentInfo.value.addedPrice}元 =\r\n            ${agentInfo.value.sumPrice}元`;\r\n});\r\n// 分钟数描述\r\nconst minuteDescribe = computed(() => {\r\n  return [\r\n    parseFloat(formData.giftMinute) >= 5000\r\n      ? \"不限制分钟数 （不限制分钟数，分钟数可共享）\"\r\n      : `${formData.giftMinute}分钟/坐席/月 （总计${totalMinuteCount.value}分钟/月，分钟数可共享）`,\r\n    parseFloat(formData.giftMinute) >= 5000\r\n      ? \"不限制分钟数\"\r\n      : `${formData.giftMinute}分钟/坐席/月`,\r\n  ];\r\n});\r\nconst listData = reactive<{\r\n  [propName: string]: Record<string, any>[];\r\n}>({\r\n  minCharge: [],\r\n  seatPrice: [],\r\n  callSoft: [],\r\n  giftMinute: [],\r\n});\r\nconst formData = reactive({\r\n  scenariosLabel: props.tagList.map((item) => item.tagName),\r\n  scenariosList: props.tagList,\r\n  minCharge: \"\",\r\n  seatPrice: \"\",\r\n  callSoft: \"\",\r\n  giftMinute: \"\",\r\n  cycle: 1,\r\n  customCycle: 1,\r\n  seatCount: addedSpecInfo.value.minNum,\r\n  customSeatCount: addedSpecInfo.value.minNum,\r\n  effectiveTime: \"\",\r\n  specInfo: {},\r\n  isOvertake: false,\r\n});\r\n// 购买的商品价格信息\r\nconst agentInfo = shallowRef({\r\n  price: \"0.00\",\r\n  sumPrice: \"0.00\",\r\n  unitPrice: \"0.00\",\r\n  addedPrice: \"0.00\",\r\n  hasAgentPrice: false,\r\n  subMarketList: [],\r\n});\r\nconst cycleList = [\r\n  { label: \"1个月\", value: 1 },\r\n  { label: \"3个月\", value: 3 },\r\n  { label: \"6个月\", value: 6 },\r\n  { label: \"12个月\", value: 12 },\r\n  { label: \"自定义\", value: -1 },\r\n];\r\nconst seatList = [addedSpecInfo.value.minNum, 30, 50, 100]\r\n  .concat(addedServiceInfo.value.isDiy ? [-1] : [])\r\n  .map((item) => {\r\n    return {\r\n      value: item,\r\n      label: item === -1 ? \"自定义\" : `${item}个`,\r\n    };\r\n  });\r\n\r\nasync function init() {\r\n  await getMinCharge();\r\n}\r\n\r\nasync function getMinCharge(value?: string) {\r\n  if (!value) {\r\n    listData.minCharge = handleSpecs(\"minCharge\", 0);\r\n    formData.minCharge = listData.minCharge[0].value;\r\n  } else {\r\n    formData.minCharge = value;\r\n  }\r\n  await getSeatPrice();\r\n}\r\n\r\nasync function getSeatPrice(value?: string) {\r\n  if (!value) {\r\n    listData.seatPrice = handleSpecs(\"seatPrice\", 1);\r\n    formData.seatPrice = listData.seatPrice[0].value;\r\n  } else {\r\n    formData.seatPrice = value;\r\n  }\r\n  await getCallSoft();\r\n}\r\n\r\nasync function getCallSoft(value?: string) {\r\n  if (!value) {\r\n    listData.callSoft = handleSpecs(\"callSoft\", 2);\r\n    formData.callSoft = listData.callSoft[0].value;\r\n  } else {\r\n    formData.callSoft = value;\r\n  }\r\n  await getGiftMinute();\r\n}\r\n\r\nasync function getGiftMinute(value?: string) {\r\n  if (!value) {\r\n    listData.giftMinute = handleSpecs(\"giftMinute\", 3);\r\n    formData.giftMinute = listData.giftMinute[0].value;\r\n  } else {\r\n    formData.giftMinute = value;\r\n  }\r\n  formData.specInfo =\r\n    addedSpecInfo.value.list.find((item) =>\r\n      item.groupValues.startsWith(\r\n        `${formData.minCharge},${formData.seatPrice},${formData.callSoft},${formData.giftMinute}`\r\n      )\r\n    ) ?? {};\r\n  await getPrice();\r\n}\r\n\r\nfunction handleSpecs(\r\n  type: \"minCharge\" | \"seatPrice\" | \"callSoft\" | \"giftMinute\",\r\n  specsIndex: number\r\n) {\r\n  const list: Record<string, any>[] = [];\r\n  const specsList = addedSpecInfo.value.list;\r\n  let filterList: Record<string, any>[] = [];\r\n  switch (type) {\r\n    case \"minCharge\":\r\n      filterList = addedSpecInfo.value.list;\r\n      break;\r\n    case \"seatPrice\":\r\n      filterList = specsList.filter((item) =>\r\n        item.groupValues.startsWith(formData.minCharge)\r\n      );\r\n      break;\r\n    case \"callSoft\":\r\n      filterList = specsList.filter((item) =>\r\n        item.groupValues.startsWith(\r\n          `${formData.minCharge},${formData.seatPrice}`\r\n        )\r\n      );\r\n      break;\r\n    case \"giftMinute\":\r\n      filterList = specsList.filter((item) =>\r\n        item.groupValues.startsWith(\r\n          `${formData.minCharge},${formData.seatPrice},${formData.callSoft}`\r\n        )\r\n      );\r\n      break;\r\n  }\r\n  filterList.forEach((item) => {\r\n    const groupNameList = item.groupNameList;\r\n    const groupValueList = item.groupValueList;\r\n    const info = list.find((sonItem: Record<string, any>) => {\r\n      return sonItem.value === item.groupValueList[specsIndex];\r\n    });\r\n    !info &&\r\n      list.push({\r\n        value: groupValueList[specsIndex],\r\n        label: `${groupNameList[specsIndex]}${\r\n          type === \"seatPrice\" ? \"/坐席/月\" : \"\"\r\n        }`,\r\n      });\r\n  });\r\n  return list.sort((a, b) => {\r\n    return a.value - b.value;\r\n  });\r\n}\r\n\r\n// 打开业务场景弹框\r\nfunction openScenarios() {\r\n  const list = formData.scenariosList.map((item) => {\r\n    return {\r\n      id: item.id,\r\n      pid: item.pid,\r\n      name: item.tagName || item.name,\r\n    };\r\n  });\r\n  scenariosRef.value.trigger(true, list);\r\n}\r\n\r\n// 获取业务标签\r\nfunction updateScenarios(data) {\r\n  const { list = [], label = [] } = data;\r\n  formData.scenariosList = list;\r\n  formData.scenariosLabel = label;\r\n}\r\n\r\n// 获取价格参数\r\nfunction handleParams() {\r\n  const tagList = formData.scenariosList.map((item) => {\r\n    return {\r\n      id: item.id,\r\n      name: item.name,\r\n    };\r\n  });\r\n  const params = {\r\n    helpOrder: 1,\r\n    agentId: userInfo.profileId,\r\n    companyId: routeQuery.value.companyId, // 代理商子公司id\r\n    profileId: routeQuery.value.profileId, // 代理商子公司操作人id\r\n    buyType: \"BUY_SERVER\",\r\n    businessTagsInfo: JSON.stringify(tagList),\r\n    shopBuyList: [\r\n      {\r\n        agentId: userInfo.profileId,\r\n        dateType: \"2\", // 时间单位 1:日, 2:月, 3:年\r\n        dateValue: formData.cycle, // 时长\r\n        marketCode: routeQuery.value.serviceCode,\r\n        userNumber: seatCount.value,\r\n        coding: [\r\n          {\r\n            code: formData.specInfo?.serviceCode,\r\n            coding: formData.specInfo?.coding,\r\n            num: seatCount.value,\r\n          },\r\n        ],\r\n        baseCodeList: formData.specInfo?.groupCodeList.map((item, index) => {\r\n          return {\r\n            baseCode: item,\r\n            number: formData.specInfo?.groupValueList[index],\r\n          };\r\n        }),\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n  const commodityInfo = {\r\n    list: [\r\n      {\r\n        ...serviceInfo.value,\r\n        price: agentInfo.value.price,\r\n        specsInfo: `坐席数量：${seatCount.value}个坐席；合作周期：${formData.cycle}个月；最低消费：${formData.minCharge}元起；坐席单价：${formData.seatPrice}元/坐席/月；系统软件费：${formData.callSoft}元/坐席/月；含分钟数：${minuteDescribe.value[1]}`,\r\n        augmentedServiceList: agentInfo.value?.subMarketList.map(\r\n          (item: Record<string, any>) => {\r\n            if (item.calculateType === \"1\") {\r\n              item.specsInfo = `${formData.cycle}个月`;\r\n            }\r\n            return item;\r\n          }\r\n        ),\r\n      },\r\n    ],\r\n    sumPrice: agentInfo.value.sumPrice,\r\n  };\r\n  return {\r\n    params,\r\n    commodityInfo,\r\n  };\r\n}\r\n\r\n// 计算价格\r\nasync function getPrice() {\r\n  const params = handleParams().params;\r\n  agentInfo.value = await handlePrice(params);\r\n  formData.isOvertake = false;\r\n  // formData.isOvertake =\r\n  //   parseFloat(formData.minCharge) > parseFloat(agentInfo.value.sumPrice);\r\n}\r\n\r\n// 购买\r\nfunction handleBuy() {\r\n  if (!formData.scenariosList || !formData.scenariosList.length) {\r\n    ElMessage.warning(\"请选择业务场景!\");\r\n    return;\r\n  }\r\n  createdOrder(handleParams());\r\n}\r\n\r\nonMounted(() => {\r\n  init();\r\n});\r\n</script>\r\n<style scoped lang=\"scss\">\r\n@use \"./common.scss\" as *;\r\n</style>\r\n","import script from \"./cloud-call-package.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./cloud-call-package.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./cloud-call-package.vue?vue&type=style&index=0&id=0df34958&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0df34958\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","addedServiceCode","_defineComponent","__name","props","tagList","productData","purchasedData","setup","__props","scenariosRef","ref","routeQuery","useVueRouter","bd_userInfo","userInfo","LocalStorage","batchGetItem","productInfo","computed","serviceInfo","value","addedServiceInfo","_productInfo$value","addedServiceList","find","item","addedSpecInfo","_addedServiceInfo$val","minNum","maxNum","increaseNum","list","specsList","map","index","groupNameList","groupNames","split","groupCodeList","groupCodes","groupValueList","groupValues","console","log","seatCount","formData","customSeatCount","totalMinuteCount","minuteCount","parseFloat","giftMinute","sumDescribe","seatPrice","callSoft","cycle","agentInfo","addedPrice","sumPrice","minuteDescribe","listData","reactive","minCharge","scenariosLabel","tagName","scenariosList","customCycle","effectiveTime","specInfo","isOvertake","shallowRef","price","unitPrice","hasAgentPrice","subMarketList","cycleList","label","seatList","concat","isDiy","async","init","getMinCharge","handleSpecs","getSeatPrice","getCallSoft","getGiftMinute","startsWith","getPrice","type","specsIndex","filterList","filter","forEach","info","sonItem","push","sort","a","b","openScenarios","id","pid","name","trigger","updateScenarios","data","handleParams","_formData$specInfo","_formData$specInfo2","_formData$specInfo3","_agentInfo$value","params","helpOrder","agentId","profileId","companyId","buyType","businessTagsInfo","JSON","stringify","shopBuyList","dateType","dateValue","marketCode","serviceCode","userNumber","coding","code","num","baseCodeList","_formData$specInfo4","baseCode","number","commodityInfo","specsInfo","augmentedServiceList","calculateType","handlePrice","handleBuy","length","createdOrder","ElMessage","warning","onMounted","_ctx","_cache","_productInfo$value2","_component_el_input","_resolveComponent","_component_el_form_item","_component_el_option","_component_el_select","_component_el_input_number","_component_el_date_picker","_component_el_tooltip","_component_el_form","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","BaseServiceInfo","serviceData","default","_withCtx","readonly","modelValue","$event","onClick","_","CustomRadioButtonGroup","minWidth","onChange","_renderList","key","_createBlock","min","max","step","_createCommentVNode","_unref","clearable","placeholder","format","time","getTime","Date","now","_createTextVNode","_toDisplayString","placement","content","src","_imports_0","alt","BaseSumPrice","onEmitFunc","buyPrice","canBuy","BusinessScenariosDialog","ref_key","__exports__"],"sourceRoot":""}