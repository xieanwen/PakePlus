{"version":3,"file":"static/js/584.8a9ab8a8.js","mappings":"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","sources":["webpack://daili/./src/assets/echartsOptions.ts","webpack://daili/./src/api/home-api.ts","webpack://daili/./src/views/home/index.vue?a3d1","webpack://daili/./src/views/home/index.vue","webpack://daili/./src/views/home/index.vue?45b5"],"sourcesContent":["/**\r\n * 首页统计图表配置\r\n * */\r\nexport const proportionOption = function (list: Array<any>) {\r\n  return {\r\n    tooltip: {\r\n      trigger: \"item\",\r\n    },\r\n    title: {\r\n      text: \"返佣金额走势\",\r\n      subtext: \"单位：元\",\r\n      textStyle: {\r\n        fontSize: 14,\r\n        color: \"#242934\",\r\n      },\r\n      subtextStyle: {\r\n        fontSize: 13,\r\n        color: \"#9CA6B9\",\r\n        align: \"right\",\r\n      },\r\n    },\r\n    xAxis: [\r\n      {\r\n        type: \"category\",\r\n        data: [\r\n          \"1月\",\r\n          \"2月\",\r\n          \"3月\",\r\n          \"4月\",\r\n          \"5月\",\r\n          \"6月\",\r\n          \"7月\",\r\n          \"8月\",\r\n          \"9月\",\r\n          \"10月\",\r\n          \"11月\",\r\n          \"12月\",\r\n        ],\r\n        axisTick: {\r\n          alignWithLabel: true,\r\n        },\r\n      },\r\n    ],\r\n    yAxis: [\r\n      {\r\n        type: \"value\",\r\n      },\r\n    ],\r\n    series: [\r\n      {\r\n        name: \"Direct\",\r\n        type: \"bar\",\r\n        barWidth: \"50%\",\r\n        itemStyle: {\r\n          color: \"#2ED4A9\",\r\n        },\r\n        data: list,\r\n      },\r\n    ],\r\n  };\r\n};\r\n/**\r\n * 首页统计图表配置\r\n * */\r\nexport const trendOption = function (list: Array<any>) {\r\n  return {\r\n    tooltip: {\r\n      trigger: \"item\",\r\n    },\r\n    title: {\r\n      text: \"各类型返佣占比\",\r\n      textStyle: {\r\n        fontSize: 14,\r\n        color: \"#242934\",\r\n      },\r\n      subtextStyle: {\r\n        fontSize: 13,\r\n        color: \"#9CA6B9\",\r\n        align: \"right\",\r\n      },\r\n    },\r\n    legend: {\r\n      orient: \"vertical\",\r\n      right: \"right\",\r\n      top: \"middle\",\r\n      itemWidth: 15,\r\n      itemHeight: 15,\r\n    },\r\n    series: [\r\n      {\r\n        type: \"pie\",\r\n        color: [\"#0056FF\", \"#2ED4A9\", \"#FF7125\", \"#FFC420\"],\r\n        radius: [\"55%\", \"80%\"],\r\n        avoidLabelOverlap: false,\r\n        label: {\r\n          show: false,\r\n          position: \"center\",\r\n        },\r\n        labelLine: {\r\n          show: false,\r\n        },\r\n        left: -50,\r\n        emphasis: {\r\n          label: {\r\n            show: true,\r\n            fontSize: \"14\",\r\n            color: \"#000000\",\r\n            fontWeight: \"bold\",\r\n            formatter: \"{b}\\n{c}\",\r\n          },\r\n        },\r\n        data: list,\r\n      },\r\n    ],\r\n  };\r\n};\r\n","import http from \"@assets/http\";\r\nimport { serviceName } from \"@assets/common\";\r\n\r\nexport const accountStatisticApi = {\r\n  getData: () => {\r\n    return http.post(`${serviceName.agentSystem}/statistic/statisticByHome`);\r\n  },\r\n  handleData: (data) => {\r\n    return {\r\n      agentNum: data?.agentNum, // 代理商数量\r\n      orderNum: data?.orderNum, // 订单数量\r\n      withdrawAble: data?.withdrawable, // 可提现金额\r\n      interfaceNum: data?.interfaceNum, // 接口客户数\r\n      qfbAmount: data?.qfbAmount, // 账户余额\r\n      accountBalance: data?.accountBalance, // 剩余佣金\r\n    };\r\n  },\r\n};\r\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, unref as _unref, withCtx as _withCtx, createVNode as _createVNode, vShow as _vShow, withDirectives as _withDirectives } from \"vue\"\n\nconst _hoisted_1 = { class: \"home main-container\" }\nconst _hoisted_2 = { class: \"account-container\" }\nconst _hoisted_3 = { class: \"word\" }\nconst _hoisted_4 = { class: \"count\" }\nconst _hoisted_5 = { key: 0 }\nconst _hoisted_6 = { key: 1 }\nconst _hoisted_7 = { key: 2 }\nconst _hoisted_8 = { key: 3 }\nconst _hoisted_9 = { class: \"consume-container\" }\nconst _hoisted_10 = { class: \"consume-info\" }\nconst _hoisted_11 = { class: \"left-box\" }\nconst _hoisted_12 = { class: \"date\" }\nconst _hoisted_13 = { class: \"right-box\" }\nconst _hoisted_14 = {\n  key: 0,\n  class: \"consume-info\"\n}\nconst _hoisted_15 = { class: \"left-box\" }\nconst _hoisted_16 = { class: \"date\" }\nconst _hoisted_17 = { class: \"right-box\" }\nconst _hoisted_18 = { class: \"data-analysis\" }\nconst _hoisted_19 = {\n  key: 0,\n  class: \"data-message\"\n}\nconst _hoisted_20 = { class: \"item\" }\nconst _hoisted_21 = { class: \"item\" }\nconst _hoisted_22 = { class: \"item\" }\nconst _hoisted_23 = { class: \"item\" }\nconst _hoisted_24 = { class: \"item\" }\nconst _hoisted_25 = { class: \"item\" }\nconst _hoisted_26 = { class: \"item button\" }\n\nimport { reactive, onMounted, onBeforeUnmount, ref } from \"vue\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { initEcharts } from \"@assets/instanceCollection\";\r\nimport { trendOption, proportionOption } from \"@/assets/echartsOptions\";\r\n\r\nimport { accountStatisticApi } from \"@api/home-api\";\r\nimport { getDirectMinutesApi } from \"@api/call-record\";\r\nimport {\r\n  yearCommissionApi,\r\n  advancePaymentApi,\r\n  typeYearCommissionApi,\r\n} from \"@api/financial-statistics-api\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\ninterface InitDataInter {\r\n  list: unknown[];\r\n  trendList: unknown[];\r\n  proportionList: unknown[];\r\n  accountInfo: Record<string, unknown>;\r\n  advancePayment: Record<string, unknown>;\r\n  selectYear: string;\r\n  minutesConsumed: Record<string, unknown>;\r\n  customerTime: unknown[];\r\n  interfaceTime: unknown[];\r\n}\r\n\r\n\r\nconst __default__ = {\r\n  name: \"home\",\r\n};\r\n\nexport default /*@__PURE__*/_defineComponent({\n  ...__default__,\n  ...{\r\n  name: \"home\",\r\n},\n  setup(__props) {\n\r\n\r\nconst { bd_existCallInterface: existCallInterface } = LocalStorage.batchGetItem(\r\n  [\"bd_existCallInterface\"]\r\n);\r\nconst monthStartTime = dayjs()\r\n  .subtract(0, \"month\")\r\n  .startOf(\"month\")\r\n  .format(\"YYYY-MM-DD\");\r\nconst todayTime = dayjs().subtract(0, \"month\").format(\"YYYY-MM-DD\");\r\n\r\nconst initData = reactive<InitDataInter>({\r\n  selectYear: new Date().getFullYear() + \"\",\r\n  list: [],\r\n  trendList: [],\r\n  proportionList: [],\r\n  accountInfo: {},\r\n  advancePayment: {},\r\n  minutesConsumed: {},\r\n  customerTime: [monthStartTime, todayTime],\r\n  interfaceTime: [monthStartTime, todayTime],\r\n});\r\nconst accountList = [\r\n  {\r\n    label: \"账户余额\",\r\n    buttonText: \"立即充值\",\r\n    url: \"/financialCenter/fundManagement/recharge\",\r\n  },\r\n  {\r\n    label: \"可提现佣金\",\r\n    buttonText: \"立即提现\",\r\n    url: \"/financialCenter/fundManagement/withdrawal\",\r\n  },\r\n  {\r\n    label: \"订单数量\",\r\n    buttonText: \"代客下单\",\r\n    url: \"/orderManagement/createOrder/companyList\",\r\n  },\r\n  {\r\n    label: \"接口客户数\",\r\n    buttonText: \"业务报备\",\r\n    url: \"/businessManagement/ospreyCloudCall/report/list\",\r\n  },\r\n];\r\nlet echartsList: unknown[] = [];\r\nconst { goPage } = useVueRouter();\r\nconst selectMinDate = ref(\"\"); //选中的最小时间\r\nconst selectMaxDate = new Date(new Date().setDate(new Date().getDate())); // 可选中的最大时间\r\n// 获取公司的总分钟数\r\nconst getTotalMinutes = async () => {\r\n  await getCustomerMinutes();\r\n  if (existCallInterface != 0) await getInterfaceMinutes();\r\n};\r\nconst getCustomerMinutes = async () => {\r\n  try {\r\n    const params = {\r\n      interfaceData: \"0\",\r\n    };\r\n    if (initData.customerTime && initData.customerTime.length) {\r\n      Reflect.set(params, \"startTime\", initData.customerTime[0]);\r\n      Reflect.set(params, \"endTime\", initData.customerTime[1]);\r\n    } else {\r\n      Reflect.set(params, \"startTime\", monthStartTime);\r\n      Reflect.set(params, \"endTime\", todayTime);\r\n    }\r\n    const { data } = await getDirectMinutesApi.getData(params);\r\n    const result = getDirectMinutesApi.handleData(data);\r\n    initData.minutesConsumed.directCustomerNum = result.customer;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\nconst getInterfaceMinutes = async () => {\r\n  try {\r\n    const params = {\r\n      interfaceData: \"0\",\r\n    };\r\n    if (initData.interfaceTime && initData.interfaceTime.length) {\r\n      Reflect.set(params, \"startTime\", initData.interfaceTime[0]);\r\n      Reflect.set(params, \"endTime\", initData.interfaceTime[1]);\r\n    } else {\r\n      Reflect.set(params, \"startTime\", monthStartTime);\r\n      Reflect.set(params, \"endTime\", todayTime);\r\n    }\r\n    const { data } = await getDirectMinutesApi.getData(params);\r\n    const result = getDirectMinutesApi.handleData(data);\r\n    initData.minutesConsumed.interfaceNum = result.interface;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\nconst changeDate = (type: string) => {\r\n  if (type === \"customer\") {\r\n    getCustomerMinutes();\r\n  } else if (type === \"interface\") {\r\n    getInterfaceMinutes();\r\n  }\r\n};\r\n\r\nconst clearDate = (type: string) => {\r\n  if (type === \"customer\") {\r\n    initData.customerTime = [monthStartTime, todayTime];\r\n  } else {\r\n    initData.interfaceTime = [monthStartTime, todayTime];\r\n  }\r\n};\r\n\r\nconst onPick = ([minDate, maxDate]) => {\r\n  selectMinDate.value = minDate;\r\n  if (maxDate) selectMinDate.value = \"\";\r\n};\r\nconst pickerOptions = (time) => {\r\n  const choseTime = time.getTime();\r\n  if (selectMinDate.value) {\r\n    // maxTime1 等于当天天数 + 90\r\n    const maxSelectMinDate = _.cloneDeep(selectMinDate.value);\r\n    const minSelectMinDate = _.cloneDeep(selectMinDate.value);\r\n    const maxTime = new Date(\r\n      maxSelectMinDate.setDate(maxSelectMinDate.getDate() + 90)\r\n    );\r\n    // minTime 等与当天签署 - 90天\r\n    const minTime = new Date(\r\n      minSelectMinDate.setDate(minSelectMinDate.getDate() - 90)\r\n    );\r\n    return !(\r\n      choseTime > minTime.getTime() &&\r\n      choseTime < maxTime.getTime() &&\r\n      choseTime < selectMaxDate.getTime()\r\n    );\r\n  }\r\n  return !(choseTime < selectMaxDate.getTime());\r\n};\r\n// 获取账户总览\r\nconst getAccountBalance = async () => {\r\n  try {\r\n    const { data } = await accountStatisticApi.getData();\r\n    initData.accountInfo = accountStatisticApi.handleData(data);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n// 获取代理商预付款本月记录\r\nconst getAdvancePayment = async () => {\r\n  try {\r\n    const { data } = await advancePaymentApi.getData();\r\n    initData.advancePayment = advancePaymentApi.handleData(data);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n// 获取佣金统计年度返佣数据-按类型分组\r\nconst getTypeYearCommission = async () => {\r\n  try {\r\n    const params = {\r\n      year: initData.selectYear,\r\n    };\r\n    const { data } = await typeYearCommissionApi.getData(params);\r\n    initData.trendList = typeYearCommissionApi.handleData(data);\r\n    const trendEcharts = initEcharts(\r\n      document.getElementById(\"trend\"),\r\n      trendOption(initData.trendList)\r\n    );\r\n    echartsList.push(trendEcharts);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n// 获取月返佣记录列表\r\nconst getTrendList = async () => {\r\n  try {\r\n    const params = {\r\n      year: initData.selectYear,\r\n    };\r\n    const { data } = await yearCommissionApi.getData(params);\r\n    const result = yearCommissionApi.handleData(data);\r\n    initData.list = result.tableList;\r\n    initData.proportionList = result.proportionList;\r\n    const proportionEcharts = initEcharts(\r\n      document.getElementById(\"proportion\"),\r\n      proportionOption(initData.proportionList)\r\n    );\r\n    echartsList.push(proportionEcharts);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nconst yearChange = () => {\r\n  getTrendList();\r\n  getTypeYearCommission();\r\n};\r\n\r\nconst openSettleAccounts = () => {};\r\nonMounted(() => {\r\n  getAccountBalance();\r\n  getAdvancePayment();\r\n  yearChange();\r\n  getTotalMinutes();\r\n});\r\nonBeforeUnmount(() => {\r\n  echartsList.forEach((item: any) => {\r\n    item && item.dispose();\r\n  });\r\n  echartsList = [];\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _cache[18] || (_cache[18] = _createElementVNode(\"h6\", { class: \"module-title\" }, \"我的账户\", -1)),\n    _createElementVNode(\"div\", _hoisted_2, [\n      (_openBlock(), _createElementBlock(_Fragment, null, _renderList(accountList, (item, index) => {\n        return _withDirectives(_createElementVNode(\"div\", {\n          class: \"account-info\",\n          key: index\n        }, [\n          _createElementVNode(\"p\", _hoisted_3, _toDisplayString(item.label), 1),\n          _createElementVNode(\"p\", _hoisted_4, [\n            (index === 0)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(initData.accountInfo?.accountBalance ?? 0) + \" 元\", 1))\n              : _createCommentVNode(\"\", true),\n            (index === 1)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(initData.accountInfo?.withdrawAble ?? 0) + \" 元\", 1))\n              : _createCommentVNode(\"\", true),\n            (index === 2)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_7, _toDisplayString(initData.accountInfo?.orderNum ?? 0) + \" 单\", 1))\n              : _createCommentVNode(\"\", true),\n            (index === 3)\n              ? (_openBlock(), _createElementBlock(\"span\", _hoisted_8, _toDisplayString(initData.accountInfo?.interfaceNum ?? 0) + \" 位\", 1))\n              : _createCommentVNode(\"\", true),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              onClick: ($event: any) => (_unref(goPage)(item.url))\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(item.buttonText), 1)\n              ]),\n              _: 2\n            }, 1032, [\"onClick\"])\n          ])\n        ]), [\n          [_vShow, index !== 1]\n        ])\n      }), 64))\n    ]),\n    _cache[19] || (_cache[19] = _createElementVNode(\"h6\", { class: \"module-title\" }, \"数据分析\", -1)),\n    _createElementVNode(\"div\", _hoisted_9, [\n      _createElementVNode(\"div\", _hoisted_10, [\n        _createElementVNode(\"div\", _hoisted_11, [\n          _cache[6] || (_cache[6] = _createElementVNode(\"p\", { class: \"word\" }, \"消耗分钟数（直客）\", -1)),\n          _createElementVNode(\"div\", _hoisted_12, [\n            _createVNode(_component_el_date_picker, {\n              modelValue: initData.customerTime,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((initData.customerTime) = $event)),\n              type: \"daterange\",\n              \"range-separator\": \"~\",\n              \"start-placeholder\": \"开始日期\",\n              \"end-placeholder\": \"结束日期\",\n              onChange: _cache[1] || (_cache[1] = ($event: any) => (changeDate('customer'))),\n              onClear: _cache[2] || (_cache[2] = ($event: any) => (clearDate('customer'))),\n              clearable: \"\",\n              format: \"YYYY-MM-DD\",\n              \"value-format\": \"YYYY-MM-DD\",\n              \"disabled-date\": pickerOptions,\n              onCalendarChange: onPick\n            }, null, 8, [\"modelValue\"])\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_13, [\n          _createTextVNode(_toDisplayString(initData.minutesConsumed.directCustomerNum), 1),\n          _cache[7] || (_cache[7] = _createElementVNode(\"span\", { class: \"unit\" }, \"分钟\", -1))\n        ])\n      ]),\n      (_unref(existCallInterface) != 0)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [\n            _createElementVNode(\"div\", _hoisted_15, [\n              _cache[8] || (_cache[8] = _createElementVNode(\"p\", { class: \"word\" }, \"消耗分钟数（接口）\", -1)),\n              _createElementVNode(\"div\", _hoisted_16, [\n                _createVNode(_component_el_date_picker, {\n                  modelValue: initData.interfaceTime,\n                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((initData.interfaceTime) = $event)),\n                  type: \"daterange\",\n                  \"disabled-date\": pickerOptions,\n                  onCalendarChange: onPick,\n                  \"range-separator\": \"~\",\n                  \"start-placeholder\": \"开始日期\",\n                  \"end-placeholder\": \"结束日期\",\n                  onChange: _cache[4] || (_cache[4] = ($event: any) => (changeDate('interface'))),\n                  onClear: _cache[5] || (_cache[5] = ($event: any) => (clearDate('interface'))),\n                  format: \"YYYY-MM-DD\",\n                  \"value-format\": \"YYYY-MM-DD\"\n                }, null, 8, [\"modelValue\"])\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_17, [\n              _createTextVNode(_toDisplayString(initData.minutesConsumed.interfaceNum), 1),\n              _cache[9] || (_cache[9] = _createElementVNode(\"span\", { class: \"unit\" }, \"分钟\", -1))\n            ])\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createElementVNode(\"div\", _hoisted_18, [\n      false\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [\n            _createElementVNode(\"div\", _hoisted_20, [\n              _createElementVNode(\"span\", null, _toDisplayString(initData.advancePayment?.statisticsStartTime) + \"~\" + _toDisplayString(initData.advancePayment?.statisticsEndTime), 1),\n              _cache[10] || (_cache[10] = _createElementVNode(\"span\", null, \"结算时间\", -1))\n            ]),\n            _createElementVNode(\"div\", _hoisted_21, [\n              _createElementVNode(\"span\", null, _toDisplayString(initData.advancePayment?.seat), 1),\n              _cache[11] || (_cache[11] = _createElementVNode(\"span\", null, \"号码数\", -1))\n            ]),\n            _createElementVNode(\"div\", _hoisted_22, [\n              _createElementVNode(\"span\", null, _toDisplayString(initData.advancePayment?.realConsumption), 1),\n              _cache[12] || (_cache[12] = _createElementVNode(\"span\", null, \"实消分钟数\", -1))\n            ]),\n            _createElementVNode(\"div\", _hoisted_23, [\n              _createElementVNode(\"span\", null, _toDisplayString(initData.advancePayment?.salePrice), 1),\n              _cache[13] || (_cache[13] = _createElementVNode(\"span\", null, \"单价\", -1))\n            ]),\n            _createElementVNode(\"div\", _hoisted_24, [\n              _createElementVNode(\"span\", null, _toDisplayString(initData.advancePayment?.advanceCharge), 1),\n              _cache[14] || (_cache[14] = _createElementVNode(\"span\", null, \"消耗余额\", -1))\n            ]),\n            _createElementVNode(\"div\", _hoisted_25, [\n              _createElementVNode(\"span\", null, _toDisplayString(initData.advancePayment?.statisticsCreatedTime), 1),\n              _cache[15] || (_cache[15] = _createElementVNode(\"span\", null, \"结算日期\", -1))\n            ]),\n            _createElementVNode(\"div\", _hoisted_26, [\n              _createVNode(_component_el_button, {\n                link: \"\",\n                type: \"primary\",\n                onClick: openSettleAccounts\n              }, {\n                default: _withCtx(() => _cache[16] || (_cache[16] = [\n                  _createTextVNode(\"详情 \")\n                ])),\n                _: 1\n              })\n            ])\n          ]))\n        : _createCommentVNode(\"\", true),\n      _cache[17] || (_cache[17] = _createElementVNode(\"div\", { class: \"report-form-container\" }, [\n        _createElementVNode(\"div\", { class: \"eChart-container\" }, [\n          _createElementVNode(\"div\", { id: \"proportion\" }),\n          _createElementVNode(\"div\", { id: \"trend\" })\n        ])\n      ], -1))\n    ])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"home main-container\">\r\n    <h6 class=\"module-title\">我的账户</h6>\r\n    <div class=\"account-container\">\r\n      <div\r\n        class=\"account-info\"\r\n        v-for=\"(item, index) in accountList\"\r\n        :key=\"index\"\r\n        v-show=\"index !== 1\"\r\n      >\r\n        <p class=\"word\">{{ item.label }}</p>\r\n        <p class=\"count\">\r\n          <span v-if=\"index === 0\"\r\n            >{{ initData.accountInfo?.accountBalance ?? 0 }}&nbsp;元</span\r\n          >\r\n          <span v-if=\"index === 1\"\r\n            >{{ initData.accountInfo?.withdrawAble ?? 0 }}&nbsp;元</span\r\n          >\r\n          <span v-if=\"index === 2\"\r\n            >{{ initData.accountInfo?.orderNum ?? 0 }}&nbsp;单</span\r\n          >\r\n          <span v-if=\"index === 3\"\r\n            >{{ initData.accountInfo?.interfaceNum ?? 0 }}&nbsp;位</span\r\n          >\r\n          <el-button type=\"primary\" @click=\"goPage(item.url)\"\r\n            >{{ item.buttonText }}\r\n          </el-button>\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <h6 class=\"module-title\">数据分析</h6>\r\n    <div class=\"consume-container\">\r\n      <div class=\"consume-info\">\r\n        <div class=\"left-box\">\r\n          <p class=\"word\">消耗分钟数（直客）</p>\r\n          <div class=\"date\">\r\n            <el-date-picker\r\n              v-model=\"initData.customerTime\"\r\n              type=\"daterange\"\r\n              range-separator=\"~\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              @change=\"changeDate('customer')\"\r\n              @clear=\"clearDate('customer')\"\r\n              clearable\r\n              format=\"YYYY-MM-DD\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              :disabled-date=\"pickerOptions\"\r\n              @calendar-change=\"onPick\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"right-box\">\r\n          {{ initData.minutesConsumed.directCustomerNum\r\n          }}<span class=\"unit\">分钟</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"consume-info\" v-if=\"existCallInterface != 0\">\r\n        <div class=\"left-box\">\r\n          <p class=\"word\">消耗分钟数（接口）</p>\r\n          <div class=\"date\">\r\n            <el-date-picker\r\n              v-model=\"initData.interfaceTime\"\r\n              type=\"daterange\"\r\n              :disabled-date=\"pickerOptions\"\r\n              @calendar-change=\"onPick\"\r\n              range-separator=\"~\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              @change=\"changeDate('interface')\"\r\n              @clear=\"clearDate('interface')\"\r\n              format=\"YYYY-MM-DD\"\r\n              value-format=\"YYYY-MM-DD\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"right-box\">\r\n          {{ initData.minutesConsumed.interfaceNum\r\n          }}<span class=\"unit\">分钟</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--  只有呼叫接口客户才会显示  -->\r\n    <div class=\"data-analysis\">\r\n      <div class=\"data-message\" v-if=\"false\">\r\n        <div class=\"item\">\r\n          <span\r\n            >{{ initData.advancePayment?.statisticsStartTime }}~{{\r\n              initData.advancePayment?.statisticsEndTime\r\n            }}</span\r\n          >\r\n          <span>结算时间</span>\r\n        </div>\r\n        <div class=\"item\">\r\n          <span>{{ initData.advancePayment?.seat }}</span>\r\n          <span>号码数</span>\r\n        </div>\r\n        <div class=\"item\">\r\n          <span>{{ initData.advancePayment?.realConsumption }}</span>\r\n          <span>实消分钟数</span>\r\n        </div>\r\n        <div class=\"item\">\r\n          <span>{{ initData.advancePayment?.salePrice }}</span>\r\n          <span>单价</span>\r\n        </div>\r\n        <div class=\"item\">\r\n          <span>{{ initData.advancePayment?.advanceCharge }}</span>\r\n          <span>消耗余额</span>\r\n        </div>\r\n        <div class=\"item\">\r\n          <span> {{ initData.advancePayment?.statisticsCreatedTime }}</span>\r\n          <span>结算日期</span>\r\n        </div>\r\n        <div class=\"item button\">\r\n          <el-button link type=\"primary\" @click=\"openSettleAccounts\"\r\n            >详情\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n      <div class=\"report-form-container\">\r\n        <div class=\"eChart-container\">\r\n          <div id=\"proportion\"></div>\r\n          <div id=\"trend\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nexport default {\r\n  name: \"home\",\r\n};\r\n</script>\r\n<script lang=\"ts\" setup>\r\nimport { reactive, onMounted, onBeforeUnmount, ref } from \"vue\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { initEcharts } from \"@assets/instanceCollection\";\r\nimport { trendOption, proportionOption } from \"@/assets/echartsOptions\";\r\n\r\nimport { accountStatisticApi } from \"@api/home-api\";\r\nimport { getDirectMinutesApi } from \"@api/call-record\";\r\nimport {\r\n  yearCommissionApi,\r\n  advancePaymentApi,\r\n  typeYearCommissionApi,\r\n} from \"@api/financial-statistics-api\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\ndefineOptions({\r\n  name: \"home\",\r\n});\r\nconst { bd_existCallInterface: existCallInterface } = LocalStorage.batchGetItem(\r\n  [\"bd_existCallInterface\"]\r\n);\r\nconst monthStartTime = dayjs()\r\n  .subtract(0, \"month\")\r\n  .startOf(\"month\")\r\n  .format(\"YYYY-MM-DD\");\r\nconst todayTime = dayjs().subtract(0, \"month\").format(\"YYYY-MM-DD\");\r\n\r\ninterface InitDataInter {\r\n  list: unknown[];\r\n  trendList: unknown[];\r\n  proportionList: unknown[];\r\n  accountInfo: Record<string, unknown>;\r\n  advancePayment: Record<string, unknown>;\r\n  selectYear: string;\r\n  minutesConsumed: Record<string, unknown>;\r\n  customerTime: unknown[];\r\n  interfaceTime: unknown[];\r\n}\r\n\r\nconst initData = reactive<InitDataInter>({\r\n  selectYear: new Date().getFullYear() + \"\",\r\n  list: [],\r\n  trendList: [],\r\n  proportionList: [],\r\n  accountInfo: {},\r\n  advancePayment: {},\r\n  minutesConsumed: {},\r\n  customerTime: [monthStartTime, todayTime],\r\n  interfaceTime: [monthStartTime, todayTime],\r\n});\r\nconst accountList = [\r\n  {\r\n    label: \"账户余额\",\r\n    buttonText: \"立即充值\",\r\n    url: \"/financialCenter/fundManagement/recharge\",\r\n  },\r\n  {\r\n    label: \"可提现佣金\",\r\n    buttonText: \"立即提现\",\r\n    url: \"/financialCenter/fundManagement/withdrawal\",\r\n  },\r\n  {\r\n    label: \"订单数量\",\r\n    buttonText: \"代客下单\",\r\n    url: \"/orderManagement/createOrder/companyList\",\r\n  },\r\n  {\r\n    label: \"接口客户数\",\r\n    buttonText: \"业务报备\",\r\n    url: \"/businessManagement/ospreyCloudCall/report/list\",\r\n  },\r\n];\r\nlet echartsList: unknown[] = [];\r\nconst { goPage } = useVueRouter();\r\nconst selectMinDate = ref(\"\"); //选中的最小时间\r\nconst selectMaxDate = new Date(new Date().setDate(new Date().getDate())); // 可选中的最大时间\r\n// 获取公司的总分钟数\r\nconst getTotalMinutes = async () => {\r\n  await getCustomerMinutes();\r\n  if (existCallInterface != 0) await getInterfaceMinutes();\r\n};\r\nconst getCustomerMinutes = async () => {\r\n  try {\r\n    const params = {\r\n      interfaceData: \"0\",\r\n    };\r\n    if (initData.customerTime && initData.customerTime.length) {\r\n      Reflect.set(params, \"startTime\", initData.customerTime[0]);\r\n      Reflect.set(params, \"endTime\", initData.customerTime[1]);\r\n    } else {\r\n      Reflect.set(params, \"startTime\", monthStartTime);\r\n      Reflect.set(params, \"endTime\", todayTime);\r\n    }\r\n    const { data } = await getDirectMinutesApi.getData(params);\r\n    const result = getDirectMinutesApi.handleData(data);\r\n    initData.minutesConsumed.directCustomerNum = result.customer;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\nconst getInterfaceMinutes = async () => {\r\n  try {\r\n    const params = {\r\n      interfaceData: \"0\",\r\n    };\r\n    if (initData.interfaceTime && initData.interfaceTime.length) {\r\n      Reflect.set(params, \"startTime\", initData.interfaceTime[0]);\r\n      Reflect.set(params, \"endTime\", initData.interfaceTime[1]);\r\n    } else {\r\n      Reflect.set(params, \"startTime\", monthStartTime);\r\n      Reflect.set(params, \"endTime\", todayTime);\r\n    }\r\n    const { data } = await getDirectMinutesApi.getData(params);\r\n    const result = getDirectMinutesApi.handleData(data);\r\n    initData.minutesConsumed.interfaceNum = result.interface;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\nconst changeDate = (type: string) => {\r\n  if (type === \"customer\") {\r\n    getCustomerMinutes();\r\n  } else if (type === \"interface\") {\r\n    getInterfaceMinutes();\r\n  }\r\n};\r\n\r\nconst clearDate = (type: string) => {\r\n  if (type === \"customer\") {\r\n    initData.customerTime = [monthStartTime, todayTime];\r\n  } else {\r\n    initData.interfaceTime = [monthStartTime, todayTime];\r\n  }\r\n};\r\n\r\nconst onPick = ([minDate, maxDate]) => {\r\n  selectMinDate.value = minDate;\r\n  if (maxDate) selectMinDate.value = \"\";\r\n};\r\nconst pickerOptions = (time) => {\r\n  const choseTime = time.getTime();\r\n  if (selectMinDate.value) {\r\n    // maxTime1 等于当天天数 + 90\r\n    const maxSelectMinDate = _.cloneDeep(selectMinDate.value);\r\n    const minSelectMinDate = _.cloneDeep(selectMinDate.value);\r\n    const maxTime = new Date(\r\n      maxSelectMinDate.setDate(maxSelectMinDate.getDate() + 90)\r\n    );\r\n    // minTime 等与当天签署 - 90天\r\n    const minTime = new Date(\r\n      minSelectMinDate.setDate(minSelectMinDate.getDate() - 90)\r\n    );\r\n    return !(\r\n      choseTime > minTime.getTime() &&\r\n      choseTime < maxTime.getTime() &&\r\n      choseTime < selectMaxDate.getTime()\r\n    );\r\n  }\r\n  return !(choseTime < selectMaxDate.getTime());\r\n};\r\n// 获取账户总览\r\nconst getAccountBalance = async () => {\r\n  try {\r\n    const { data } = await accountStatisticApi.getData();\r\n    initData.accountInfo = accountStatisticApi.handleData(data);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n// 获取代理商预付款本月记录\r\nconst getAdvancePayment = async () => {\r\n  try {\r\n    const { data } = await advancePaymentApi.getData();\r\n    initData.advancePayment = advancePaymentApi.handleData(data);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n// 获取佣金统计年度返佣数据-按类型分组\r\nconst getTypeYearCommission = async () => {\r\n  try {\r\n    const params = {\r\n      year: initData.selectYear,\r\n    };\r\n    const { data } = await typeYearCommissionApi.getData(params);\r\n    initData.trendList = typeYearCommissionApi.handleData(data);\r\n    const trendEcharts = initEcharts(\r\n      document.getElementById(\"trend\"),\r\n      trendOption(initData.trendList)\r\n    );\r\n    echartsList.push(trendEcharts);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n// 获取月返佣记录列表\r\nconst getTrendList = async () => {\r\n  try {\r\n    const params = {\r\n      year: initData.selectYear,\r\n    };\r\n    const { data } = await yearCommissionApi.getData(params);\r\n    const result = yearCommissionApi.handleData(data);\r\n    initData.list = result.tableList;\r\n    initData.proportionList = result.proportionList;\r\n    const proportionEcharts = initEcharts(\r\n      document.getElementById(\"proportion\"),\r\n      proportionOption(initData.proportionList)\r\n    );\r\n    echartsList.push(proportionEcharts);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nconst yearChange = () => {\r\n  getTrendList();\r\n  getTypeYearCommission();\r\n};\r\n\r\nconst openSettleAccounts = () => {};\r\nonMounted(() => {\r\n  getAccountBalance();\r\n  getAdvancePayment();\r\n  yearChange();\r\n  getTotalMinutes();\r\n});\r\nonBeforeUnmount(() => {\r\n  echartsList.forEach((item: any) => {\r\n    item && item.dispose();\r\n  });\r\n  echartsList = [];\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.module-title {\r\n  color: #242934;\r\n  font-size: 18px;\r\n  line-height: 1;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.consume-container {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  grid-row-gap: 20px;\r\n  grid-column-gap: 20px;\r\n  margin-bottom: 16px;\r\n\r\n  .consume-info {\r\n    min-width: 300px;\r\n    @include flex(center, space-between);\r\n    background: #ffffff;\r\n    border-radius: 8px;\r\n    padding: 29px 28px;\r\n\r\n    .left-box {\r\n      .word {\r\n        font-size: 16px;\r\n        color: #242934;\r\n        font-weight: 900;\r\n        margin-bottom: 16px;\r\n        line-height: 1;\r\n      }\r\n\r\n      :deep(.el-date-editor) {\r\n        width: 250px;\r\n      }\r\n    }\r\n\r\n    .right-box {\r\n      font-size: 28px;\r\n      font-weight: 500;\r\n      color: #242934;\r\n      line-height: 36px;\r\n\r\n      .unit {\r\n        font-size: 14px;\r\n        font-weight: 400;\r\n        color: #9ca6b9;\r\n        line-height: 18px;\r\n        margin-left: 8px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.account-container {\r\n  display: flex;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.account-info {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  height: 148px;\r\n  border-radius: 8px;\r\n  padding: 20px 30px;\r\n  margin-right: 20px;\r\n  background-color: #ffffff;\r\n\r\n  &:last-child {\r\n    margin-right: 0;\r\n  }\r\n\r\n  .word {\r\n    font-size: 14px;\r\n    color: #9ca6b9;\r\n    line-height: 20px;\r\n  }\r\n\r\n  .count {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    font-size: 20px;\r\n    font-weight: 900;\r\n    color: #242934;\r\n    line-height: 28px;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n\r\n.data-message {\r\n  position: relative;\r\n  flex-grow: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 148px;\r\n  margin-bottom: 16px;\r\n  border-left: 1px solid #edf1f6;\r\n  background-color: #ffffff;\r\n\r\n  .item {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    span:nth-child(1) {\r\n      height: 20px;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      color: #242934;\r\n    }\r\n\r\n    span:nth-child(2) {\r\n      height: 20px;\r\n      font-size: 14px;\r\n      color: #9ca6b9;\r\n      margin-top: 8px;\r\n    }\r\n  }\r\n\r\n  .item.button {\r\n    flex: 0 0 200px;\r\n  }\r\n\r\n  .date-times {\r\n    position: absolute;\r\n    top: 1px;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    width: 270px;\r\n    height: 28px;\r\n    color: #646b7a;\r\n    font-size: 12px;\r\n    text-align: center;\r\n    line-height: 28px;\r\n    background: #f5f7fb;\r\n    border-radius: 0 0 100px 100px;\r\n  }\r\n}\r\n\r\n.eChart-container {\r\n  display: flex;\r\n}\r\n\r\n#trend,\r\n#proportion {\r\n  height: 430px;\r\n  padding: 20px;\r\n  background-color: #ffffff;\r\n}\r\n\r\n#trend {\r\n  width: 55%;\r\n}\r\n\r\n#proportion {\r\n  width: 45%;\r\n  margin-right: 20px;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./index.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./index.vue?vue&type=style&index=0&id=52bc3913&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-52bc3913\"]])\n\nexport default __exports__"],"names":["proportionOption","list","tooltip","trigger","title","text","subtext","textStyle","fontSize","color","subtextStyle","align","xAxis","type","data","axisTick","alignWithLabel","yAxis","series","name","barWidth","itemStyle","trendOption","legend","orient","right","top","itemWidth","itemHeight","radius","avoidLabelOverlap","label","show","position","labelLine","left","emphasis","fontWeight","formatter","accountStatisticApi","getData","http","post","serviceName","agentSystem","handleData","agentNum","orderNum","withdrawAble","withdrawable","interfaceNum","qfbAmount","accountBalance","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","key","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","__default__","_defineComponent","setup","__props","bd_existCallInterface","existCallInterface","LocalStorage","batchGetItem","monthStartTime","dayjs","subtract","startOf","format","todayTime","initData","reactive","selectYear","Date","getFullYear","trendList","proportionList","accountInfo","advancePayment","minutesConsumed","customerTime","interfaceTime","accountList","buttonText","url","echartsList","goPage","useVueRouter","selectMinDate","ref","selectMaxDate","setDate","getDate","getTotalMinutes","async","getCustomerMinutes","getInterfaceMinutes","params","interfaceData","length","Reflect","set","getDirectMinutesApi","result","directCustomerNum","customer","e","console","log","interface","changeDate","clearDate","onPick","minDate","maxDate","value","pickerOptions","time","choseTime","getTime","maxSelectMinDate","_","cloneDeep","minSelectMinDate","maxTime","minTime","getAccountBalance","getAdvancePayment","advancePaymentApi","getTypeYearCommission","year","typeYearCommissionApi","trendEcharts","initEcharts","document","getElementById","push","getTrendList","yearCommissionApi","tableList","proportionEcharts","yearChange","onMounted","onBeforeUnmount","forEach","item","dispose","_ctx","_cache","_component_el_button","_resolveComponent","_component_el_date_picker","_openBlock","_createElementBlock","_createElementVNode","_Fragment","_renderList","index","_initData$accountInfo","_initData$accountInfo2","_initData$accountInfo3","_initData$accountInfo4","_withDirectives","_toDisplayString","_createCommentVNode","_createVNode","onClick","$event","_unref","default","_withCtx","_createTextVNode","_vShow","modelValue","onChange","onClear","clearable","onCalendarChange","id","__exports__"],"sourceRoot":""}