"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[5266],{25266:function(e,a,l){l.r(a),l.d(a,{default:function(){return m}});var t=l(6254),u=l(25598),s=l(63148),d=l(88365),i=l(10901),o=l(59259),n=(0,t.pM)({__name:"add-seat-dialog",props:{visible:{type:Boolean},info:{},isEditing:{type:Boolean}},emits:["update:visible","emitFunc"],setup(e,{emit:a}){const l=d.DT.getItem("bd_agentId"),n=d.DT.getItem("bd_userInfo"),r=(0,u.KR)(),c=e,m=a,{routeQuery:g}=(0,i.dG)(),p=(0,u.Kh)({seatId:"",isEditing:!1,userName:"",userAccount:""}),f=(e,a,l)=>{a&&!/^1[3-9]\d{9}$/.test(a)?l(new Error("请输入有效的手机号")):l()},b={seatId:[{required:!0,message:"请输入坐席ID",trigger:"blur"}],userAccount:[{validator:f,trigger:"blur"}]},I=()=>{p.seatId=c.info.userId,p.isEditing=c.isEditing,p.userName=c.info.userName,p.userAccount=c.info.mobile},k=()=>{m("update:visible",!1),r.value&&r.value.resetFields(),p.seatId="",p.userAccount="",p.userName="",p.isEditing=!1},v=()=>{r.value&&(p.seatId="string"===typeof p.seatId?p.seatId.trim().replace(/\s+/g,""):"",r.value.validate((async e=>{if(e){const e={agentId:l,companyId:g.value.companyId,userId:p.seatId,id:0,profileId:n.profileId,mobile:p.userAccount,userName:p.userName};c.isEditing?(e.id=c.info.id,s.A7.getData(e).then((e=>{0===e.statusCode?(m("emitFunc"),o.nk.success("编辑成功"),k()):o.nk.warning(e.msg||"编辑失败")}))):s.A7.getData(e).then((e=>{0===e.statusCode?(m("emitFunc"),o.nk.success("新增成功"),k()):o.nk.warning(e.msg||"新增失败")}))}})))};return(e,a)=>{const l=(0,t.g2)("el-input"),u=(0,t.g2)("el-form-item"),s=(0,t.g2)("el-form"),d=(0,t.g2)("el-button"),i=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(i,{"model-value":e.visible,title:p.isEditing?"编辑坐席":"新增坐席",width:"500px",class:"custom-dialog",onOpen:I,"before-close":k},{footer:(0,t.k6)((()=>[(0,t.bF)(d,{onClick:k},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("取 消")]))),_:1}),(0,t.bF)(d,{type:"primary",onClick:v},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("确 定")]))),_:1})])),default:(0,t.k6)((()=>[(0,t.bF)(s,{ref_key:"formRef",ref:r,rules:b,model:p,class:"package-form"},{default:(0,t.k6)((()=>[(0,t.bF)(u,{label:"用户ID",prop:"seatId"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:p.seatId,"onUpdate:modelValue":a[0]||(a[0]=e=>p.seatId=e),placeholder:"请输入",maxlength:"50",clearable:""},null,8,["modelValue"])])),_:1}),a[3]||(a[3]=(0,t.Lk)("p",null,"EC系统中的用户ID",-1)),(0,t.bF)(u,{label:"用户名称"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:p.userName,"onUpdate:modelValue":a[1]||(a[1]=e=>p.userName=e),placeholder:"请输入",maxlength:"50",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(u,{label:"用户账号",prop:"userAccount"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:p.userAccount,"onUpdate:modelValue":a[2]||(a[2]=e=>p.userAccount=e),placeholder:"请输入",maxlength:"50",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["model-value","title"])}}}),r=l(83936);const c=(0,r.A)(n,[["__scopeId","data-v-08fcc5a2"]]);var m=c}}]);
//# sourceMappingURL=5266.b695e4a2.js.map