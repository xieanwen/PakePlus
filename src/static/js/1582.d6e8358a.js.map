{"version":3,"file":"static/js/1582.d6e8358a.js","mappings":"uMAGA,MAAMA,EAAa,CAAEC,MAAO,mBAS5B,OAA4BC,EAAAA,EAAAA,IAAiB,CAC3CC,OAAQ,eACRC,KAAAA,CAAMC,GC6BR,MAAMC,GAAcC,EAAAA,EAAAA,KAClB,IACE,4DAKE,MAAEC,EAAK,mBAAEC,IAAuBC,EAAAA,EAAAA,MAChCC,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,IAId,CACDC,cAAc,EACdC,YAAa,GACbC,MAAO,OAcTC,eAAeC,IACb,IACE,MAAMC,EAAS,CACbC,UAAWb,EAAMc,MAAMD,YAEnB,KAAEE,SAAeC,EAAAA,GAAqBC,QAAQL,GACpDP,EAASG,YAAcQ,EAAAA,GAAqBE,WAAWH,EACzD,CAAE,MAAOI,GACPC,QAAQC,IAAIF,EACd,CACF,CApBInB,EAAMc,MAAMD,UACdF,IAEAN,EAASI,MAAQa,aAAY,KACvBtB,EAAMc,MAAMD,YACdF,IACAY,cAAclB,EAASI,OACzB,GACC,KAcL,MAAMe,EAAeC,IACnBtB,EAASuB,MAAMC,QAAO,EAAMC,OAAOC,OAAOJ,EAAM,CAAEK,YAAa,YAAa,EDpB9E,OCuBA7B,GAAmB,KACjBsB,cAAclB,EAASI,MAAM,IDxBxB,CAACsB,EAAUC,KAChB,MAAMC,GAA6BC,EAAAA,EAAAA,IAAkB,mBAC/CC,GAAuBD,EAAAA,EAAAA,IAAkB,aACzCE,GAAwBF,EAAAA,EAAAA,IAAkB,cAC1CG,GAAsBH,EAAAA,EAAAA,IAAkB,YAE9C,OAAQI,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoBC,EAAAA,GAAW,KAAM,EACzDC,EAAAA,EAAAA,IAAoB,MAAOjD,EAAY,EACrCkD,EAAAA,EAAAA,IAAaL,EAAqB,CAChCtB,MAAM4B,EAAAA,EAAAA,IAAOtC,GAAUG,YACvBoC,OAAQ,uBACP,CACDC,OAAOC,EAAAA,EAAAA,KAAS,IAAM,EACpBJ,EAAAA,EAAAA,IAAaN,EAAuB,CAAE,aAAc,YAEtDW,SAASD,EAAAA,EAAAA,KAAS,IAAM,EACtBJ,EAAAA,EAAAA,IAAaT,EAA4B,CACvCe,KAAM,qBACNC,MAAO,OACPC,MAAO,YAETR,EAAAA,EAAAA,IAAaT,EAA4B,CACvCe,KAAM,YACNC,MAAO,OACPC,MAAO,YAETR,EAAAA,EAAAA,IAAaT,EAA4B,CACvCe,KAAM,UACNC,MAAO,OACPC,MAAO,YAETR,EAAAA,EAAAA,IAAaT,EAA4B,CACvCgB,MAAO,KACPC,MAAO,SACN,CACDH,SAASD,EAAAA,EAAAA,KAAS,EAAGK,SAAU,CAC5BA,EAAIC,UACAd,EAAAA,EAAAA,OAAce,EAAAA,EAAAA,IAAalB,EAAsB,CAChDmB,IAAK,EACLC,KAAM,GACNC,KAAM,UACNC,QAAUC,GAAiBlC,EAAY2B,IACtC,CACDJ,SAASD,EAAAA,EAAAA,KAAS,IAAMd,EAAO,KAAOA,EAAO,GAAK,EAChD2B,EAAAA,EAAAA,IAAiB,UAEnBC,EAAG,GACF,KAAM,CAAC,cACVC,EAAAA,EAAAA,IAAoB,IAAI,MAE9BD,EAAG,OAGPA,EAAG,GACF,EAAG,CAAC,YAETlB,EAAAA,EAAAA,KAAaC,EAAAA,EAAAA,IAAO7C,GAAc,CAChCgE,QAAS,WACT1D,IAAKD,GACJ,KAAM,MACR,GAAG,CAER,IE7HA,MAAM4D,EAAc,EAEpB,O","sources":["webpack://daili/./src/components/order-management/create-order/application-center/service-list.vue?216d","webpack://daili/./src/components/order-management/create-order/application-center/service-list.vue","webpack://daili/./src/components/order-management/create-order/application-center/service-list.vue?6cf1"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"table-container\" }\n\nimport { ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\n\r\nimport { useVueRouter } from \"@assets/useHook\";\r\n\r\nimport { customerByProductApi } from \"@api/customer-management-api\";\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'service-list',\n  setup(__props) {\n\r\nconst RenewDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/order-management/create-order/application-center/renew-dialog.vue\"\r\n    )\r\n);\r\n\r\nconst { route, onBeforeRouteLeave } = useVueRouter();\r\nconst renewRef = ref();\r\nconst initData = shallowReactive<{\r\n  renewVisible: boolean;\r\n  productList: any[];\r\n  timer: any;\r\n}>({\r\n  renewVisible: false,\r\n  productList: [],\r\n  timer: null,\r\n});\r\n\r\n// 获取已购产品列表\r\nif (route.query.companyId) {\r\n  getProductList();\r\n} else {\r\n  initData.timer = setInterval(() => {\r\n    if (route.query.companyId) {\r\n      getProductList();\r\n      clearInterval(initData.timer);\r\n    }\r\n  }, 2000);\r\n}\r\nasync function getProductList() {\r\n  try {\r\n    const params = {\r\n      companyId: route.query.companyId,\r\n    };\r\n    const { data } = await customerByProductApi.getData(params);\r\n    initData.productList = customerByProductApi.handleData(data);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n}\r\n// 续费\r\nconst handleRenew = (info) => {\r\n  renewRef.value.toggle(true, Object.assign(info, { productType: \"service\" }));\r\n};\r\n\r\nonBeforeRouteLeave(() => {\r\n  clearInterval(initData.timer);\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_TableEmpty = _resolveComponent(\"TableEmpty\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_el_table, {\n        data: _unref(initData).productList,\n        height: \"calc(100vh - 280px)\"\n      }, {\n        empty: _withCtx(() => [\n          _createVNode(_component_TableEmpty, { \"empty-text\": \"暂无产品\" })\n        ]),\n        default: _withCtx(() => [\n          _createVNode(_component_el_table_column, {\n            prop: \"combineServiceName\",\n            label: \"产品名称\",\n            align: \"center\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"startTime\",\n            label: \"购买日期\",\n            align: \"center\"\n          }),\n          _createVNode(_component_el_table_column, {\n            prop: \"endTime\",\n            label: \"到期时间\",\n            align: \"center\"\n          }),\n          _createVNode(_component_el_table_column, {\n            label: \"操作\",\n            align: \"right\"\n          }, {\n            default: _withCtx(({ row }) => [\n              (row.isRenew)\n                ? (_openBlock(), _createBlock(_component_el_button, {\n                    key: 0,\n                    link: \"\",\n                    type: \"primary\",\n                    onClick: ($event: any) => (handleRenew(row))\n                  }, {\n                    default: _withCtx(() => _cache[0] || (_cache[0] = [\n                      _createTextVNode(\"续费\")\n                    ])),\n                    _: 2\n                  }, 1032, [\"onClick\"]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"data\"])\n    ]),\n    _createVNode(_unref(RenewDialog), {\n      ref_key: \"renewRef\",\n      ref: renewRef\n    }, null, 512)\n  ], 64))\n}\n}\n\n})","<template>\r\n  <div class=\"table-container\">\r\n    <el-table :data=\"initData.productList\" height=\"calc(100vh - 280px)\">\r\n      <el-table-column\r\n        prop=\"combineServiceName\"\r\n        label=\"产品名称\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        prop=\"startTime\"\r\n        label=\"购买日期\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column\r\n        prop=\"endTime\"\r\n        label=\"到期时间\"\r\n        align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column label=\"操作\" align=\"right\">\r\n        <template #default=\"{ row }\">\r\n          <el-button\r\n            v-if=\"row.isRenew\"\r\n            link\r\n            type=\"primary\"\r\n            @click=\"handleRenew(row)\"\r\n            >续费</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n      <template #empty>\r\n        <TableEmpty empty-text=\"暂无产品\"></TableEmpty>\r\n      </template>\r\n    </el-table>\r\n  </div>\r\n  <RenewDialog ref=\"renewRef\"></RenewDialog>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\n\r\nimport { useVueRouter } from \"@assets/useHook\";\r\n\r\nimport { customerByProductApi } from \"@api/customer-management-api\";\r\n\r\nconst RenewDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/order-management/create-order/application-center/renew-dialog.vue\"\r\n    )\r\n);\r\n\r\nconst { route, onBeforeRouteLeave } = useVueRouter();\r\nconst renewRef = ref();\r\nconst initData = shallowReactive<{\r\n  renewVisible: boolean;\r\n  productList: any[];\r\n  timer: any;\r\n}>({\r\n  renewVisible: false,\r\n  productList: [],\r\n  timer: null,\r\n});\r\n\r\n// 获取已购产品列表\r\nif (route.query.companyId) {\r\n  getProductList();\r\n} else {\r\n  initData.timer = setInterval(() => {\r\n    if (route.query.companyId) {\r\n      getProductList();\r\n      clearInterval(initData.timer);\r\n    }\r\n  }, 2000);\r\n}\r\nasync function getProductList() {\r\n  try {\r\n    const params = {\r\n      companyId: route.query.companyId,\r\n    };\r\n    const { data } = await customerByProductApi.getData(params);\r\n    initData.productList = customerByProductApi.handleData(data);\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n}\r\n// 续费\r\nconst handleRenew = (info) => {\r\n  renewRef.value.toggle(true, Object.assign(info, { productType: \"service\" }));\r\n};\r\n\r\nonBeforeRouteLeave(() => {\r\n  clearInterval(initData.timer);\r\n});\r\n</script>\r\n","import script from \"./service-list.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./service-list.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_defineComponent","__name","setup","__props","RenewDialog","defineAsyncComponent","route","onBeforeRouteLeave","useVueRouter","renewRef","ref","initData","shallowReactive","renewVisible","productList","timer","async","getProductList","params","companyId","query","data","customerByProductApi","getData","handleData","e","console","log","setInterval","clearInterval","handleRenew","info","value","toggle","Object","assign","productType","_ctx","_cache","_component_el_table_column","_resolveComponent","_component_el_button","_component_TableEmpty","_component_el_table","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","_unref","height","empty","_withCtx","default","prop","label","align","row","isRenew","_createBlock","key","link","type","onClick","$event","_createTextVNode","_","_createCommentVNode","ref_key","__exports__"],"sourceRoot":""}