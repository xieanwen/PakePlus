"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[7765],{67765:function(e,a,l){l.r(a),l.d(a,{default:function(){return b}});var t=l(6254),n=l(38627),u=l(25598),s=l(4662);const i={class:"call-statistics"},r={class:"form-container"},m={class:"search-box"},o={class:"text"},p={class:"table-container"};var d=(0,t.pM)({__name:"index",setup(e){const a=[{label:"系统客户",value:"0"},{label:"接口客户",value:"1"}],l=[{label:"本月",value:"1"},{label:"近7天",value:"2"},{label:"近30天",value:"3"},{label:"自定义时间",value:"4"}],d=[{label:"子客户维度统计",value:"0"},{label:"线路维度统计",value:"1"}],v=(0,u.KR)("1"),c=(0,u.KR)("0"),b=(0,u.KR)([]),g=(0,u.KR)("0"),T=(0,u.KR)(""),Y=(0,u.KR)("0"),y=new Date((new Date).setDate((new Date).getDate())),D=(0,u.Kh)({list:[],pageSize:10,pageNumber:1,pageTotal:0}),f=(0,u.Kh)({startTime:dayjs().startOf("month").format("YYYY-MM-DD"),endTime:dayjs().format("YYYY-MM-DD")}),k=async()=>{let e;const a={pageNo:D.pageNumber,pageSize:D.pageSize,startTime:f.startTime,endTime:f.endTime};"0"===g.value?(e=s._H,Reflect.set(a,"interfaceData","0")):(e=s.V7,Reflect.set(a,"businessType","1"),Reflect.set(a,"reportType",c.value));const{data:l}=await e.getData(a),{list:t,total:n}=e.handleData(l);D.list=t,D.pageTotal=n},h=e=>{w(),D.pageSize=e,k()},M=e=>{D.pageNumber=e,k()},C=()=>{D.pageSize=10},w=()=>{D.pageNumber=1},N=e=>{g.value=e.value,"1"===v.value&&("0"===g.value?(f.startTime=dayjs().startOf("month").format("YYYY-MM-DD"),f.endTime=dayjs().format("YYYY-MM-DD")):(f.startTime="",f.endTime="")),"0"===g.value&&(c.value="0"),C(),w(),k(),K()},F=()=>{C(),w(),k(),K()},K=async()=>{let e;const a={startTime:f.startTime,endTime:f.endTime};"0"===g.value?(e=s.l,Reflect.set(a,"interfaceData","0")):(e=s.yM,Reflect.set(a,"businessType","1"),Reflect.set(a,"reportType",c.value));const{data:l}=await e.getData(a),t=e.handleData(l);Y.value="0"===g.value?t.customer:l},R=()=>{switch(v.value){case"1":"0"===g.value?(f.startTime=dayjs().startOf("month").format("YYYY-MM-DD"),f.endTime=dayjs().format("YYYY-MM-DD")):(f.startTime="",f.endTime="");break;case"2":f.startTime=dayjs().subtract(7,"days").format("YYYY-MM-DD"),f.endTime=dayjs().format("YYYY-MM-DD");break;case"3":f.startTime=dayjs().subtract(30,"days").format("YYYY-MM-DD"),f.endTime=dayjs().format("YYYY-MM-DD");break;case"4":f.startTime=f.endTime="";break}"4"!==v.value&&(C(),w(),k(),K())},x=()=>{b.value&&b.value.length>0?(f.startTime=b.value[0],f.endTime=b.value[1]):f.startTime=f.endTime="",C(),w(),k(),K()},z=([e,a])=>{T.value=e,a&&(T.value="")},S=e=>{let a=e.getTime();if(T.value){const e=_.cloneDeep(T.value),l=_.cloneDeep(T.value),t=new Date(e.setDate(e.getDate()+90)),n=new Date(l.setDate(l.getDate()-90));return!(a>n.getTime()&&a<t.getTime()&&a<y.getTime())}return!(a<y.getTime())};return k(),K(),(e,u)=>{const s=(0,t.g2)("TabList"),T=(0,t.g2)("el-option"),y=(0,t.g2)("el-select"),f=(0,t.g2)("el-date-picker"),k=(0,t.g2)("el-table-column"),C=(0,t.g2)("TableEmpty"),w=(0,t.g2)("el-table"),K=(0,t.g2)("PagePagination");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.Lk)("div",r,[(0,t.bF)(s,{list:a,activeIndex:g.value,onEmitTab:N},null,8,["activeIndex"]),(0,t.Lk)("div",m,[u[3]||(u[3]=(0,t.Lk)("span",{class:"label"},"时间筛选：",-1)),(0,t.bF)(y,{placeholder:"时间筛选",modelValue:v.value,"onUpdate:modelValue":u[0]||(u[0]=e=>v.value=e),onChange:R},{default:(0,t.k6)((()=>[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(l,(e=>(0,t.bF)(T,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"]),"4"===v.value?((0,t.uX)(),(0,t.Wv)(f,{key:0,modelValue:b.value,"onUpdate:modelValue":u[1]||(u[1]=e=>b.value=e),onChange:x,clearable:"",type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":S,onCalendarChange:z},null,8,["modelValue"])):(0,t.Q3)("",!0),"1"===g.value?((0,t.uX)(),(0,t.Wv)(y,{key:1,modelValue:c.value,"onUpdate:modelValue":u[2]||(u[2]=e=>c.value=e),onChange:F},{default:(0,t.k6)((()=>[((0,t.uX)(),(0,t.CE)(t.FK,null,(0,t.pI)(d,(e=>(0,t.bF)(T,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])):(0,t.Q3)("",!0),(0,t.Lk)("span",o,"消耗总分钟数："+(0,n.v_)(Y.value)+"分钟",1)])]),(0,t.Lk)("div",p,[(0,t.bF)(w,{data:D.list,height:"calc(100vh - 260px)"},{empty:(0,t.k6)((()=>[(0,t.bF)(C,{"empty-text":"暂无数据"})])),default:(0,t.k6)((()=>[(0,t.bF)(k,{align:"center",prop:"date",key:"date",label:"日期",width:"250px"}),"1"===c.value?((0,t.uX)(),(0,t.Wv)(k,{align:"center",prop:"businessTypeName",key:"businessTypeName",label:"线路类型",width:"250px"})):(0,t.Q3)("",!0),"1"===c.value?((0,t.uX)(),(0,t.Wv)(k,{align:"center",prop:"price",key:"price",label:"线路单价（元/分钟）",width:"250px"})):(0,t.Q3)("",!0),"0"===c.value?((0,t.uX)(),(0,t.Wv)(k,{align:"center",prop:"companyName",key:"companyName",label:"企业名称",width:"250px"})):(0,t.Q3)("",!0),"0"===c.value?((0,t.uX)(),(0,t.Wv)(k,{align:"center",prop:"companyCode",key:"companyCode",label:"企业代码"})):(0,t.Q3)("",!0),(0,t.bF)(k,{align:"center",prop:"appKey",key:"appKey",label:"唯一标识码"}),(0,t.bF)(k,{align:"center",prop:"timeConsume",key:"timeConsume",label:"通话分钟数"}),"0"===c.value?((0,t.uX)(),(0,t.Wv)(k,{align:"center",prop:"seatSize",key:"seatSize",label:"总坐席数"})):(0,t.Q3)("",!0)])),_:1},8,["data"]),(0,t.bF)(K,{pageSize:D.pageSize,pageNumber:D.pageNumber,pageTotal:D.pageTotal,onEmitPageSizeChange:h,onEmitPageNumberChange:M},null,8,["pageSize","pageNumber","pageTotal"])])])}}}),v=l(83936);const c=(0,v.A)(d,[["__scopeId","data-v-268dc113"]]);var b=c}}]);
//# sourceMappingURL=7765.6ef005c6.js.map