{"version":3,"file":"static/js/3138.c78dfc48.js","mappings":"oSAGA,MAAMA,EAAa,CAAEC,MAAO,UACtBC,EAAa,CAAED,MAAO,kBACtBE,EAAa,CAAEF,MAAO,cACtBG,EAAa,CAAEH,MAAO,mBAkB5B,OAA4BI,EAAAA,EAAAA,IAAiB,CAE3CC,KAAM,iDAENC,OAAQ,OACRC,KAAAA,CAAMC,GC2LR,MAAMC,GAAsBC,EAAAA,EAAAA,KAC1B,IACE,kCAIEC,GAAqBD,EAAAA,EAAAA,KACzB,IACE,2DAIEE,GAAsBF,EAAAA,EAAAA,KAC1B,IACE,0DAIEG,GAAqBH,EAAAA,EAAAA,KACzB,IACE,2DAIEI,GAAuBJ,EAAAA,EAAAA,KAC3B,IACE,kCAIEK,GAAsBL,EAAAA,EAAAA,KAC1B,IACE,4DASE,OAAEM,IAAWC,EAAAA,EAAAA,OAEjBC,YAAaC,EACbC,gBAAiBC,EACjBC,sBAAuBC,GACrBC,EAAAA,GAAaC,aAAa,CAC5B,cACA,kBACA,0BAEIC,GAAcC,EAAAA,EAAAA,IAAI,IAClBC,GAAkBD,EAAAA,EAAAA,MAClBE,GAAkBF,EAAAA,EAAAA,MAClBG,GAAmBH,EAAAA,EAAAA,MACnBI,GAAmBJ,EAAAA,EAAAA,MACnBK,GAAoBL,EAAAA,EAAAA,MACpBM,GAAmBN,EAAAA,EAAAA,MAGnBO,GAAaC,EAAAA,EAAAA,IAAgB,CACjCC,GAAI,GACJC,UAAW,GACXC,YAAa,GACbC,YAAa,GACbC,aAAc,KAEVC,GAAaN,EAAAA,EAAAA,IAAgB,CACjCO,OAAQ,GACRC,UAAW,GACXN,UAAWhB,EACXuB,QAASzB,EAAS0B,aAGd,QAAEC,EAAO,iBAAEC,EAAgB,eAAEC,EAAc,SAAEC,EAAQ,gBAAEC,IAC3DC,EAAAA,EAAAA,IAAQ,CACNC,QAASC,EAAAA,GACTC,MAAO,CACLC,SAAU,OACVC,WAAY,WAEdf,eAGEgB,EAAeA,KACnBP,IACAJ,GAAS,EAILY,EAAYC,IAChBjC,EAAYiC,MAAQA,EAAMA,MAC1BlB,EAAWC,OAASiB,EAAMA,MAC1Bb,GAAS,EAGX,SAASc,EAAaC,GACJ,MAAZA,EAEF/B,EAAiB6B,MAAMG,SAAQ,EAAM,GAChB,MAAZD,GACThC,EAAgB8B,MAAMG,SAAQ,EAAM,CAClCC,KAAM,OAGZ,CAGA,SAASC,EAAmBC,GAC1B/B,EAAWE,GAAK6B,EAAK7B,GACrBF,EAAWK,YAAc0B,EAAKtB,UAC9BT,EAAWI,YAAc2B,EAAKC,oBAC9BhC,EAAWG,UAAY4B,EAAKE,mBAAqBF,EAAK5B,UAC9B,IAApB4B,EAAKG,WAEPpD,EAAO,CACLqD,KAAM,oDACNC,MAAOpC,IAITN,EAAgB+B,MAAMG,SAAQ,EAAM5B,EAExC,CAGA,SAASqC,EAAoBC,GAIT,QAAdA,EAAKT,KACPhC,EAAiB4B,MAAMG,SAAQ,EAAMU,EAAKT,KAAMS,EAAKP,MAC9B,SAAdO,EAAKT,OACd7B,EAAWE,GAAKoC,EAAKP,KAAK7B,GAC1BF,EAAWK,YAAciC,EAAKP,KAAKtB,UACnCT,EAAWG,UAAYmC,EAAKP,KAAKE,mBAAqBK,EAAKP,KAAK5B,UAChEH,EAAWI,YAAckC,EAAKP,KAAKC,oBACnChC,EAAWM,aAAegC,EAAKP,KAAKzB,aACP,IAAzBgC,EAAKP,KAAKG,WACZrC,EAAiB4B,MAAMG,SAAQ,EAAMU,EAAKT,KAAM7B,GAEhDL,EAAgB8B,MAAMG,SAAQ,EAAM,CAClCC,KAAM,OACNE,KAAM/B,IAId,CAKA,SAASuC,EAAgBD,GAIvB,GAAkB,SAAdA,EAAKT,KACPjB,SACK,GAAkB,oBAAd0B,EAAKT,KACdlC,EAAgB8B,MAAMG,SAAQ,EAAM,CAClCC,KAAM,OACNE,KAAMO,EAAKP,OAEblC,EAAiB4B,MAAMG,SAAQ,EAAO,GAAI,CACxC1B,GAAI,GACJC,UAAW,GACXE,YAAa,UAEV,GAAkB,kBAAdiC,EAAKT,KAA0B,KAAAW,EAAAC,EACxCzC,EAAWE,IAAc,QAATsC,EAAAF,EAAKP,YAAI,IAAAS,OAAA,EAATA,EAAWtC,KAAM,GACjCF,EAAWG,WAAqB,QAATsC,EAAAH,EAAKP,YAAI,IAAAU,OAAA,EAATA,EAAWtC,YAAa,GAC/CN,EAAiB4B,MAAMG,SAAQ,EAAM,OAAQ5B,GAC7CL,EAAgB8B,MAAMG,SAAQ,EAAO,CACnCC,KAAM,GACNE,KAAM,CACJ7B,GAAI,GACJC,UAAW,GACXE,YAAa,KAGnB,CACF,CAgFA,SAASqC,EAAmBC,GAC1B7C,EAAkB2B,MAAMG,SAAQ,EAAM,MAAOe,EAC/C,CAGA,SAASC,EAAkBD,GACzB5C,EAAiB0B,MAAMG,SAAQ,EAAMe,EACvC,CAGA,SAASE,EAASF,EAAKG,GACrBhD,EAAkB2B,MAAMG,SAAQ,EAAM,OAAQe,EAAKG,EACrD,CDzLA,MAAO,CAACC,EAAUC,KAChB,MAAMC,GAAqBC,EAAAA,EAAAA,IAAkB,WACvCC,GAAqBD,EAAAA,EAAAA,IAAkB,WACvCE,GAAuBF,EAAAA,EAAAA,IAAkB,aACzCG,GAA8BH,EAAAA,EAAAA,IAAkB,oBAChDI,GAA8BJ,EAAAA,EAAAA,IAAkB,oBAChDK,GAAyBL,EAAAA,EAAAA,IAAkB,eAC3CM,GAA6BN,EAAAA,EAAAA,IAAkB,mBAC/CO,GAAoBP,EAAAA,EAAAA,IAAkB,UACtCQ,GAAqBR,EAAAA,EAAAA,IAAkB,WACvCS,GAAwBT,EAAAA,EAAAA,IAAkB,cAC1CU,GAAsBV,EAAAA,EAAAA,IAAkB,YACxCW,GAA4BX,EAAAA,EAAAA,IAAkB,kBAEpD,OAAQY,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,MAAOlG,EAAY,EAC3DmG,EAAAA,EAAAA,IAAoB,MAAOjG,EAAY,EACrCkG,EAAAA,EAAAA,IAAahB,EAAoB,CAC/BiB,UAAW1C,EACX2C,MAAMC,EAAAA,EAAAA,IAAOC,EAAAA,GAAPD,EAAmB,GAAMA,EAAAA,EAAAA,IAAOE,EAAAA,KACtC9E,YAAaA,EAAYiC,OACxB,KAAM,EAAG,CAAC,OAAQ,iBACrBuC,EAAAA,EAAAA,IAAoB,MAAOhG,EAAY,EACrCiG,EAAAA,EAAAA,KAAaG,EAAAA,EAAAA,IAAOG,EAAAA,IAAU,CAC5BC,SAASC,EAAAA,EAAAA,IAAUlD,EAAc,CAAC,UAClCmD,YAAYN,EAAAA,EAAAA,IAAO7D,GAAYE,UAC/B,sBAAuBuC,EAAO,KAAOA,EAAO,GAAM2B,IAAkBP,EAAAA,EAAAA,IAAO7D,GAAYE,UAAakE,GACpGC,YAAa,kBACZ,CACDC,QAAQC,EAAAA,EAAAA,KAAS,IAAM,EACrBb,EAAAA,EAAAA,IAAad,EAAoB,CAAE4B,QAASxD,GAAgB,CAC1DyD,SAASF,EAAAA,EAAAA,KAAS,IAAM,EACtBb,EAAAA,EAAAA,KAAaG,EAAAA,EAAAA,IAAOa,EAAAA,SAEtBC,EAAG,OAGPA,EAAG,GACF,EAAG,CAAC,gBACPjB,EAAAA,EAAAA,IAAaV,EAAwB,CAAE4B,UAAWzD,GAAgB,CAChE0D,UAAUN,EAAAA,EAAAA,KAAS,IAAM,EACvBb,EAAAA,EAAAA,IAAaX,EAA6B,KAAM,CAC9C0B,SAASF,EAAAA,EAAAA,KAAS,IAAM,CACU,KAA/BV,EAAAA,EAAAA,IAAO/E,KACHyE,EAAAA,EAAAA,OAAcuB,EAAAA,EAAAA,IAAahC,EAA6B,CACvDiC,IAAK,EACL3D,QAAS,KACR,CACDqD,SAASF,EAAAA,EAAAA,KAAS,IAAM9B,EAAO,KAAOA,EAAO,GAAK,EAChDuC,EAAAA,EAAAA,IAAiB,YAEnBL,EAAG,MAELM,EAAAA,EAAAA,IAAoB,IAAI,IAC5BvB,EAAAA,EAAAA,IAAaZ,EAA6B,CAAE1B,QAAS,KAAO,CAC1DqD,SAASF,EAAAA,EAAAA,KAAS,IAAM9B,EAAO,KAAOA,EAAO,GAAK,EAChDuC,EAAAA,EAAAA,IAAiB,aAEnBL,EAAG,OAGPA,EAAG,OAGPF,SAASF,EAAAA,EAAAA,KAAS,IAAM,EACtBb,EAAAA,EAAAA,IAAab,EAAsB,CAAEvB,KAAM,WAAa,CACtDmD,SAASF,EAAAA,EAAAA,KAAS,IAAM9B,EAAO,KAAOA,EAAO,GAAK,EAChDuC,EAAAA,EAAAA,IAAiB,YAEnBL,EAAG,OAGPA,EAAG,SAITlB,EAAAA,EAAAA,IAAoB,MAAO/F,EAAY,EACrCgG,EAAAA,EAAAA,IAAaL,EAAqB,CAChCtB,MAAM8B,EAAAA,EAAAA,IAAOrD,GAAUoD,KACvBsB,OAAQ,uBACP,CACDC,OAAOZ,EAAAA,EAAAA,KAAS,IAAM,EACpBb,EAAAA,EAAAA,IAAaN,EAAuB,CAAE,aAAc,YAEtDqB,SAASF,EAAAA,EAAAA,KAAS,IAAM,EACtBb,EAAAA,EAAAA,IAAaT,EAA4B,CACvCmC,MAAO,SACPC,KAAM,YACNC,MAAO,OACPC,MAAO,WAET7B,EAAAA,EAAAA,IAAaT,EAA4B,CACvCmC,MAAO,SACPC,KAAM,cACNC,MAAO,SACPC,MAAO,WAET7B,EAAAA,EAAAA,IAAaT,EAA4B,CACvCmC,MAAO,SACPC,KAAM,mBACNC,MAAO,SACPC,MAAO,WAET7B,EAAAA,EAAAA,IAAaT,EAA4B,CACvCmC,MAAO,OACPC,KAAM,SACNC,MAAO,KACPC,MAAO,QACP,aAAc,oBACb,CACDd,SAASF,EAAAA,EAAAA,KAAS,EAAGnC,SAAU,CAC3B,CAAC,EAAG,GAAGoD,SAASpD,EAAIqD,iBAKjBlC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAAQ,CACzCuB,IAAK,EACLxH,OAAOmI,EAAAA,EAAAA,IAAgB,CAAC,eAAgBtD,EAAIuD,gBAC3CC,EAAAA,EAAAA,IAAiBxD,EAAIyD,oBAAqB,MAP5CtC,EAAAA,EAAAA,OAAcC,EAAAA,EAAAA,IAAoB,OAAQ,CACzCuB,IAAK,EACLxH,OAAOmI,EAAAA,EAAAA,IAAgB,CAAC,eAAgBtD,EAAIuD,gBAC3CC,EAAAA,EAAAA,IAAiBxD,EAAI0D,aAAc,IAKnB,IAAtB1D,EAAIqD,eAA8C,MAAvBrD,EAAI2D,iBAC3BxC,EAAAA,EAAAA,OAAcuB,EAAAA,EAAAA,IAAa5B,EAAmB,CAC7C6B,IAAK,EACLzD,KAAMc,EAAI4D,mBACVC,OAAQ,OACRC,KAAM,SACL,CACDzB,SAASF,EAAAA,EAAAA,KAAS,IAAM,EACtBS,EAAAA,EAAAA,KAAiBY,EAAAA,EAAAA,IAAiBxD,EAAI+D,oBAAqB,MAE7DxB,EAAG,GACF,KAAM,CAAC,WACVM,EAAAA,EAAAA,IAAoB,IAAI,MAE9BN,EAAG,KAELjB,EAAAA,EAAAA,IAAaT,EAA4B,CACvCmC,MAAO,SACPC,KAAM,cACNC,MAAO,OACPC,MAAO,WAET7B,EAAAA,EAAAA,IAAaT,EAA4B,CACvCmC,MAAO,SACPC,KAAM,OACNC,MAAO,QACPC,MAAO,WAET7B,EAAAA,EAAAA,IAAaT,EAA4B,CACvCmC,MAAO,SACPC,KAAM,KACNC,MAAO,OACPC,MAAO,WAET7B,EAAAA,EAAAA,IAAaT,EAA4B,CACvCmC,MAAO,SACPE,MAAO,KACPC,MAAO,QACPa,MAAO,QACP,aAAc,mBACb,CACD3B,SAASF,EAAAA,EAAAA,KAAS,EAAGnC,SAAU,EAC7BsB,EAAAA,EAAAA,IAAaP,EAAoB,CAC/BkD,WAAW,EACX/E,KAAM,UACNkD,QAAUJ,GAAiB7C,EAAmBa,IAC7C,CACDqC,SAASF,EAAAA,EAAAA,KAAS,IAAM9B,EAAO,KAAOA,EAAO,GAAK,EAChDuC,EAAAA,EAAAA,IAAiB,WAEnBL,EAAG,GACF,KAAM,CAAC,YACT,CAAC,IAAK,KAAKa,SAASpD,EAAInC,UACpBsD,EAAAA,EAAAA,OAAcuB,EAAAA,EAAAA,IAAa3B,EAAoB,CAC9C4B,IAAK,EACLsB,WAAW,EACX/E,KAAM,UACNkD,QAAUJ,GAAiBtC,EAAoB,CAAER,KAAM,OAAQE,KAAMY,KACpE,CACDqC,SAASF,EAAAA,EAAAA,KAAS,IAAM9B,EAAO,KAAOA,EAAO,GAAK,EAChDuC,EAAAA,EAAAA,IAAiB,aAEnBL,EAAG,GACF,KAAM,CAAC,cACVM,EAAAA,EAAAA,IAAoB,IAAI,GACL,IAAtB7C,EAAIqD,eAA8C,MAAvBrD,EAAI2D,iBAC3BxC,EAAAA,EAAAA,OAAcuB,EAAAA,EAAAA,IAAa3B,EAAoB,CAC9C4B,IAAK,EACLsB,WAAW,EACX/E,KAAM,UACNkD,QAAUJ,GAAiBjC,EAAmBC,IAC7C,CACDqC,SAASF,EAAAA,EAAAA,KAAS,IAAM9B,EAAO,KAAOA,EAAO,GAAK,EAChDuC,EAAAA,EAAAA,IAAiB,YAEnBL,EAAG,GACF,KAAM,CAAC,cACVM,EAAAA,EAAAA,IAAoB,IAAI,GAEJ,IAAtB7C,EAAIqD,eACmB,MAAvBrD,EAAI2D,gBAC2B,IAA/BO,OAAOlE,EAAI2D,kBAERxC,EAAAA,EAAAA,OAAcuB,EAAAA,EAAAA,IAAa3B,EAAoB,CAC9C4B,IAAK,EACLsB,WAAW,EACX/E,KAAM,UACNkD,QAAUJ,GAAiB/B,EAAkBD,IAC5C,CACDqC,SAASF,EAAAA,EAAAA,KAAS,IAAM9B,EAAO,KAAOA,EAAO,GAAK,EAChDuC,EAAAA,EAAAA,IAAiB,YAEnBL,EAAG,GACF,KAAM,CAAC,cACVM,EAAAA,EAAAA,IAAoB,IAAI,MAE9BN,EAAG,OAGPA,EAAG,GACF,EAAG,CAAC,UACPjB,EAAAA,EAAAA,IAAaJ,EAA2B,CACtCiD,WAAW1C,EAAAA,EAAAA,IAAOrD,GAAU+F,UAC5BzF,UAAU+C,EAAAA,EAAAA,IAAOrD,GAAUM,SAC3BC,YAAY8C,EAAAA,EAAAA,IAAOrD,GAAUO,WAC7ByF,sBAAsB3C,EAAAA,EAAAA,IAAOtD,GAC7BkG,wBAAwB5C,EAAAA,EAAAA,IAAOvD,IAC9B,KAAM,EAAG,CAAC,YAAa,WAAY,aAAc,uBAAwB,8BAE9EoD,EAAAA,EAAAA,KAAaG,EAAAA,EAAAA,IAAOzF,GAAqB,CACvCsI,QAAS,kBACTxH,IAAKE,GACJ,KAAM,MACTsE,EAAAA,EAAAA,KAAaG,EAAAA,EAAAA,IAAO1F,GAAsB,CACxCuI,QAAS,mBACTxH,IAAKG,EACLsH,WAAY7E,GACX,KAAM,MACT4B,EAAAA,EAAAA,KAAaG,EAAAA,EAAAA,IAAO7F,GAAsB,CACxC0I,QAAS,mBACTxH,IAAKI,EACLqH,WAAY3E,GACX,KAAM,MACT0B,EAAAA,EAAAA,KAAaG,EAAAA,EAAAA,IAAO3F,GAAqB,CACvCwI,QAAS,kBACTxH,IAAKC,GACJ,KAAM,MACTuE,EAAAA,EAAAA,KAAaG,EAAAA,EAAAA,IAAOxF,GAAuB,CACzCqI,QAAS,oBACTxH,IAAKK,EACLoH,WAAY3E,GACX,KAAM,MACT0B,EAAAA,EAAAA,KAAaG,EAAAA,EAAAA,IAAOvF,GAAsB,CACxCoI,QAAS,mBACTxH,IAAKM,EACLoH,WAAYtE,GACX,KAAM,MACT,CAEJ,I,WE5iBA,MAAMuE,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://daili/./src/views/business-management/osprey-cloud-call/report/list.vue?0e1c","webpack://daili/./src/views/business-management/osprey-cloud-call/report/list.vue","webpack://daili/./src/views/business-management/osprey-cloud-call/report/list.vue?abb4"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, withKeys as _withKeys, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"report\" }\nconst _hoisted_2 = { class: \"form-container\" }\nconst _hoisted_3 = { class: \"search-box\" }\nconst _hoisted_4 = { class: \"table-container\" }\n\nimport { h, ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\nimport { ElInput, ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { Search } from \"@element-plus/icons-vue\";\r\n\r\nimport { usePage, LocalStorage } from \"jz-tool-lib\";\r\nimport { concatList } from \"@assets/common\";\r\nimport { useVueRouter } from \"@/assets/useHook\";\r\nimport { reportReviewStatusList } from \"@/assets/typeStatus\";\r\n\r\nimport {\r\n  reportApi,\r\n  reportingAcceptApi,\r\n  reportingRejectApi,\r\n} from \"@/api/business-management-api\";\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  ...{\r\n  name: \"businessManagement.ospreyCloudCall.report.list\",\r\n},\n  __name: 'list',\n  setup(__props) {\n\r\nconst AddEditReportDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/add-edit-report-drawer.vue\"\r\n    )\r\n);\r\nconst DetailReportDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/detail-report-drawer.vue\"\r\n    )\r\n);\r\nconst SelectCompanyDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/select-company-dialog.vue\"\r\n    )\r\n);\r\nconst ReportQRCodeDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/report-QRCode-dialog.vue\"\r\n    )\r\n);\r\nconst SupplementInfoDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/supplement-info-drawer.vue\"\r\n    )\r\n);\r\nconst SupplementLogDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/supplement-log-drawer.vue\"\r\n    )\r\n);\r\n\r\n\r\n\r\nconst { goPage } = useVueRouter();\r\nconst {\r\n  bd_userInfo: userInfo,\r\n  bd_virCompanyId: virCompanyId,\r\n  bd_existCallInterface: existCallInterface,\r\n} = LocalStorage.batchGetItem([\r\n  \"bd_userInfo\",\r\n  \"bd_virCompanyId\",\r\n  \"bd_existCallInterface\",\r\n]);\r\nconst activeIndex = ref(\"\"); // 审核状态\r\nconst detailReportRef = ref();\r\nconst reportQRCodeRef = ref();\r\nconst selectCompanyRef = ref();\r\nconst addEditReportRef = ref();\r\nconst supplementInfoRef = ref();\r\nconst supplementLogRef = ref();\r\n\r\n// 列表某一项报备信息\r\nconst reportInfo = shallowReactive({\r\n  id: \"\",\r\n  companyId: \"\",\r\n  companyCode: \"\",\r\n  companyName: \"\",\r\n  businessType: \"\",\r\n});\r\nconst paramsData = shallowReactive({\r\n  status: \"\",\r\n  applyName: \"\",\r\n  companyId: virCompanyId,\r\n  agentId: userInfo.profileId,\r\n});\r\n\r\nconst { getList, pageNumberChange, pageSizeChange, pageData, resetPageNumber } =\r\n  usePage({\r\n    listApi: reportApi,\r\n    props: {\r\n      pageSize: \"size\",\r\n      pageNumber: \"current\",\r\n    },\r\n    paramsData,\r\n  });\r\n\r\nconst handleSearch = () => {\r\n  resetPageNumber();\r\n  getList();\r\n};\r\n\r\n// tab 点击\r\nconst tabClick = (value) => {\r\n  activeIndex.value = value.value;\r\n  paramsData.status = value.value;\r\n  getList();\r\n};\r\n\r\nfunction handleReport(command) {\r\n  if (command === \"a\") {\r\n    // 打开选择公司弹窗\r\n    selectCompanyRef.value.trigger(true, 1);\r\n  } else if (command === \"b\") {\r\n    reportQRCodeRef.value.trigger(true, {\r\n      type: \"add\",\r\n    });\r\n  }\r\n}\r\n\r\n// 查看报备\r\nfunction handleDetailReport(info) {\r\n  reportInfo.id = info.id;\r\n  reportInfo.companyName = info.applyName;\r\n  reportInfo.companyCode = info.agentSubCompanyCode;\r\n  reportInfo.companyId = info.agentSubCompanyId ?? info.companyId;\r\n  if (info.sourceType === 1) {\r\n    // 电子化\r\n    goPage({\r\n      path: \"/businessManagement/ospreyCloudCall/report/detail\",\r\n      query: reportInfo,\r\n    });\r\n  } else {\r\n    // 手动\r\n    detailReportRef.value.trigger(true, reportInfo);\r\n  }\r\n}\r\n\r\n// 新增、编辑报备\r\nfunction handleAddEditReport(data: {\r\n  type: \"add\" | \"edit\";\r\n  info: Record<string, any>;\r\n}) {\r\n  if (data.type === \"add\") {\r\n    addEditReportRef.value.trigger(true, data.type, data.info);\r\n  } else if (data.type === \"edit\") {\r\n    reportInfo.id = data.info.id;\r\n    reportInfo.companyName = data.info.applyName;\r\n    reportInfo.companyId = data.info.agentSubCompanyId ?? data.info.companyId;\r\n    reportInfo.companyCode = data.info.agentSubCompanyCode;\r\n    reportInfo.businessType = data.info.businessType;\r\n    if (data.info.sourceType === 0) {\r\n      addEditReportRef.value.trigger(true, data.type, reportInfo);\r\n    } else {\r\n      reportQRCodeRef.value.trigger(true, {\r\n        type: \"edit\",\r\n        info: reportInfo,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/*\r\n * type list:刷新列表\r\n * */\r\nfunction receiveCallBack(data: {\r\n  type: \"list\" | \"report-electron\" | \"report-manual\";\r\n  info: Record<string, any>;\r\n}) {\r\n  if (data.type === \"list\") {\r\n    getList();\r\n  } else if (data.type === \"report-electron\") {\r\n    reportQRCodeRef.value.trigger(true, {\r\n      type: \"edit\",\r\n      info: data.info,\r\n    });\r\n    addEditReportRef.value.trigger(false, \"\", {\r\n      id: \"\",\r\n      companyId: \"\",\r\n      companyName: \"\",\r\n    });\r\n  } else if (data.type === \"report-manual\") {\r\n    reportInfo.id = data.info?.id ?? \"\";\r\n    reportInfo.companyId = data.info?.companyId ?? \"\";\r\n    addEditReportRef.value.trigger(true, \"edit\", reportInfo);\r\n    reportQRCodeRef.value.trigger(false, {\r\n      type: \"\",\r\n      info: {\r\n        id: \"\",\r\n        companyId: \"\",\r\n        companyName: \"\",\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\n// 报备审核\r\nfunction handleAuditReport(\r\n  type: \"accept\" | \"reject\",\r\n  info: Record<string, any>\r\n) {\r\n  const operateInfo = {\r\n    type,\r\n    text: type === \"accept\" ? \"审核通过\" : \"审核驳回\",\r\n  };\r\n  reconfirm(operateInfo, async function (reason: string) {\r\n    const params = {\r\n      id: info.id,\r\n      profileId: 0,\r\n      [type === \"accept\" ? \"remark\" : \"rejectCause\"]: reason,\r\n    };\r\n    await (type === \"accept\" ? reportingAcceptApi : reportingRejectApi).getData(\r\n      params\r\n    );\r\n    ElMessage.success(operateInfo.text);\r\n    await getList();\r\n  });\r\n}\r\n// 在次确认\r\nfunction reconfirm(\r\n  operateInfo: Record<string, any>,\r\n  callback: (reason: string) => Promise<void>\r\n) {\r\n  const reason = ref(\"\");\r\n  const prompt =\r\n    operateInfo.type === \"accept\"\r\n      ? `请输入${operateInfo.text}备注`\r\n      : `请输入${operateInfo.text}原因`;\r\n  ElMessageBox({\r\n    title: `${operateInfo.text}`,\r\n    message: () =>\r\n      h(\r\n        \"div\",\r\n        {\r\n          style: { width: \"398px\", padding: \"5px\" },\r\n        },\r\n        [\r\n          h(\"p\", {\r\n            innerHTML: `是否确认${operateInfo.text}？`,\r\n            style: { color: \"#0056ff\", fontSize: \"15px\", marginBottom: \"10px\" },\r\n          }),\r\n          h(ElInput, {\r\n            type: \"textarea\",\r\n            rows: 3,\r\n            maxlength: 50,\r\n            showWordLimit: true,\r\n            placeholder: prompt,\r\n            modelValue: reason.value,\r\n            \"onUpdate:modelValue\": (val: string) => {\r\n              reason.value = val;\r\n            },\r\n          }),\r\n        ]\r\n      ),\r\n    beforeClose: (action, instance, done) => {\r\n      if (action === \"confirm\") {\r\n        if (!reason.value && operateInfo.type === \"reject\") {\r\n          ElMessage.warning(prompt);\r\n          return;\r\n        }\r\n        done();\r\n      } else {\r\n        done();\r\n      }\r\n    },\r\n    showCancelButton: true,\r\n  })\r\n    .then(() => {\r\n      callback && typeof callback === \"function\" && callback(reason.value);\r\n    })\r\n    .catch(() => {});\r\n}\r\n\r\n/** 点击补充资料 **/\r\nfunction showSupplementInfo(row) {\r\n  supplementInfoRef.value.trigger(true, \"add\", row);\r\n}\r\n\r\n/** 点击补充记录 **/\r\nfunction showSupplementLog(row) {\r\n  supplementLogRef.value.trigger(true, row);\r\n}\r\n\r\n// 补充记录里重新提交\r\nfunction reSubmit(row, item) {\r\n  supplementInfoRef.value.trigger(true, \"edit\", row, item);\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TabList = _resolveComponent(\"TabList\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dropdown_item = _resolveComponent(\"el-dropdown-item\")!\n  const _component_el_dropdown_menu = _resolveComponent(\"el-dropdown-menu\")!\n  const _component_el_dropdown = _resolveComponent(\"el-dropdown\")!\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_link = _resolveComponent(\"el-link\")!\n  const _component_TableEmpty = _resolveComponent(\"TableEmpty\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_PagePagination = _resolveComponent(\"PagePagination\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createVNode(_component_TabList, {\n        onEmitTab: tabClick,\n        list: _unref(concatList)(true, _unref(reportReviewStatusList)),\n        activeIndex: activeIndex.value\n      }, null, 8, [\"list\", \"activeIndex\"]),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createVNode(_unref(ElInput), {\n          onKeyup: _withKeys(handleSearch, [\"enter\"]),\n          modelValue: _unref(paramsData).applyName,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(paramsData).applyName) = $event)),\n          placeholder: \"请输入公司名称/公司code\"\n        }, {\n          suffix: _withCtx(() => [\n            _createVNode(_component_el_icon, { onClick: handleSearch }, {\n              default: _withCtx(() => [\n                _createVNode(_unref(Search))\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"]),\n        _createVNode(_component_el_dropdown, { onCommand: handleReport }, {\n          dropdown: _withCtx(() => [\n            _createVNode(_component_el_dropdown_menu, null, {\n              default: _withCtx(() => [\n                (_unref(existCallInterface) !== 0)\n                  ? (_openBlock(), _createBlock(_component_el_dropdown_item, {\n                      key: 0,\n                      command: \"a\"\n                    }, {\n                      default: _withCtx(() => _cache[2] || (_cache[2] = [\n                        _createTextVNode(\"手动报备\")\n                      ])),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_el_dropdown_item, { command: \"b\" }, {\n                  default: _withCtx(() => _cache[3] || (_cache[3] = [\n                    _createTextVNode(\"电子化报备\")\n                  ])),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          default: _withCtx(() => [\n            _createVNode(_component_el_button, { type: \"primary\" }, {\n              default: _withCtx(() => _cache[1] || (_cache[1] = [\n                _createTextVNode(\"业务报备\")\n              ])),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ])\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createVNode(_component_el_table, {\n        data: _unref(pageData).list,\n        height: \"calc(100vh - 260px)\"\n      }, {\n        empty: _withCtx(() => [\n          _createVNode(_component_TableEmpty, { \"empty-text\": \"暂无数据\" })\n        ]),\n        default: _withCtx(() => [\n          _createVNode(_component_el_table_column, {\n            align: \"center\",\n            prop: \"applyName\",\n            label: \"企业名称\",\n            width: \"250px\"\n          }),\n          _createVNode(_component_el_table_column, {\n            align: \"center\",\n            prop: \"companyCode\",\n            label: \"企业code\",\n            width: \"250px\"\n          }),\n          _createVNode(_component_el_table_column, {\n            align: \"center\",\n            prop: \"businessTypeName\",\n            label: \"业务开展方式\",\n            width: \"250px\"\n          }),\n          _createVNode(_component_el_table_column, {\n            align: \"left\",\n            prop: \"status\",\n            label: \"状态\",\n            width: \"250px\",\n            \"class-name\": \"audit-status-box\"\n          }, {\n            default: _withCtx(({ row }) => [\n              (![5, 6].includes(row.recheckStatus))\n                ? (_openBlock(), _createElementBlock(\"span\", {\n                    key: 0,\n                    class: _normalizeClass(['audit-status', row.statusClass])\n                  }, _toDisplayString(row.statusLabel), 3))\n                : (_openBlock(), _createElementBlock(\"span\", {\n                    key: 1,\n                    class: _normalizeClass(['audit-status', row.statusClass])\n                  }, _toDisplayString(row.recheckStatusLabel), 3)),\n              (row.recheckStatus === 5 && row.infoFullStatus !== '0')\n                ? (_openBlock(), _createBlock(_component_el_tag, {\n                    key: 2,\n                    type: row.infoFullStatusType,\n                    effect: \"dark\",\n                    size: \"small\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createTextVNode(_toDisplayString(row.infoFullStatusName), 1)\n                    ]),\n                    _: 2\n                  }, 1032, [\"type\"]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_table_column, {\n            align: \"center\",\n            prop: \"createdTime\",\n            label: \"报备时间\",\n            width: \"250px\"\n          }),\n          _createVNode(_component_el_table_column, {\n            align: \"center\",\n            prop: \"code\",\n            label: \"唯一标识码\",\n            width: \"180px\"\n          }),\n          _createVNode(_component_el_table_column, {\n            align: \"center\",\n            prop: \"bz\",\n            label: \"审核结果\",\n            width: \"180px\"\n          }),\n          _createVNode(_component_el_table_column, {\n            align: \"center\",\n            label: \"操作\",\n            width: \"150px\",\n            fixed: \"right\",\n            \"class-name\": \"operation-group\"\n          }, {\n            default: _withCtx(({ row }) => [\n              _createVNode(_component_el_link, {\n                underline: false,\n                type: \"primary\",\n                onClick: ($event: any) => (handleDetailReport(row))\n              }, {\n                default: _withCtx(() => _cache[4] || (_cache[4] = [\n                  _createTextVNode(\"查看 \")\n                ])),\n                _: 2\n              }, 1032, [\"onClick\"]),\n              (['3', '6'].includes(row.status))\n                ? (_openBlock(), _createBlock(_component_el_link, {\n                    key: 0,\n                    underline: false,\n                    type: \"primary\",\n                    onClick: ($event: any) => (handleAddEditReport({ type: 'edit', info: row }))\n                  }, {\n                    default: _withCtx(() => _cache[5] || (_cache[5] = [\n                      _createTextVNode(\"再次提交 \")\n                    ])),\n                    _: 2\n                  }, 1032, [\"onClick\"]))\n                : _createCommentVNode(\"\", true),\n              (row.recheckStatus === 5 && row.infoFullStatus === '1')\n                ? (_openBlock(), _createBlock(_component_el_link, {\n                    key: 1,\n                    underline: false,\n                    type: \"primary\",\n                    onClick: ($event: any) => (showSupplementInfo(row))\n                  }, {\n                    default: _withCtx(() => _cache[6] || (_cache[6] = [\n                      _createTextVNode(\"补充资料\")\n                    ])),\n                    _: 2\n                  }, 1032, [\"onClick\"]))\n                : _createCommentVNode(\"\", true),\n              (\r\n                row.recheckStatus === 5 &&\r\n                row.infoFullStatus !== '0' &&\r\n                Number(row.infoFullStatus) !== 1\r\n              )\n                ? (_openBlock(), _createBlock(_component_el_link, {\n                    key: 2,\n                    underline: false,\n                    type: \"primary\",\n                    onClick: ($event: any) => (showSupplementLog(row))\n                  }, {\n                    default: _withCtx(() => _cache[7] || (_cache[7] = [\n                      _createTextVNode(\"补充记录\")\n                    ])),\n                    _: 2\n                  }, 1032, [\"onClick\"]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"data\"]),\n      _createVNode(_component_PagePagination, {\n        pageTotal: _unref(pageData).pageTotal,\n        pageSize: _unref(pageData).pageSize,\n        pageNumber: _unref(pageData).pageNumber,\n        onEmitPageSizeChange: _unref(pageSizeChange),\n        onEmitPageNumberChange: _unref(pageNumberChange)\n      }, null, 8, [\"pageTotal\", \"pageSize\", \"pageNumber\", \"onEmitPageSizeChange\", \"onEmitPageNumberChange\"])\n    ]),\n    _createVNode(_unref(ReportQRCodeDialog), {\n      ref_key: \"reportQRCodeRef\",\n      ref: reportQRCodeRef\n    }, null, 512),\n    _createVNode(_unref(SelectCompanyDialog), {\n      ref_key: \"selectCompanyRef\",\n      ref: selectCompanyRef,\n      onEmitFunc: handleAddEditReport\n    }, null, 512),\n    _createVNode(_unref(AddEditReportDrawer), {\n      ref_key: \"addEditReportRef\",\n      ref: addEditReportRef,\n      onEmitFunc: receiveCallBack\n    }, null, 512),\n    _createVNode(_unref(DetailReportDrawer), {\n      ref_key: \"detailReportRef\",\n      ref: detailReportRef\n    }, null, 512),\n    _createVNode(_unref(SupplementInfoDrawer), {\n      ref_key: \"supplementInfoRef\",\n      ref: supplementInfoRef,\n      onEmitFunc: receiveCallBack\n    }, null, 512),\n    _createVNode(_unref(SupplementLogDrawer), {\n      ref_key: \"supplementLogRef\",\n      ref: supplementLogRef,\n      onReSubmit: reSubmit\n    }, null, 512)\n  ]))\n}\n}\n\n})","<template>\r\n  <!-- 业务报备-->\r\n  <div class=\"report\">\r\n    <div class=\"form-container\">\r\n      <TabList\r\n        @emitTab=\"tabClick\"\r\n        :list=\"concatList(true, reportReviewStatusList)\"\r\n        :activeIndex=\"activeIndex\"\r\n      ></TabList>\r\n      <div class=\"search-box\">\r\n        <el-input\r\n          @keyup.enter=\"handleSearch\"\r\n          v-model=\"paramsData.applyName\"\r\n          placeholder=\"请输入公司名称/公司code\"\r\n        >\r\n          <template #suffix>\r\n            <el-icon @click=\"handleSearch\"><Search /></el-icon>\r\n          </template>\r\n        </el-input>\r\n        <el-dropdown @command=\"handleReport\">\r\n          <el-button type=\"primary\">业务报备</el-button>\r\n          <template #dropdown>\r\n            <el-dropdown-menu>\r\n              <el-dropdown-item command=\"a\" v-if=\"existCallInterface !== 0\"\r\n                >手动报备</el-dropdown-item\r\n              >\r\n              <el-dropdown-item command=\"b\">电子化报备</el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </template>\r\n        </el-dropdown>\r\n      </div>\r\n    </div>\r\n    <div class=\"table-container\">\r\n      <!--   列表   -->\r\n      <el-table :data=\"pageData.list\" height=\"calc(100vh - 260px)\">\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"applyName\"\r\n          label=\"企业名称\"\r\n          width=\"250px\"\r\n        />\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"companyCode\"\r\n          label=\"企业code\"\r\n          width=\"250px\"\r\n        />\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"businessTypeName\"\r\n          label=\"业务开展方式\"\r\n          width=\"250px\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          align=\"left\"\r\n          prop=\"status\"\r\n          label=\"状态\"\r\n          width=\"250px\"\r\n          class-name=\"audit-status-box\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <template v-if=\"![5, 6].includes(row.recheckStatus)\">\r\n              <span :class=\"['audit-status', row.statusClass]\">{{\r\n                row.statusLabel\r\n              }}</span>\r\n            </template>\r\n            <template v-else>\r\n              <span :class=\"['audit-status', row.statusClass]\">{{\r\n                row.recheckStatusLabel\r\n              }}</span>\r\n            </template>\r\n            <template\r\n              v-if=\"row.recheckStatus === 5 && row.infoFullStatus !== '0'\"\r\n            >\r\n              <el-tag\r\n                :type=\"row.infoFullStatusType\"\r\n                effect=\"dark\"\r\n                size=\"small\"\r\n                >{{ row.infoFullStatusName }}</el-tag\r\n              >\r\n            </template>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"createdTime\"\r\n          label=\"报备时间\"\r\n          width=\"250px\"\r\n        />\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"code\"\r\n          label=\"唯一标识码\"\r\n          width=\"180px\"\r\n        />\r\n        <el-table-column\r\n          align=\"center\"\r\n          prop=\"bz\"\r\n          label=\"审核结果\"\r\n          width=\"180px\"\r\n        />\r\n        <!--        <el-table-column-->\r\n        <!--          align=\"center\"-->\r\n        <!--          prop=\"updatedTime\"-->\r\n        <!--          label=\"操作时间\"-->\r\n        <!--          width=\"250px\"-->\r\n        <!--        />-->\r\n        <el-table-column\r\n          align=\"center\"\r\n          label=\"操作\"\r\n          width=\"150px\"\r\n          fixed=\"right\"\r\n          class-name=\"operation-group\"\r\n        >\r\n          <template #default=\"{ row }\">\r\n            <el-link\r\n              :underline=\"false\"\r\n              type=\"primary\"\r\n              @click=\"handleDetailReport(row)\"\r\n              >查看\r\n            </el-link>\r\n            <!--            <template v-if=\"['1'].includes(row.status)\">-->\r\n            <!--              <el-link-->\r\n            <!--                :underline=\"false\"-->\r\n            <!--                type=\"primary\"-->\r\n            <!--                @click=\"handleAuditReport('accept', row)\"-->\r\n            <!--                >通过</el-link-->\r\n            <!--              >-->\r\n            <!--              <el-link-->\r\n            <!--                :underline=\"false\"-->\r\n            <!--                type=\"primary\"-->\r\n            <!--                @click=\"handleAuditReport('reject', row)\"-->\r\n            <!--                >驳回</el-link-->\r\n            <!--              >-->\r\n            <!--            </template>-->\r\n            <template v-if=\"['3', '6'].includes(row.status)\">\r\n              <el-link\r\n                :underline=\"false\"\r\n                type=\"primary\"\r\n                @click=\"handleAddEditReport({ type: 'edit', info: row })\"\r\n                >再次提交\r\n              </el-link>\r\n            </template>\r\n            <template\r\n              v-if=\"row.recheckStatus === 5 && row.infoFullStatus === '1'\"\r\n            >\r\n              <el-link\r\n                :underline=\"false\"\r\n                type=\"primary\"\r\n                @click=\"showSupplementInfo(row)\"\r\n                >补充资料</el-link\r\n              >\r\n            </template>\r\n            <template\r\n              v-if=\"\r\n                row.recheckStatus === 5 &&\r\n                row.infoFullStatus !== '0' &&\r\n                Number(row.infoFullStatus) !== 1\r\n              \"\r\n            >\r\n              <el-link\r\n                :underline=\"false\"\r\n                type=\"primary\"\r\n                @click=\"showSupplementLog(row)\"\r\n                >补充记录</el-link\r\n              >\r\n            </template>\r\n          </template>\r\n        </el-table-column>\r\n        <template #empty>\r\n          <TableEmpty empty-text=\"暂无数据\"></TableEmpty>\r\n        </template>\r\n      </el-table>\r\n      <!--   分页   -->\r\n      <PagePagination\r\n        :pageTotal=\"pageData.pageTotal\"\r\n        :pageSize=\"pageData.pageSize\"\r\n        :pageNumber=\"pageData.pageNumber\"\r\n        @emitPageSizeChange=\"pageSizeChange\"\r\n        @emitPageNumberChange=\"pageNumberChange\"\r\n      ></PagePagination>\r\n    </div>\r\n    <!-- 二维码报备 -->\r\n    <ReportQRCodeDialog ref=\"reportQRCodeRef\"></ReportQRCodeDialog>\r\n    <!-- 选择公司 -->\r\n    <SelectCompanyDialog\r\n      ref=\"selectCompanyRef\"\r\n      @emitFunc=\"handleAddEditReport\"\r\n    />\r\n    <!-- 提交业务报备 -->\r\n    <AddEditReportDrawer ref=\"addEditReportRef\" @emitFunc=\"receiveCallBack\" />\r\n    <!-- 查看业务报备 -->\r\n    <DetailReportDrawer ref=\"detailReportRef\" />\r\n    <!-- 补充资料 -->\r\n    <SupplementInfoDrawer ref=\"supplementInfoRef\" @emitFunc=\"receiveCallBack\" />\r\n    <!-- 补充记录 -->\r\n    <SupplementLogDrawer ref=\"supplementLogRef\" @reSubmit=\"reSubmit\" />\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { h, ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\nimport { ElInput, ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { Search } from \"@element-plus/icons-vue\";\r\n\r\nimport { usePage, LocalStorage } from \"jz-tool-lib\";\r\nimport { concatList } from \"@assets/common\";\r\nimport { useVueRouter } from \"@/assets/useHook\";\r\nimport { reportReviewStatusList } from \"@/assets/typeStatus\";\r\n\r\nimport {\r\n  reportApi,\r\n  reportingAcceptApi,\r\n  reportingRejectApi,\r\n} from \"@/api/business-management-api\";\r\n\r\nconst AddEditReportDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/add-edit-report-drawer.vue\"\r\n    )\r\n);\r\nconst DetailReportDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/detail-report-drawer.vue\"\r\n    )\r\n);\r\nconst SelectCompanyDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/select-company-dialog.vue\"\r\n    )\r\n);\r\nconst ReportQRCodeDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/report-QRCode-dialog.vue\"\r\n    )\r\n);\r\nconst SupplementInfoDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/supplement-info-drawer.vue\"\r\n    )\r\n);\r\nconst SupplementLogDrawer = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@/components/business-management/ospreyCloudCall/report/list/supplement-log-drawer.vue\"\r\n    )\r\n);\r\n\r\ndefineOptions({\r\n  name: \"businessManagement.ospreyCloudCall.report.list\",\r\n});\r\n\r\nconst { goPage } = useVueRouter();\r\nconst {\r\n  bd_userInfo: userInfo,\r\n  bd_virCompanyId: virCompanyId,\r\n  bd_existCallInterface: existCallInterface,\r\n} = LocalStorage.batchGetItem([\r\n  \"bd_userInfo\",\r\n  \"bd_virCompanyId\",\r\n  \"bd_existCallInterface\",\r\n]);\r\nconst activeIndex = ref(\"\"); // 审核状态\r\nconst detailReportRef = ref();\r\nconst reportQRCodeRef = ref();\r\nconst selectCompanyRef = ref();\r\nconst addEditReportRef = ref();\r\nconst supplementInfoRef = ref();\r\nconst supplementLogRef = ref();\r\n\r\n// 列表某一项报备信息\r\nconst reportInfo = shallowReactive({\r\n  id: \"\",\r\n  companyId: \"\",\r\n  companyCode: \"\",\r\n  companyName: \"\",\r\n  businessType: \"\",\r\n});\r\nconst paramsData = shallowReactive({\r\n  status: \"\",\r\n  applyName: \"\",\r\n  companyId: virCompanyId,\r\n  agentId: userInfo.profileId,\r\n});\r\n\r\nconst { getList, pageNumberChange, pageSizeChange, pageData, resetPageNumber } =\r\n  usePage({\r\n    listApi: reportApi,\r\n    props: {\r\n      pageSize: \"size\",\r\n      pageNumber: \"current\",\r\n    },\r\n    paramsData,\r\n  });\r\n\r\nconst handleSearch = () => {\r\n  resetPageNumber();\r\n  getList();\r\n};\r\n\r\n// tab 点击\r\nconst tabClick = (value) => {\r\n  activeIndex.value = value.value;\r\n  paramsData.status = value.value;\r\n  getList();\r\n};\r\n\r\nfunction handleReport(command) {\r\n  if (command === \"a\") {\r\n    // 打开选择公司弹窗\r\n    selectCompanyRef.value.trigger(true, 1);\r\n  } else if (command === \"b\") {\r\n    reportQRCodeRef.value.trigger(true, {\r\n      type: \"add\",\r\n    });\r\n  }\r\n}\r\n\r\n// 查看报备\r\nfunction handleDetailReport(info) {\r\n  reportInfo.id = info.id;\r\n  reportInfo.companyName = info.applyName;\r\n  reportInfo.companyCode = info.agentSubCompanyCode;\r\n  reportInfo.companyId = info.agentSubCompanyId ?? info.companyId;\r\n  if (info.sourceType === 1) {\r\n    // 电子化\r\n    goPage({\r\n      path: \"/businessManagement/ospreyCloudCall/report/detail\",\r\n      query: reportInfo,\r\n    });\r\n  } else {\r\n    // 手动\r\n    detailReportRef.value.trigger(true, reportInfo);\r\n  }\r\n}\r\n\r\n// 新增、编辑报备\r\nfunction handleAddEditReport(data: {\r\n  type: \"add\" | \"edit\";\r\n  info: Record<string, any>;\r\n}) {\r\n  if (data.type === \"add\") {\r\n    addEditReportRef.value.trigger(true, data.type, data.info);\r\n  } else if (data.type === \"edit\") {\r\n    reportInfo.id = data.info.id;\r\n    reportInfo.companyName = data.info.applyName;\r\n    reportInfo.companyId = data.info.agentSubCompanyId ?? data.info.companyId;\r\n    reportInfo.companyCode = data.info.agentSubCompanyCode;\r\n    reportInfo.businessType = data.info.businessType;\r\n    if (data.info.sourceType === 0) {\r\n      addEditReportRef.value.trigger(true, data.type, reportInfo);\r\n    } else {\r\n      reportQRCodeRef.value.trigger(true, {\r\n        type: \"edit\",\r\n        info: reportInfo,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n/*\r\n * type list:刷新列表\r\n * */\r\nfunction receiveCallBack(data: {\r\n  type: \"list\" | \"report-electron\" | \"report-manual\";\r\n  info: Record<string, any>;\r\n}) {\r\n  if (data.type === \"list\") {\r\n    getList();\r\n  } else if (data.type === \"report-electron\") {\r\n    reportQRCodeRef.value.trigger(true, {\r\n      type: \"edit\",\r\n      info: data.info,\r\n    });\r\n    addEditReportRef.value.trigger(false, \"\", {\r\n      id: \"\",\r\n      companyId: \"\",\r\n      companyName: \"\",\r\n    });\r\n  } else if (data.type === \"report-manual\") {\r\n    reportInfo.id = data.info?.id ?? \"\";\r\n    reportInfo.companyId = data.info?.companyId ?? \"\";\r\n    addEditReportRef.value.trigger(true, \"edit\", reportInfo);\r\n    reportQRCodeRef.value.trigger(false, {\r\n      type: \"\",\r\n      info: {\r\n        id: \"\",\r\n        companyId: \"\",\r\n        companyName: \"\",\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\n// 报备审核\r\nfunction handleAuditReport(\r\n  type: \"accept\" | \"reject\",\r\n  info: Record<string, any>\r\n) {\r\n  const operateInfo = {\r\n    type,\r\n    text: type === \"accept\" ? \"审核通过\" : \"审核驳回\",\r\n  };\r\n  reconfirm(operateInfo, async function (reason: string) {\r\n    const params = {\r\n      id: info.id,\r\n      profileId: 0,\r\n      [type === \"accept\" ? \"remark\" : \"rejectCause\"]: reason,\r\n    };\r\n    await (type === \"accept\" ? reportingAcceptApi : reportingRejectApi).getData(\r\n      params\r\n    );\r\n    ElMessage.success(operateInfo.text);\r\n    await getList();\r\n  });\r\n}\r\n// 在次确认\r\nfunction reconfirm(\r\n  operateInfo: Record<string, any>,\r\n  callback: (reason: string) => Promise<void>\r\n) {\r\n  const reason = ref(\"\");\r\n  const prompt =\r\n    operateInfo.type === \"accept\"\r\n      ? `请输入${operateInfo.text}备注`\r\n      : `请输入${operateInfo.text}原因`;\r\n  ElMessageBox({\r\n    title: `${operateInfo.text}`,\r\n    message: () =>\r\n      h(\r\n        \"div\",\r\n        {\r\n          style: { width: \"398px\", padding: \"5px\" },\r\n        },\r\n        [\r\n          h(\"p\", {\r\n            innerHTML: `是否确认${operateInfo.text}？`,\r\n            style: { color: \"#0056ff\", fontSize: \"15px\", marginBottom: \"10px\" },\r\n          }),\r\n          h(ElInput, {\r\n            type: \"textarea\",\r\n            rows: 3,\r\n            maxlength: 50,\r\n            showWordLimit: true,\r\n            placeholder: prompt,\r\n            modelValue: reason.value,\r\n            \"onUpdate:modelValue\": (val: string) => {\r\n              reason.value = val;\r\n            },\r\n          }),\r\n        ]\r\n      ),\r\n    beforeClose: (action, instance, done) => {\r\n      if (action === \"confirm\") {\r\n        if (!reason.value && operateInfo.type === \"reject\") {\r\n          ElMessage.warning(prompt);\r\n          return;\r\n        }\r\n        done();\r\n      } else {\r\n        done();\r\n      }\r\n    },\r\n    showCancelButton: true,\r\n  })\r\n    .then(() => {\r\n      callback && typeof callback === \"function\" && callback(reason.value);\r\n    })\r\n    .catch(() => {});\r\n}\r\n\r\n/** 点击补充资料 **/\r\nfunction showSupplementInfo(row) {\r\n  supplementInfoRef.value.trigger(true, \"add\", row);\r\n}\r\n\r\n/** 点击补充记录 **/\r\nfunction showSupplementLog(row) {\r\n  supplementLogRef.value.trigger(true, row);\r\n}\r\n\r\n// 补充记录里重新提交\r\nfunction reSubmit(row, item) {\r\n  supplementInfoRef.value.trigger(true, \"edit\", row, item);\r\n}\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.search-box {\r\n  @include flex(center, center);\r\n  .el-input {\r\n    margin-right: 10px;\r\n  }\r\n}\r\n\r\n.audit-status {\r\n  font-size: 14px;\r\n  font-weight: 400;\r\n  line-height: 1;\r\n  &::before {\r\n    display: inline-block;\r\n    content: \"\";\r\n    width: 4px;\r\n    height: 4px;\r\n    margin-right: 5px;\r\n    vertical-align: middle;\r\n  }\r\n  &.status-1 {\r\n    color: #ff7125;\r\n    &::before {\r\n      background: #ff7125;\r\n    }\r\n  }\r\n  &.status-2,\r\n  &.status-5 {\r\n    color: #2ed4a9;\r\n    &::before {\r\n      background: #2ed4a9;\r\n    }\r\n  }\r\n  &.status-3,\r\n  &.status-6 {\r\n    color: #f12525;\r\n    &::before {\r\n      background: #f12525;\r\n    }\r\n  }\r\n}\r\n\r\n// 业务报备审核状态\r\n:deep(.audit-status-box) {\r\n  .cell {\r\n    @include flex(center, left);\r\n    column-gap: 5px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./list.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./list.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./list.vue?vue&type=style&index=0&id=26e4179f&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-26e4179f\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_defineComponent","name","__name","setup","__props","AddEditReportDrawer","defineAsyncComponent","DetailReportDrawer","SelectCompanyDialog","ReportQRCodeDialog","SupplementInfoDrawer","SupplementLogDrawer","goPage","useVueRouter","bd_userInfo","userInfo","bd_virCompanyId","virCompanyId","bd_existCallInterface","existCallInterface","LocalStorage","batchGetItem","activeIndex","ref","detailReportRef","reportQRCodeRef","selectCompanyRef","addEditReportRef","supplementInfoRef","supplementLogRef","reportInfo","shallowReactive","id","companyId","companyCode","companyName","businessType","paramsData","status","applyName","agentId","profileId","getList","pageNumberChange","pageSizeChange","pageData","resetPageNumber","usePage","listApi","reportApi","props","pageSize","pageNumber","handleSearch","tabClick","value","handleReport","command","trigger","type","handleDetailReport","info","agentSubCompanyCode","agentSubCompanyId","sourceType","path","query","handleAddEditReport","data","receiveCallBack","_data$info","_data$info2","showSupplementInfo","row","showSupplementLog","reSubmit","item","_ctx","_cache","_component_TabList","_resolveComponent","_component_el_icon","_component_el_button","_component_el_dropdown_item","_component_el_dropdown_menu","_component_el_dropdown","_component_el_table_column","_component_el_tag","_component_el_link","_component_TableEmpty","_component_el_table","_component_PagePagination","_openBlock","_createElementBlock","_createElementVNode","_createVNode","onEmitTab","list","_unref","concatList","reportReviewStatusList","ElInput","onKeyup","_withKeys","modelValue","$event","placeholder","suffix","_withCtx","onClick","default","Search","_","onCommand","dropdown","_createBlock","key","_createTextVNode","_createCommentVNode","height","empty","align","prop","label","width","includes","recheckStatus","_normalizeClass","statusClass","_toDisplayString","recheckStatusLabel","statusLabel","infoFullStatus","infoFullStatusType","effect","size","infoFullStatusName","fixed","underline","Number","pageTotal","onEmitPageSizeChange","onEmitPageNumberChange","ref_key","onEmitFunc","onReSubmit","__exports__"],"sourceRoot":""}