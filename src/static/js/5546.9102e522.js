"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[5546],{55546:function(l,e,a){a.r(e),a.d(e,{default:function(){return p}});a(95226),a(59784),a(29296),a(47961),a(70549),a(83238);var o=a(6254),n=a(25598),i=a(38627),t=a(59259),u=a(35287);const b={class:"business-label-content"},s={class:"dialog-footer"};var d=(0,o.pM)({__name:"add-edit-business-label-dialog",emits:["emitFunc"],setup(l,{expose:e,emit:d}){const c=(0,o.$V)((()=>Promise.all([a.e(2076),a.e(4559)]).then(a.bind(a,83862)))),r=d,p=(0,n.Kh)({visible:!1,label:[],companyLabel:[],labelGroup:[],companyLabelGroup:[]}),m=async()=>{const{data:l}=await u.Ti.getData();p.companyLabelGroup=u.Ti.handleData(l)},v=async l=>{const e={labelGroupId:l},{data:a}=await u.EA.getData(e);p.companyLabel=u.EA.handleData(a)},g=l=>{l.length?(p.label=p.label.filter((e=>{const a=e.split("&");return l.includes(a[1])})),v(l.toString())):(p.label=[],p.companyLabel=[])};async function f(){if(p.labelGroup.length){if(!p.label.length)return void t.nk.warning("请选择标签");{const l=k(p.label),e=l.map((l=>{const e=null===l||void 0===l?void 0:l.group.labelGroupName,a=l.labels.map((l=>l.labelName)).toString();return`业务分类：${e}；标签：${a}`}));r("emitFunc",{value:l,labelText:e}),y()}}else r("emitFunc"),y()}const k=l=>{const e=[];return l.forEach((l=>{const a=l.split("&"),o=e.find((l=>l.group.id===a[1])),n=p.companyLabel.find((l=>l.id===a[0]));if(o)o.labels.push({id:n.id,labelName:n.labelName});else{const l=p.companyLabelGroup.find((l=>l.value===a[1]));e.push({group:{id:null===l||void 0===l?void 0:l.value,labelGroupName:null===l||void 0===l?void 0:l.label},labels:[{id:null===n||void 0===n?void 0:n.id,labelName:null===n||void 0===n?void 0:n.labelName}]})}})),e.length?e:""};function y(){p.label=[],p.labelGroup=[],p.companyLabel=[],p.companyLabelGroup=[],p.visible=!1}async function h(l,e){p.visible=l;const a=Object.assign({},e);await m(),p.labelGroup=a.groupLabelValue,await g(p.labelGroup),p.label=a.labelValue}return e({trigger:h}),(l,e)=>{const a=(0,o.g2)("el-checkbox"),t=(0,o.g2)("el-checkbox-group"),u=(0,o.g2)("el-button"),d=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.Wv)(d,{modelValue:p.visible,"onUpdate:modelValue":e[2]||(e[2]=l=>p.visible=l),title:"新增业务标签",width:"700px",class:"custom-dialog","before-close":y},{footer:(0,o.k6)((()=>[(0,o.Lk)("div",s,[(0,o.bF)(u,{onClick:y},{default:(0,o.k6)((()=>e[3]||(e[3]=[(0,o.eW)("取消")]))),_:1}),(0,o.bF)(u,{type:"primary",onClick:f},{default:(0,o.k6)((()=>e[4]||(e[4]=[(0,o.eW)("确定")]))),_:1})])])),default:(0,o.k6)((()=>[(0,o.Lk)("div",b,[(0,o.bF)((0,n.R1)(c),{class:"group-list",direction:"column",list:p.companyLabelGroup,modelValue:p.labelGroup,"onUpdate:modelValue":[e[0]||(e[0]=l=>p.labelGroup=l),g]},null,8,["list","modelValue"]),(0,o.bF)(t,{modelValue:p.label,"onUpdate:modelValue":e[1]||(e[1]=l=>p.label=l),class:"label-list"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(p.companyLabel,(l=>((0,o.uX)(),(0,o.Wv)(a,{key:l.id,value:`${l.id}&${l.labelGroupId}`},{default:(0,o.k6)((()=>[(0,o.eW)((0,i.v_)(l.labelName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])}}}),c=a(83936);const r=(0,c.A)(d,[["__scopeId","data-v-1fdbc231"]]);var p=r}}]);
//# sourceMappingURL=5546.9102e522.js.map