{"version":3,"file":"static/js/4789.e395eea2.js","mappings":"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","sources":["webpack://daili/./src/components/customer-management/personal-customer/detail/add-follow-dialog.vue?d514","webpack://daili/./src/components/customer-management/personal-customer/detail/add-follow-dialog.vue","webpack://daili/./src/components/customer-management/personal-customer/detail/add-follow-dialog.vue?b941","webpack://daili/./src/components/customer-management/personal-customer/detail/follow-records.vue?34e3","webpack://daili/./src/components/customer-management/personal-customer/detail/follow-records.vue","webpack://daili/./src/components/customer-management/personal-customer/detail/follow-records.vue?ccda"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"body-container\" }\nconst _hoisted_2 = { class: \"dialog-footer\" }\n\nimport { shallowReactive } from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { AddFollowUpApi } from \"@api/customer-management-api\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'add-follow-dialog',\n  props: {\n    visible: { type: Boolean }\n  },\n  emits: [\"update:visible\", \"emitFunc\"],\n  setup(__props: any, { emit: __emit }) {\n\r\n\r\nconst emits = __emit;\r\n\r\nconst { routeQuery } = useVueRouter();\r\nconst formData = shallowReactive({\r\n  message: \"\",\r\n  fileList: [],\r\n  defaultFileList: [],\r\n});\r\n\r\nconst handleClose = () => {\r\n  emits(\"update:visible\", false);\r\n  formData.message = \"\";\r\n  formData.defaultFileList = [];\r\n  formData.fileList = []\r\n};\r\n//图片上传\r\nfunction handleFile(value: any) {\r\n  formData.fileList = value;\r\n}\r\n\r\n//保存\r\nconst handleConfirm = () => {\r\n  if (formData.message || formData.defaultFileList.length > 0) {\r\n    const params = {\r\n      attachment: formData.fileList.toString(),\r\n      followContent: formData.message,\r\n      followType: 1,\r\n      relevanceId: routeQuery.value.companyId,\r\n    };\r\n    AddFollowUpApi.getData(params).then((response) => {\r\n      if (response.statusCode === 0) {\r\n        ElMessage.success(\"新增跟进成功！\");\r\n        emits(\"emitFunc\");\r\n        handleClose();\r\n      } else {\r\n        ElMessage.error(\"新增跟进失败！\");\r\n      }\r\n    });\r\n  } else {\r\n    ElMessage.warning(\"请至少输入跟进信息或上传附件！\");\r\n  }\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_CustomUpload = _resolveComponent(\"CustomUpload\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_el_dialog, {\n    width: \"750px\",\n    title: \"新增跟进\",\n    \"model-value\": _ctx.visible,\n    class: \"custom-dialog\",\n    onClose: handleClose\n  }, {\n    footer: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_2, [\n        _createVNode(_component_el_button, { onClick: handleClose }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [\n            _createTextVNode(\"取 消\")\n          ])),\n          _: 1\n        }),\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: handleConfirm\n        }, {\n          default: _withCtx(() => _cache[3] || (_cache[3] = [\n            _createTextVNode(\"保 存\")\n          ])),\n          _: 1\n        })\n      ])\n    ]),\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_el_form, {\n          ref: \"ruleFormRef\",\n          model: _unref(formData),\n          \"label-position\": \"top\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, { label: \"跟进信息\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: _unref(formData).message,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(formData).message) = $event)),\n                  maxlength: \"100\",\n                  class: \"box-textarea\",\n                  placeholder: \"请输入\",\n                  \"show-word-limit\": \"\",\n                  rows: 4,\n                  type: \"textarea\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"跟进附件\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_CustomUpload, {\n                  listType: \"picture-card\",\n                  limit: 5,\n                  maxVolume: 10,\n                  defaultFileList: _unref(formData).defaultFileList,\n                  \"onUpdate:defaultFileList\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(formData).defaultFileList) = $event)),\n                  onEmitUpload: handleFile,\n                  tip: \"支持.jpg、.jpeg、.png格式，最多只能上传5张\"\n                }, null, 8, [\"defaultFileList\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\"])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"model-value\"]))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    width=\"750px\"\r\n    title=\"新增跟进\"\r\n    :model-value=\"visible\"\r\n    class=\"custom-dialog\"\r\n    @close=\"handleClose\"\r\n  >\r\n    <div class=\"body-container\">\r\n      <el-form ref=\"ruleFormRef\" :model=\"formData\" label-position=\"top\">\r\n        <el-form-item label=\"跟进信息\">\r\n          <el-input\r\n            v-model=\"formData.message\"\r\n            maxlength=\"100\"\r\n            class=\"box-textarea\"\r\n            placeholder=\"请输入\"\r\n            show-word-limit\r\n            :rows=\"4\"\r\n            type=\"textarea\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"跟进附件\">\r\n          <CustomUpload\r\n            listType=\"picture-card\"\r\n            :limit=\"5\"\r\n            :maxVolume=\"10\"\r\n            v-model:defaultFileList=\"formData.defaultFileList\"\r\n            @emitUpload=\"handleFile\"\r\n            tip=\"支持.jpg、.jpeg、.png格式，最多只能上传5张\"\r\n          >\r\n            </CustomUpload>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <template #footer>\r\n      <div class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleConfirm\">保 存</el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { shallowReactive } from \"vue\";\r\nimport { ElMessage } from \"element-plus\";\r\nimport { AddFollowUpApi } from \"@api/customer-management-api\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\n\r\ndefineProps<{\r\n  visible: boolean;\r\n}>();\r\nconst emits = defineEmits<{\r\n  (e: \"update:visible\", value: boolean): void;\r\n  (e: \"emitFunc\");\r\n}>();\r\n\r\nconst { routeQuery } = useVueRouter();\r\nconst formData = shallowReactive({\r\n  message: \"\",\r\n  fileList: [],\r\n  defaultFileList: [],\r\n});\r\n\r\nconst handleClose = () => {\r\n  emits(\"update:visible\", false);\r\n  formData.message = \"\";\r\n  formData.defaultFileList = [];\r\n  formData.fileList = []\r\n};\r\n//图片上传\r\nfunction handleFile(value: any) {\r\n  formData.fileList = value;\r\n}\r\n\r\n//保存\r\nconst handleConfirm = () => {\r\n  if (formData.message || formData.defaultFileList.length > 0) {\r\n    const params = {\r\n      attachment: formData.fileList.toString(),\r\n      followContent: formData.message,\r\n      followType: 1,\r\n      relevanceId: routeQuery.value.companyId,\r\n    };\r\n    AddFollowUpApi.getData(params).then((response) => {\r\n      if (response.statusCode === 0) {\r\n        ElMessage.success(\"新增跟进成功！\");\r\n        emits(\"emitFunc\");\r\n        handleClose();\r\n      } else {\r\n        ElMessage.error(\"新增跟进失败！\");\r\n      }\r\n    });\r\n  } else {\r\n    ElMessage.warning(\"请至少输入跟进信息或上传附件！\");\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.box-textarea {\r\n  width: 500px;\r\n}\r\n:deep(.upload .tip) {\r\n  color: #9ca6b9;\r\n}\r\n</style>\r\n","import script from \"./add-follow-dialog.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./add-follow-dialog.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./add-follow-dialog.vue?vue&type=style&index=0&id=73633e6a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-73633e6a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"timeline-content\" }\nconst _hoisted_2 = { class: \"follow-record\" }\nconst _hoisted_3 = { class: \"write-time\" }\nconst _hoisted_4 = { class: \"information\" }\nconst _hoisted_5 = { class: \"message\" }\nconst _hoisted_6 = { class: \"box-item\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"attachment-img\"\n}\nconst _hoisted_8 = { key: 1 }\n\nimport { reactive } from \"vue\";\r\nimport { usePage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { followUpListApi } from \"@api/customer-management-api\";\r\nimport addFollowDialog from \"./add-follow-dialog.vue\";\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'follow-records',\n  setup(__props) {\n\r\nconst { routeQuery } = useVueRouter();\r\nconst initData = reactive({\r\n  addFollowVisible: false,\r\n});\r\n\r\nconst { getList, pageNumberChange, pageSizeChange, pageData } = usePage({\r\n  listApi: followUpListApi,\r\n  props: {\r\n    pageSize: \"pageSize\",\r\n    pageNumber: \"page\",\r\n  },\r\n  searchParams: () => {\r\n    return {\r\n      followType: 1,\r\n      relevanceId: routeQuery.value.companyId,\r\n    };\r\n  },\r\n});\r\n\r\n//新增跟进弹框\r\nconst addFollow = () => {\r\n  initData.addFollowVisible = true;\r\n};\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_image = _resolveComponent(\"el-image\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n  const _component_el_timeline_item = _resolveComponent(\"el-timeline-item\")!\n  const _component_el_timeline = _resolveComponent(\"el-timeline\")!\n  const _component_TableEmpty = _resolveComponent(\"TableEmpty\")!\n  const _component_PagePagination = _resolveComponent(\"PagePagination\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[2] || (_cache[2] = _createElementVNode(\"h4\", null, \"跟进记录\", -1)),\n      _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: addFollow\n      }, {\n        default: _withCtx(() => _cache[1] || (_cache[1] = [\n          _createTextVNode(\"新增跟进\")\n        ])),\n        _: 1\n      })\n    ]),\n    _createElementVNode(\"div\", _hoisted_3, [\n      (_unref(pageData).list.length)\n        ? (_openBlock(), _createBlock(_component_el_timeline, {\n            key: 0,\n            class: \"timeline\"\n          }, {\n            default: _withCtx(() => [\n              (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(pageData).list, (item, index) => {\n                return (_openBlock(), _createBlock(_component_el_timeline_item, {\n                  key: index,\n                  timestamp: item.createdTime,\n                  placement: \"top\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_card, { class: \"write\" }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"div\", _hoisted_4, [\n                          _createElementVNode(\"p\", _hoisted_5, \"跟进信息：\" + _toDisplayString(item.followContent), 1),\n                          _createElementVNode(\"div\", _hoisted_6, [\n                            _cache[3] || (_cache[3] = _createElementVNode(\"p\", { class: \"attachment\" }, \"跟进附件：\", -1)),\n                            (item.attachment && item.attachment.length > 0)\n                              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n                                  (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(item.attachment, (url, imgIndex) => {\n                                    return (_openBlock(), _createBlock(_component_el_image, {\n                                      key: imgIndex,\n                                      class: \"img-item\",\n                                      src: url,\n                                      \"preview-src-list\": [url],\n                                      fit: \"cover\"\n                                    }, null, 8, [\"src\", \"preview-src-list\"]))\n                                  }), 128))\n                                ]))\n                              : (_openBlock(), _createElementBlock(\"p\", _hoisted_8, \"暂无\"))\n                          ])\n                        ])\n                      ]),\n                      _: 2\n                    }, 1024)\n                  ]),\n                  _: 2\n                }, 1032, [\"timestamp\"]))\n              }), 128))\n            ]),\n            _: 1\n          }))\n        : (_openBlock(), _createBlock(_component_TableEmpty, {\n            key: 1,\n            \"empty-text\": \"暂无数据\"\n          }))\n    ]),\n    _createVNode(_component_PagePagination, {\n      pageTotal: _unref(pageData).pageTotal,\n      pageSize: _unref(pageData).pageSize,\n      pageNumber: _unref(pageData).pageNumber,\n      onEmitPageSizeChange: _unref(pageSizeChange),\n      onEmitPageNumberChange: _unref(pageNumberChange)\n    }, null, 8, [\"pageTotal\", \"pageSize\", \"pageNumber\", \"onEmitPageSizeChange\", \"onEmitPageNumberChange\"]),\n    _createVNode(addFollowDialog, {\n      visible: initData.addFollowVisible,\n      \"onUpdate:visible\": _cache[0] || (_cache[0] = ($event: any) => ((initData.addFollowVisible) = $event)),\n      onEmitFunc: _unref(getList)\n    }, null, 8, [\"visible\", \"onEmitFunc\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"timeline-content\">\r\n    <div class=\"follow-record\">\r\n      <h4>跟进记录</h4>\r\n      <el-button type=\"primary\" @click=\"addFollow\">新增跟进</el-button>\r\n    </div>\r\n    <div class=\"write-time\">\r\n      <el-timeline class=\"timeline\" v-if=\"pageData.list.length\">\r\n        <el-timeline-item\r\n          v-for=\"(item, index) in pageData.list\"\r\n          :key=\"index\"\r\n          :timestamp=\"item.createdTime\"\r\n          placement=\"top\"\r\n        >\r\n          <el-card class=\"write\">\r\n            <div class=\"information\">\r\n              <p class=\"message\">跟进信息：{{ item.followContent }}</p>\r\n              <div class=\"box-item\">\r\n                <p class=\"attachment\">跟进附件：</p>\r\n                <div\r\n                  v-if=\"item.attachment && item.attachment.length > 0\"\r\n                  class=\"attachment-img\"\r\n                >\r\n                  <el-image\r\n                    v-for=\"(url, imgIndex) in item.attachment\"\r\n                    :key=\"imgIndex\"\r\n                    class=\"img-item\"\r\n                    :src=\"url\"\r\n                    :preview-src-list=\"[url]\"\r\n                    fit=\"cover\"\r\n                  />\r\n                </div>\r\n                <p v-else>暂无</p>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-timeline-item>\r\n      </el-timeline>\r\n      <template v-else>\r\n        <TableEmpty empty-text=\"暂无数据\"></TableEmpty>\r\n      </template>\r\n    </div>\r\n    <!--分页-->\r\n    <PagePagination\r\n      :pageTotal=\"pageData.pageTotal\"\r\n      :pageSize=\"pageData.pageSize\"\r\n      :pageNumber=\"pageData.pageNumber\"\r\n      @emitPageSizeChange=\"pageSizeChange\"\r\n      @emitPageNumberChange=\"pageNumberChange\"\r\n    ></PagePagination>\r\n    <!-- 新增跟进弹框-->\r\n    <addFollowDialog\r\n      v-model:visible=\"initData.addFollowVisible\"\r\n      @emitFunc=\"getList\"\r\n    ></addFollowDialog>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { reactive } from \"vue\";\r\nimport { usePage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { followUpListApi } from \"@api/customer-management-api\";\r\nimport addFollowDialog from \"./add-follow-dialog.vue\";\r\n\r\nconst { routeQuery } = useVueRouter();\r\nconst initData = reactive({\r\n  addFollowVisible: false,\r\n});\r\n\r\nconst { getList, pageNumberChange, pageSizeChange, pageData } = usePage({\r\n  listApi: followUpListApi,\r\n  props: {\r\n    pageSize: \"pageSize\",\r\n    pageNumber: \"page\",\r\n  },\r\n  searchParams: () => {\r\n    return {\r\n      followType: 1,\r\n      relevanceId: routeQuery.value.companyId,\r\n    };\r\n  },\r\n});\r\n\r\n//新增跟进弹框\r\nconst addFollow = () => {\r\n  initData.addFollowVisible = true;\r\n};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n.timeline-content {\r\n  flex-grow: 1;\r\n  margin-left: 20px;\r\n  margin-bottom: 0;\r\n  padding: 20px 24px;\r\n  background-color: #ffffff;\r\n\r\n  .write-time {\r\n    overflow-y: auto;\r\n    margin-top: 10px;\r\n    height: calc(100% - 100px);\r\n  }\r\n}\r\n\r\n.follow-record {\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  h4 {\r\n    color: #242934;\r\n  }\r\n}\r\n\r\n.box-item {\r\n  display: flex;\r\n  flex: 1;\r\n\r\n  .img-item {\r\n    width: 100px;\r\n    height: 100px;\r\n    margin-right: 10px;\r\n  }\r\n}\r\n\r\n.timeline {\r\n  max-width: 1100px;\r\n  margin-right: 100px;\r\n  padding-left: 5px;\r\n}\r\n\r\n.information {\r\n  display: grid;\r\n  grid-template-columns: 350px 1fr;\r\n  height: 100px;\r\n}\r\n\r\n.message {\r\n  white-space: normal;\r\n  word-wrap: break-word;\r\n  word-break: break-all;\r\n}\r\n\r\n.attachment {\r\n  flex: 0 0 70px;\r\n  margin-left: 20px;\r\n}\r\n\r\n.attachment-img {\r\n  flex-grow: 1;\r\n  max-height: 105px;\r\n  overflow-y: auto;\r\n}\r\n</style>\r\n","import script from \"./follow-records.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./follow-records.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./follow-records.vue?vue&type=style&index=0&id=3a839b7b&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3a839b7b\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_defineComponent","__name","props","visible","type","Boolean","emits","setup","__props","emit","__emit","routeQuery","useVueRouter","formData","shallowReactive","message","fileList","defaultFileList","handleClose","handleFile","value","handleConfirm","length","params","attachment","toString","followContent","followType","relevanceId","companyId","AddFollowUpApi","getData","then","response","statusCode","ElMessage","success","error","warning","_ctx","_cache","_component_el_input","_resolveComponent","_component_el_form_item","_component_CustomUpload","_component_el_form","_component_el_button","_component_el_dialog","_openBlock","_createBlock","width","title","onClose","footer","_withCtx","_createElementVNode","_createVNode","onClick","default","_createTextVNode","_","ref","model","_unref","label","modelValue","$event","maxlength","placeholder","rows","listType","limit","maxVolume","onEmitUpload","tip","__exports__","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","key","_hoisted_8","initData","reactive","addFollowVisible","getList","pageNumberChange","pageSizeChange","pageData","usePage","listApi","followUpListApi","pageSize","pageNumber","searchParams","addFollow","_component_el_image","_component_el_card","_component_el_timeline_item","_component_el_timeline","_component_TableEmpty","_component_PagePagination","_createElementBlock","list","_Fragment","_renderList","item","index","timestamp","createdTime","placement","_toDisplayString","url","imgIndex","src","fit","pageTotal","onEmitPageSizeChange","onEmitPageNumberChange","addFollowDialog","onEmitFunc"],"sourceRoot":""}