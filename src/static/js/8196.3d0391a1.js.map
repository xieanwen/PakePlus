{"version":3,"file":"static/js/8196.3d0391a1.js","mappings":"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","sources":["webpack://daili/./src/components/business-management/ospreyCloudCall/report/list/select-company-dialog.vue?5477","webpack://daili/./src/components/business-management/ospreyCloudCall/report/list/select-company-dialog.vue","webpack://daili/./src/components/business-management/ospreyCloudCall/report/list/select-company-dialog.vue?ad5b"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode } from \"vue\"\n\nimport { ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\nimport { allCustomerApi } from \"@api/customer-management-api\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'select-company-dialog',\n  emits: [\"emitFunc\"],\n  setup(__props, { expose: __expose, emit: __emit }) {\n\r\nconst AddSubCustomerDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@components/customer-management/personal-customer/list/add-sub-customer-dialog.vue\"\r\n    )\r\n);\r\nconst emits = __emit;\r\nconst { bd_userInfo: userInfo, bd_existCallInterface: existCallInterface } =\r\n  LocalStorage.batchGetItem([\"bd_userInfo\", \"bd_existCallInterface\"]);\r\nconst ruleFormRef = ref();\r\nconst initData = shallowReactive({\r\n  visible: false,\r\n  businessType: undefined,\r\n  companyList: [],\r\n  addSubCustomerVisible: false,\r\n});\r\nconst formData = shallowReactive({\r\n  companyId: \"\",\r\n});\r\nconst rules = {\r\n  companyId: [{ required: true, message: \"请选择公司\", trigger: \"blur\" }],\r\n};\r\n// 添加子客户\r\nconst handleOperate = () => {\r\n  initData.addSubCustomerVisible = true;\r\n};\r\n// 确认\r\nconst handleSubmit = (formEl: Record<string, any>) => {\r\n  if (!formEl) return;\r\n  formEl.validate((valid, fields) => {\r\n    if (valid) {\r\n      const companyInfo: any = initData.companyList.find(\r\n        (item: Record<string, any>) => item.companyId === formData.companyId\r\n      );\r\n      const params = {\r\n        companyId: companyInfo.companyId,\r\n        companyName: companyInfo.companyName,\r\n        companyCode: companyInfo.companyCode ?? \"\",\r\n        industryId: companyInfo.industrId,\r\n        businessType: companyInfo.businessType,\r\n      };\r\n      emits(\"emitFunc\", {\r\n        type: \"add\",\r\n        info: params,\r\n      });\r\n      handleClose();\r\n    } else {\r\n      console.log(\"error submit!\", fields);\r\n    }\r\n  });\r\n};\r\nasync function getList(value?: string) {\r\n  if (!value) return;\r\n  const params = {\r\n    parentId: userInfo.profileId,\r\n    businessType: initData.businessType,\r\n    pageSize: 5000,\r\n    companyName: value ?? \"\",\r\n  };\r\n  const { data } = await allCustomerApi.getData(params);\r\n  initData.companyList = allCustomerApi.handleData(data).list;\r\n}\r\nfunction handleClose() {\r\n  formData.companyId = \"\";\r\n  initData.visible = false;\r\n}\r\n/**\r\n * visible 显示弹窗开关\r\n * businessType 业务类型 0：接口客户；1： 直客\r\n * */\r\nfunction trigger(visible, businessType) {\r\n  initData.visible = visible;\r\n  initData.businessType = businessType;\r\n  if (visible) getList();\r\n}\r\n__expose({\r\n  trigger,\r\n});\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_dialog = _resolveComponent(\"el-dialog\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_el_dialog, {\n      modelValue: _unref(initData).visible,\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(initData).visible) = $event)),\n      class: \"custom-dialog\",\n      width: \"580px\",\n      title: \"选择公司\",\n      \"before-close\": handleClose\n    }, {\n      footer: _withCtx(() => [\n        _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: _cache[1] || (_cache[1] = ($event: any) => (handleSubmit(ruleFormRef.value)))\n        }, {\n          default: _withCtx(() => _cache[5] || (_cache[5] = [\n            _createTextVNode(\"确  定\")\n          ])),\n          _: 1\n        })\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_el_form, {\n          ref_key: \"ruleFormRef\",\n          ref: ruleFormRef,\n          model: _unref(formData),\n          rules: rules,\n          \"label-width\": \"80\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, {\n              label: \"公司名称\",\n              prop: \"companyId\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_select, {\n                  modelValue: _unref(formData).companyId,\n                  \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(formData).companyId) = $event)),\n                  placeholder: \"请选择公司\",\n                  clearable: \"\",\n                  filterable: \"\",\n                  remote: \"\",\n                  \"reserve-keyword\": \"\",\n                  \"remote-method\": getList\n                }, {\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(initData).companyList, (item) => {\n                      return (_openBlock(), _createBlock(_component_el_option, {\n                        key: item.companyId,\n                        label: `${item.companyName}（${item.companyCode}）`,\n                        value: item.companyId\n                      }, null, 8, [\"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"]),\n                (_unref(existCallInterface) !== 0)\n                  ? (_openBlock(), _createBlock(_component_el_button, {\n                      key: 0,\n                      onClick: handleOperate\n                    }, {\n                      default: _withCtx(() => _cache[4] || (_cache[4] = [\n                        _createTextVNode(\"新增子客户\")\n                      ])),\n                      _: 1\n                    }))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\"])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"]),\n    _createVNode(_unref(AddSubCustomerDialog), {\n      visible: _unref(initData).addSubCustomerVisible,\n      \"onUpdate:visible\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(initData).addSubCustomerVisible) = $event))\n    }, null, 8, [\"visible\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n  <el-dialog\r\n    v-model=\"initData.visible\"\r\n    class=\"custom-dialog\"\r\n    width=\"580px\"\r\n    title=\"选择公司\"\r\n    :before-close=\"handleClose\"\r\n  >\r\n    <el-form\r\n      ref=\"ruleFormRef\"\r\n      :model=\"formData\"\r\n      :rules=\"rules\"\r\n      label-width=\"80\"\r\n    >\r\n      <el-form-item label=\"公司名称\" prop=\"companyId\">\r\n        <el-select\r\n          v-model=\"formData.companyId\"\r\n          placeholder=\"请选择公司\"\r\n          clearable\r\n          filterable\r\n          remote\r\n          reserve-keyword\r\n          :remote-method=\"getList\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in initData.companyList\"\r\n            :key=\"item.companyId\"\r\n            :label=\"`${item.companyName}（${item.companyCode}）`\"\r\n            :value=\"item.companyId\"\r\n          />\r\n        </el-select>\r\n        <el-button v-if=\"existCallInterface !== 0\" @click=\"handleOperate\"\r\n          >新增子客户</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n    <template #footer>\r\n      <el-button type=\"primary\" @click=\"handleSubmit(ruleFormRef)\"\r\n        >确&nbsp;&nbsp;定</el-button\r\n      >\r\n    </template>\r\n  </el-dialog>\r\n  <!-- 新增子客户 -->\r\n  <AddSubCustomerDialog\r\n    v-model:visible=\"initData.addSubCustomerVisible\"\r\n  ></AddSubCustomerDialog>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, shallowReactive, defineAsyncComponent } from \"vue\";\r\nimport { allCustomerApi } from \"@api/customer-management-api\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\n\r\nconst AddSubCustomerDialog = defineAsyncComponent(\r\n  () =>\r\n    import(\r\n      \"@components/customer-management/personal-customer/list/add-sub-customer-dialog.vue\"\r\n    )\r\n);\r\nconst emits = defineEmits<{\r\n  (e: \"emitFunc\", value: Record<string, any>): void;\r\n}>();\r\nconst { bd_userInfo: userInfo, bd_existCallInterface: existCallInterface } =\r\n  LocalStorage.batchGetItem([\"bd_userInfo\", \"bd_existCallInterface\"]);\r\nconst ruleFormRef = ref();\r\nconst initData = shallowReactive({\r\n  visible: false,\r\n  businessType: undefined,\r\n  companyList: [],\r\n  addSubCustomerVisible: false,\r\n});\r\nconst formData = shallowReactive({\r\n  companyId: \"\",\r\n});\r\nconst rules = {\r\n  companyId: [{ required: true, message: \"请选择公司\", trigger: \"blur\" }],\r\n};\r\n// 添加子客户\r\nconst handleOperate = () => {\r\n  initData.addSubCustomerVisible = true;\r\n};\r\n// 确认\r\nconst handleSubmit = (formEl: Record<string, any>) => {\r\n  if (!formEl) return;\r\n  formEl.validate((valid, fields) => {\r\n    if (valid) {\r\n      const companyInfo: any = initData.companyList.find(\r\n        (item: Record<string, any>) => item.companyId === formData.companyId\r\n      );\r\n      const params = {\r\n        companyId: companyInfo.companyId,\r\n        companyName: companyInfo.companyName,\r\n        companyCode: companyInfo.companyCode ?? \"\",\r\n        industryId: companyInfo.industrId,\r\n        businessType: companyInfo.businessType,\r\n      };\r\n      emits(\"emitFunc\", {\r\n        type: \"add\",\r\n        info: params,\r\n      });\r\n      handleClose();\r\n    } else {\r\n      console.log(\"error submit!\", fields);\r\n    }\r\n  });\r\n};\r\nasync function getList(value?: string) {\r\n  if (!value) return;\r\n  const params = {\r\n    parentId: userInfo.profileId,\r\n    businessType: initData.businessType,\r\n    pageSize: 5000,\r\n    companyName: value ?? \"\",\r\n  };\r\n  const { data } = await allCustomerApi.getData(params);\r\n  initData.companyList = allCustomerApi.handleData(data).list;\r\n}\r\nfunction handleClose() {\r\n  formData.companyId = \"\";\r\n  initData.visible = false;\r\n}\r\n/**\r\n * visible 显示弹窗开关\r\n * businessType 业务类型 0：接口客户；1： 直客\r\n * */\r\nfunction trigger(visible, businessType) {\r\n  initData.visible = visible;\r\n  initData.businessType = businessType;\r\n  if (visible) getList();\r\n}\r\ndefineExpose({\r\n  trigger,\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.el-form {\r\n  min-height: 250px;\r\n\r\n  .el-select {\r\n    width: 312px;\r\n  }\r\n  .el-button {\r\n    margin-left: 6px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./select-company-dialog.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./select-company-dialog.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./select-company-dialog.vue?vue&type=style&index=0&id=0005f6ba&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0005f6ba\"]])\n\nexport default __exports__"],"names":["_defineComponent","__name","emits","setup","__props","expose","__expose","emit","__emit","AddSubCustomerDialog","defineAsyncComponent","bd_userInfo","userInfo","bd_existCallInterface","existCallInterface","LocalStorage","batchGetItem","ruleFormRef","ref","initData","shallowReactive","visible","businessType","undefined","companyList","addSubCustomerVisible","formData","companyId","rules","required","message","trigger","handleOperate","handleSubmit","formEl","validate","valid","fields","companyInfo","find","item","params","companyName","companyCode","industryId","industrId","type","info","handleClose","console","log","async","getList","value","parentId","profileId","pageSize","data","allCustomerApi","getData","handleData","list","_ctx","_cache","_component_el_option","_resolveComponent","_component_el_select","_component_el_button","_component_el_form_item","_component_el_form","_component_el_dialog","_openBlock","_createElementBlock","_Fragment","_createVNode","modelValue","_unref","$event","class","width","title","footer","_withCtx","onClick","default","_createTextVNode","_","ref_key","model","label","prop","placeholder","clearable","filterable","remote","_renderList","_createBlock","key","_createCommentVNode","__exports__"],"sourceRoot":""}