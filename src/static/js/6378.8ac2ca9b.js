"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[6378],{26378:function(n,t,e){e.r(t),e.d(t,{default:function(){return u}});var a=e(6254),s=e(25598),l=e(89787),r=e(88365);const c={class:"doc-container"},d=["innerHTML"];var i=(0,a.pM)({__name:"callInterface",setup(n){(0,a.sV)((()=>{(0,r.eG)(document.querySelector(".doc-container"))}));const t=(0,s.KR)('## 1 拨打电话、话单查询、话单状态推送、录音下载\n\n### 1.1 拨打电话\n\n**接口功能**\n用户拨打电话\n\n**使用说明**\n调用接口拨打电话\n\n**接口类型**\n\n| **请求方法** | POST(body)                                         |\n| ------------ | -------------------------------------------------- |\n| **访问url**  | **<https://XXXX/agent-system-rest/proxyapi/call>** |\n| **通信协议** | **HTTPS**                                          |\n\n**请求参数**\n\n| **参数名称**    | **是否必选** | **参数类型**      | **说明**                                                     |\n| --------------- | ------------ | ----------------- | ------------------------------------------------------------ |\n| **callerNbr**   | **是**       | **String(1-20)**  | **主叫号码**                                                 |\n| **calleeNbr**   | **是**       | **String(1-20)**  | **被叫号码**                                                 |\n| **callerIp**    | **是**       | **String(1-20)**  | **用户端IP**                                                 |\n| **statusUrl**   | **否**       | **String(1-512)** | **通话状态推送地址（不需要状态数据，可以不填）**             |\n| **cdrUrl**      | **否**       | **String(1-512)** | **话单推送地址（不需要话单，可以不填）**                     |\n| **ext1**        | **否**       | **String(1-256)** | **用户扩展字段（该字段数据在话单推送和状态推送，携带该字段数据）** |\n| **companyCode** | **是**       | **String**        | **子公司code（在数企注册的子公司code）**                     |\n| **callbackUrl** | **是**       | **String(1-512)** | **通话唯一id推送地址**                                       |\n\n**响应参数**\n\n| **参数** | **参数类型**     | 说明           |\n| -------- | ---------------- | -------------- |\n| data   | **String(1-50)** | **请求唯一ID** |\n\n**接口示例**\n\n* 请求示例\n\n  ```json\n  {\n  "companyCode": "F**m",\n  "statusUrl": "https://1.1.1.1:8311/call/status",\n  "callerNbr": "1871****678",\n  "callerIp": "127.0.0.1",\n  "calleeNbr": "189****3333",\n  "cdrUrl": "http://1.1.1.1:8311/call/cdr",\n  "ext1": "你好",\n  "callbackUrl": "http://1.1.1.1:8311/call/cdr"\n\n  }\n  ```\n\n\n* 响应示例\n\n  ```json\n      {\n      "msg": null,\n      "statusCode": 0,\n      "data": "callId12312379369728",\n      "timestamp": 1693988408184\n      }\n  ```\n\n### 1.2 通话状态推送\n\n**接口功能**\n\n通话状态推送\n\n**使用说明**\n\n调用接口拨打电话携带statusUrl参数\n\n**接口类型**\n\n| **请求方法** | POST(body) |\n| ------------ | ---------- |\n| **访问url**  | **无**     |\n| **通信协议** | **HTTPS**  |\n\n**推送参数**\n\n| **参数名称**  | **是否必选** | **参数类型**      | **说明**                                                     |\n| ------------- | ------------ | ----------------- | ------------------------------------------------------------ |\n| baduSessionId |              | **String(1-50)**  | 通话唯一标识                                                 |\n| ext1          |              | **String(1-256)** | 用户扩展参数                                                 |\n| eventType     |              | **String(1-20)**  | 事件类型；caller\\_answer主叫应答；callee\\_answer被叫应答；caller\\_disconnect主叫挂断；callee\\_disconnect被叫挂断 |\n| timestamp     |              | String(1-128)     | 确发时间 yyyy-MM-dd HH\\:mm\\:ss                               |\n\n**用户端响应参数**\n响应 http编码=200\n\n**接口示例**\n\n* 推送参数示例\n\n```json\n{\n  "baduSessionId": "169934****243263488",\n  "eventType": "caller_answer",\n  "ext1": "你好",\n  "timestamp": "2023-07-01 12:13:23"\n}\n```\n\n### 1.3 通话话单推送\n\n**接口功能**\n\n通话话单推送\n\n**使用说明**\n\n调用接口拨打电话携带**cdrUrl**参数\n\n**接口类型**\n\n| **请求方法** | POST(body) |\n| ------------ | ---------- |\n| **访问url**  | **无**     |\n| **通信协议** | **HTTPS**  |\n\n**推送参数**\n\n| **参数名称**   | **是否必选** | **参数类型**     | **说明**                                 |\n| -------------- | ------------ | ---------------- | ---------------------------------------- |\n| eventType      |              | String(1-50)     | 事件类型；固定值cdr                      |\n| data           |              | 话单集合         |                                          |\n| baduSessionId  |              | **String(1-50)** | 通话唯一标识                             |\n| callerNum      |              | **String(1-20)** | 主叫号码                                 |\n| calleeNum      |              | **String(1-20)** | 被叫号码                                 |\n| connectTime    |              | String(1-128)    | 通话开始时间 yyyy-MM-dd HH\\:mm\\:ss       |\n| disconnectTime |              | String(1-128)    | 通话结束时间                             |\n| timeConsume    |              | String           | 通话时长单位秒                           |\n| status         |              | String           | 通话状态1=主叫挂单；2=被叫挂断；3=已接通 |\n| ext1           |              | String(1-256)    | 用户扩展参数                             |\n| recordDownUrl  |              | String(1-512)    | 录音下载url                              |\n\n**用户端响应参数**\n\n&#x20;响应 http编码=200\n\n**接口示例**\n\n* 推送参数示例\n\n```json\n{\n  "msg": null,\n  "statusCode": 0,\n  "data": {\n    "data": [\n      {\n        "callerNum": "18922223333",\n        "recordDownUrl": "https://xxxxx/test?auth=fff",\n        "disconnectTime": "2023-07-01 12:12:40",\n        "timeConsume": "17",\n        "baduSessionId": "1699342953899618304",\n        "connectTime": "2023-07-01 12:12:23",\n        "calleeNum": "18711112222",\n        "status": "3"\n      },\n      {\n        "callerNum": "18122223333",\n        "recordDownUrl": "https://xxxxx/test?auth=aaaa",\n        "disconnectTime": "2023-07-01 12:13:40",\n        "timeConsume": "17",\n        "baduSessionId": "1699342953899618305",\n        "connectTime": "2023-07-01 12:13:23",\n        "calleeNum": "18911112222",\n        "status": "3"\n      }\n    ],\n    "eventType": "cdr"\n  },\n  "timestamp": 1693988408184\n}\n```\n\n### 1.4 录音下载\n\n**接口功能**&#x20;\n\n录音下载\n\n**使用说明**&#x20;\n\n接受完话单后，根据话单recordDownUrl使用get请求，下载录音\n\n**接口类型**\n\n| **请求方法** | get       |\n| ------------ | --------- |\n| **访问url**  | **无**    |\n| **通信协议** | **HTTPS** |\n\n**推送参数**\n\n无\n\n**用户端响应参数**\n\n无\n\n**接口示例**\n\n无\n\n### 1.5 查询话单\n\n**接口功能**\n\n根据baduSessionId获取话单\n\n**使用说明**&#x20;\n\n调用该接口获取一条话单记录\n\n**接口类型**\n\n| **请求方法** | post(body)                                                   |\n| ------------ | ------------------------------------------------------------ |\n| **访问url**  | [https://XXXX](https://XXXX/md-into-call/proxyapi/call)/md-call-cdrpush/cdr/getOne |\n| **通信协议** | **HTTPS**                                                    |\n\n**请求参数**\n\n| **参数名称**  | **是否必选** | **参数类型** | **说明**                          |\n| ------------- | ------------ | ------------ | --------------------------------- |\n| baduSessionId | **是**       | **String**   | **通话唯一标识**                  |\n| time          | **是**       | **String**   | 通话时间；格式yyyyMM；例如：20221 |\n\n**响应参数**\n\n与话单推送中，推送参数一致\n\n**接口示例**\n\n* 请求示例\n\n```json\n{\n  "baduSessionId": "1699342953899618304",\n  "time": "202307"\n}\n```\n\n* 响应示例\n\n```json\n{\n  "msg": null,\n  "statusCode": 0,\n  "data": {\n    "data": [\n      {\n        "callerNum": "18922223333",\n        "recordDownUrl": "https://xxxxx/test?auth=fff",\n        "disconnectTime": "2023-07-01 12:12:40",\n        "timeConsume": "17",\n        "baduSessionId": "1699342953899618304",\n        "connectTime": "2023-07-01 12:12:23",\n        "calleeNum": "18711112222",\n        "status": "3"\n      }\n    ],\n    "eventType": "cdr"\n  },\n  "timestamp": 1693988408184\n}\n```\n\n### 1.6 通话唯一id推送\n\n**接口功能**\n\n通话唯一id推送\n\n**使用说明**\n\n调用接口拨打电话携带callbackUrl参数\n\n**接口类型**\n\n| **请求方法** | POST(body) |\n| ------------ | ---------- |\n| **访问url**  | **无**     |\n| **通信协议** | **HTTPS**  |\n\n**推送参数**\n\n| **参数名称** | **是否必选** | **参数类型**     | **说明**     |\n| ------------ | ------------ | ---------------- | ------------ |\n| callId       |              | **String(1-50)** | 请求唯一标识 |\n| sessionId    |              | **String(1-50)** | 通话唯一标识 |\n\n**用户端响应参数**\n响应 http编码=200\n\n**接口示例**\n\n* 推送参数示例\n\n* 响应示例\n\n  ```json\n       {\n      "msg": null,\n      "statusCode": 0,\n      "data": {\n      "sessionId": "badu169933****079369728",\n      "callId": "callid079369728",\n      "ext1": "扩展字段"\n      },\n      "timestamp": 1693988408184\n      }\n  ```\n\n## 附录\n\n**状态码**\n\n| **状态码** | 状态 | 描述     |\n| ---------- | ---- | -------- |\n| **0**      | 成功 | 操作成功 |\n| **非0**    | 失败 | 见异常码 |\n\n**异常码**\n\n| **异常码** | 状态 | 描述                         |\n| ---------- | ---- | ---------------------------- |\n| **1**      | 失败 | 操作失败，并返回具体错误信息 |\n| **500**    | 失败 | 操作失败                     |'),e=(0,s.KR)("");return e.value=(0,l.xI)(t.value),(n,t)=>((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",{class:"doc-container-main",innerHTML:e.value},null,8,d)]))}});const o=i;var u=o}}]);
//# sourceMappingURL=6378.8ac2ca9b.js.map