"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[1881],{9907:function(e,u,a){a.r(u),a.d(u,{default:function(){return g}});a(95226),a(59784),a(47961),a(70549);var c=a(6254),l=a(25598),o=a(38627),s=a(88365),n=a(10901),r=a(4710),t=a(8610),i=a(64108);const d={class:"product-detail"},v={class:"service-specs"},p={class:"word"},m="VIDEO_MATRIX_ACCOUNT_QUANTITY";var f=(0,c.pM)({__name:"video-matrix",props:{productData:{},purchasedData:{}},setup(e){const u=e,{routeQuery:a}=(0,n.dG)(),{bd_userInfo:f}=s.DT.batchGetItem(["bd_userInfo"]),b=(0,l.Gc)({accountNum:"",cycleNum:1,accountList:[],cycleList:[{label:"1年期",value:1},{label:"2年期",value:2}],curSpecsInfo:{}}),g=(0,l.IJ)({price:"0.00",sumPrice:"0.00",addedPrice:"0.00",unitPrice:"0.00",subMarketList:[],hasAgentPrice:!1}),I=(0,c.EW)((()=>u.productData)),y=(0,c.EW)((()=>I.value.serviceInfo)),C=(0,c.EW)((()=>{var e;return null===(e=I.value)||void 0===e?void 0:e.addedServiceList.find((e=>e.addedServiceCode===m))})),N=(0,c.EW)((()=>I.value.canBuy?`合计：账号单价${g.value.unitPrice}元 x 账号数${b.accountNum}个 x ${b.cycleNum}年期 = ${g.value.sumPrice}元`:"")),h=(0,c.EW)((()=>k())),k=()=>{var e;const u=[],a=null===(e=C.value)||void 0===e?void 0:e.specsList;return(0,s.TC)(a)?(a.forEach((e=>{const a={coding:e.coding,serviceCode:e.serviceCode,groupNames:e.groupNames,groupValues:e.groupValues,groupCodes:e.groupCodes},c=u.find((u=>u.value===e.groupValues));c?c.specs.push(a):u.push({value:e.groupValues,label:e.groupNames,specs:a})})),u.sort(((e,u)=>e.value-u.value))):u};function L(e){if(!h.value.length)return;b.accountList=h.value;const u=b.accountList[e];b.accountNum=(null===u||void 0===u?void 0:u.value)??"",b.curSpecsInfo=u.specs,E()}const V=e=>{const u=b.accountList.findIndex((u=>u.value===e));b.curSpecsInfo=b.accountList[u].specs,E()},_=()=>{E()};function P(){const e={helpOrder:1,agentId:f.profileId,companyId:a.value.companyId,profileId:a.value.profileId,buyType:"BUY_SERVER",shopBuyList:[{agentId:f.profileId,isisTry:!1,dateType:"3",dateValue:b.cycleNum,marketCode:a.value.serviceCode,userNumber:b.accountNum,coding:[{code:b.curSpecsInfo.serviceCode,coding:b.curSpecsInfo.coding,num:b.accountNum}],baseCodeList:[{baseCode:b.curSpecsInfo.groupCodes,number:b.curSpecsInfo.groupValues}]}],sumPrice:g.value.sumPrice},u={list:[{...y.value,price:g.value.price,specsInfo:`服务周期：${b.cycleNum}年；视频矩阵数量：${b.accountNum}个；`}],sumPrice:g.value.sumPrice};return{params:e,commodityInfo:u}}const E=async()=>{const e=P().params;g.value=await(0,r.AV)(e)},F=()=>{(0,r.$d)(P())};return L(0),(e,u)=>{var a;const s=(0,c.g2)("el-option"),n=(0,c.g2)("el-select"),r=(0,c.g2)("el-form-item"),m=(0,c.g2)("el-form");return(0,c.uX)(),(0,c.CE)("div",d,[(0,c.bF)(i.A,{serviceData:y.value},null,8,["serviceData"]),(0,c.Lk)("div",v,[(0,c.bF)(m,{"label-width":"150px"},{default:(0,c.k6)((()=>[(0,c.bF)(r,{label:"授权账号数"},{default:(0,c.k6)((()=>[(0,c.bF)(n,{modelValue:(0,l.R1)(b).accountNum,"onUpdate:modelValue":u[0]||(u[0]=e=>(0,l.R1)(b).accountNum=e),onChange:V},{default:(0,c.k6)((()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,l.R1)(b).accountList,(e=>((0,c.uX)(),(0,c.Wv)(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,c.bF)(r,{label:"合作期限"},{default:(0,c.k6)((()=>[(0,c.bF)(n,{modelValue:(0,l.R1)(b).cycleNum,"onUpdate:modelValue":u[1]||(u[1]=e=>(0,l.R1)(b).cycleNum=e),onChange:_},{default:(0,c.k6)((()=>[((0,c.uX)(!0),(0,c.CE)(c.FK,null,(0,c.pI)((0,l.R1)(b).cycleList,(e=>((0,c.uX)(),(0,c.Wv)(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,c.bF)(r,null,{default:(0,c.k6)((()=>[(0,c.Lk)("p",p,(0,o.v_)(N.value),1)])),_:1})])),_:1}),(0,c.bF)(t.A,{onEmitFunc:F,"buy-price":g.value.sumPrice,"can-buy":null===(a=I.value)||void 0===a?void 0:a.canBuy,hasAgentPrice:g.value.hasAgentPrice},null,8,["buy-price","can-buy","hasAgentPrice"])])])}}});const b=f;var g=b}}]);
//# sourceMappingURL=1881.7e5b0614.js.map