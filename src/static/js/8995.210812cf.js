"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[8995],{93133:function(e,o,l){l.r(o),l.d(o,{default:function(){return y}});var r=l(6254),s=l(38627),d=l(55533),a=l(25598),t=l(59259),i=l(88365),n=l(10901),p=l(27656),u=l(74718),m=l(86220);const c={class:"forget-password"},g={class:"container"},h=["src"],b={class:"telephone-code"},C={key:0,class:"count"},f=["xlink:href"],k=["xlink:href"],w={class:"copyright"};var v=(0,r.pM)({name:"forgetPassword",__name:"forget-password",setup(e){const o=(0,a.KR)(),l=(0,a.KR)(),{goPage:v}=(0,n.dG)(),{storeState:F}=(0,n.VO)(),_={mobile:[{validator:(e,o,l)=>{(0,p.lr)(e,o,l)},trigger:"blur"}],imgCode:[{required:!0,message:"请输入右侧验证码",trigger:"blur"}],telephoneCode:[{required:!0,message:"请输入4位验证码",trigger:"blur"}],password:[{validator:(e,o,r)=>{(0,p.Oj)(e,o,r,O,l,"rePassword")},trigger:"blur"}],rePassword:[{validator:(e,o,l)=>{(0,p.lx)(e,o,l,O,"password")},trigger:"blur"}]},y=(0,a.Kh)({step:1,telephoneCodeObj:{flag:!0,timer:0,count:60},imgCodeUrl:(0,u.vI)(),telephoneCodeFlag:!1,submitFlag:!1,passwordType:"password",rePasswordType:"password"}),V=(0,a.Kh)({mobile:"",imgCode:"",telephoneCode:""}),O=(0,a.Kh)({realName:"",password:"",rePassword:""}),P=()=>{y.imgCodeUrl=(0,u.vI)()+"?t="+(new Date).getTime()},j=()=>{if(y.telephoneCodeFlag)return;if(y.telephoneCodeFlag=!0,!V.mobile)return y.telephoneCodeFlag=!1,void t.nk.error("请输入手机号");if(!(0,i.Pk)(V.mobile))return y.telephoneCodeFlag=!1,void t.nk.error("请输入正确的手机号码");if(!V.imgCode)return y.telephoneCodeFlag=!1,void t.nk.error("请输入图形验证码");let e={mobile:V.mobile,code:V.imgCode};(0,u.LC)(e).then((()=>{t.nk.success("短信发送成功"),y.telephoneCodeFlag=!1,L()})).catch((()=>{y.telephoneCodeFlag=!1,y.imgCodeUrl=(0,u.vI)()+"?t="+(new Date).getTime()}))},L=()=>{y.telephoneCodeObj.timer=setInterval((()=>{0===y.telephoneCodeObj.count?(clearInterval(y.telephoneCodeObj.timer),y.telephoneCodeObj.flag=!0,y.telephoneCodeObj.count=60):(y.telephoneCodeObj.flag=!1,y.telephoneCodeObj.count-=1)}),1e3)},T=()=>{o.value.validate((e=>{if(!e)return!1;{let e={mobile:V.mobile,checkCode:V.telephoneCode};(0,u.c_)(e).then((()=>{y.step=2}))}}))},U=()=>{l.value.validate((e=>{if(!e)return!1;{if(y.submitFlag)return;y.submitFlag=!0;let e={mobile:V.mobile,password:O.password,yanzheng:V.telephoneCode};(0,u.NH)(e).then((()=>{const e={telephone:V.mobile,passWord:O.password};i.DT.setItem("bd_loginForm",e),v("/login"),y.submitFlag=!1,t.nk.success("重置成功")})).catch((()=>{y.submitFlag=!1}))}}))},I=(e,o)=>{o[e]="text"===o[e]?"password":"text"};return(0,r.hi)((()=>{clearInterval(y.telephoneCodeObj.timer)})),(e,t)=>{const i=(0,r.g2)("el-input"),n=(0,r.g2)("el-form-item"),p=(0,r.g2)("el-form");return(0,r.uX)(),(0,r.CE)("div",c,[(0,r.bF)(m.A,{pageName:"register"}),(0,r.Lk)("div",g,[(0,r.Lk)("h6",null,(0,s.v_)(1===y.step?"忘记密码":"重置密码"),1),(0,r.bo)((0,r.bF)(p,{ref_key:"formRef",ref:o,model:V,rules:_},{default:(0,r.k6)((()=>[(0,r.bF)(n,{prop:"mobile"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:V.mobile,"onUpdate:modelValue":t[0]||(t[0]=e=>V.mobile=e),modelModifiers:{trim:!0},placeholder:"手机号"},null,8,["modelValue"])])),_:1}),(0,r.bF)(n,{prop:"imgCode",class:"image-verification"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:V.imgCode,"onUpdate:modelValue":t[1]||(t[1]=e=>V.imgCode=e),modelModifiers:{trim:!0},placeholder:"请输入右侧验证码"},null,8,["modelValue"]),(0,r.Lk)("div",{class:"img-code",onClick:P},[(0,r.Lk)("img",{src:y.imgCodeUrl,alt:""},null,8,h)])])),_:1}),(0,r.bF)(n,{prop:"telephoneCode",class:"telephone-verification"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:V.telephoneCode,"onUpdate:modelValue":t[2]||(t[2]=e=>V.telephoneCode=e),modelModifiers:{trim:!0},placeholder:"请输入4位验证码"},null,8,["modelValue"]),(0,r.Lk)("div",b,[y.telephoneCodeObj.flag?((0,r.uX)(),(0,r.CE)("span",{key:1,class:"word",onClick:j},"获取验证码")):((0,r.uX)(),(0,r.CE)("span",C,(0,s.v_)(y.telephoneCodeObj.count)+"s",1))])])),_:1}),(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{class:"submit-button",onClick:T},"下一步")])),_:1})])),_:1},8,["model"]),[[d.aG,1===y.step]]),(0,r.bo)((0,r.bF)(p,{ref_key:"ruleFormRef",ref:l,model:O,rules:_},{default:(0,r.k6)((()=>[(0,r.bF)(n,{prop:"password",class:"password-item"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:O.password,"onUpdate:modelValue":t[3]||(t[3]=e=>O.password=e),modelModifiers:{trim:!0},placeholder:"请设置新密码",type:y.passwordType},null,8,["modelValue","type"]),((0,r.uX)(),(0,r.CE)("svg",{class:"icon","aria-hidden":"true",onClick:t[4]||(t[4]=e=>I("passwordType",y))},[(0,r.Lk)("use",{"xlink:href":"password"===y.passwordType?"#icon-password-hide":"#icon-password-show"},null,8,f)]))])),_:1}),(0,r.bF)(n,{prop:"rePassword",class:"password-item"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:O.rePassword,"onUpdate:modelValue":t[5]||(t[5]=e=>O.rePassword=e),modelModifiers:{trim:!0},placeholder:"再次输入密码",type:y.rePasswordType},null,8,["modelValue","type"]),((0,r.uX)(),(0,r.CE)("svg",{class:"icon","aria-hidden":"true",onClick:t[6]||(t[6]=e=>I("rePasswordType",y))},[(0,r.Lk)("use",{"xlink:href":"password"===y.rePasswordType?"#icon-password-hide":"#icon-password-show"},null,8,k)]))])),_:1}),(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",{class:"submit-button",onClick:U},"确认")])),_:1})])),_:1},8,["model"]),[[d.aG,2===y.step]])]),(0,r.Lk)("div",w,(0,s.v_)((0,a.R1)(F).copyright),1)])}}}),F=l(83936);const _=(0,F.A)(v,[["__scopeId","data-v-3c46bd94"]]);var y=_}}]);
//# sourceMappingURL=8995.210812cf.js.map