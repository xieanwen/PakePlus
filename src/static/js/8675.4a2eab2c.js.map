{"version":3,"file":"static/js/8675.4a2eab2c.js","mappings":"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","sources":["webpack://daili/./src/components/business-management/ospreyCloudCall/sub-customer/details/third-party-docking/components/parameter-setting.vue?580c","webpack://daili/./src/components/business-management/ospreyCloudCall/sub-customer/details/third-party-docking/components/parameter-setting.vue","webpack://daili/./src/components/business-management/ospreyCloudCall/sub-customer/details/third-party-docking/components/parameter-setting.vue?ddfd"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"parameter-setting\" }\nconst _hoisted_2 = { class: \"inline-form-items\" }\nconst _hoisted_3 = { class: \"inline-form-items-input\" }\nconst _hoisted_4 = { class: \"query-input\" }\nconst _hoisted_5 = { class: \"btn-container\" }\n\nimport { reactive, ref, defineAsyncComponent } from \"vue\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { downloadFile } from \"@api/download-api\";\r\n\r\nimport { serviceName } from \"@assets/common\";\r\nimport { ecLineApi, ecLineInfoApi, seatDeleteApi } from \"@api/ec-line-api\";\r\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'parameter-setting',\n  setup(__props) {\n\r\nconst { routeQuery } = useVueRouter();\r\nconst userInfo = LocalStorage.getItem(\"bd_userInfo\");\r\nconst agentId = LocalStorage.getItem(\"bd_agentId\");\r\nconst importFileRef = ref();\r\nconst formRef = ref();\r\nconst formData = reactive({\r\n  appId: \"\",\r\n  appsecret: \"\",\r\n  token: \"\",\r\n  seat: \"\",\r\n  corpId: \"\",\r\n  id: \"\",\r\n  addSeatVisible: false,\r\n  list: [],\r\n  createdTime: \"\",\r\n  userId: \"\",\r\n  isEditing: false,\r\n  info: \"\",\r\n  seatId: \"\",\r\n  userName: \"\",\r\n  userAccount: \"\",\r\n});\r\n\r\nconst CustomImportFile = defineAsyncComponent(\r\n  () => import(\"@/components/common/custom-import-file.vue\")\r\n);\r\nconst AddSeatDialog = defineAsyncComponent(\r\n  () => import(\"./add-seat-dialog.vue\")\r\n);\r\nconst rules = {\r\n  corpId: [\r\n    {\r\n      required: true,\r\n      message: \"请输入CorpID\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  appId: [\r\n    {\r\n      required: true,\r\n      message: \"请输入APPID\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  appsecret: [\r\n    {\r\n      required: true,\r\n      message: \"请输入APPSECRET\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  token: [\r\n    {\r\n      required: true,\r\n      message: \"请输入TOKEN\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n};\r\n//新增/编辑坐席\r\nfunction handleAddSeat(action: \"add\" | \"edit\", row) {\r\n  formData.info = row;\r\n  if (action === \"edit\" && row) {\r\n    formData.isEditing = true;\r\n  } else {\r\n    formData.isEditing = false;\r\n  }\r\n  formData.addSeatVisible = true;\r\n}\r\n//删除\r\nfunction handleDelete(row) {\r\n  ElMessageBox.confirm(\"您确定要删除该用户吗?\", {\r\n    confirmButtonText: \"确认\",\r\n    cancelButtonText: \"取消\",\r\n    type: \"warning\",\r\n  }).then(async () => {\r\n    const params = {\r\n      id: row.id,\r\n      agentId: agentId,\r\n    };\r\n    const { statusCode, msg } = await seatDeleteApi.getData(params);\r\n    if (statusCode) {\r\n      return ElMessage.warning(msg || \"删除失败\");\r\n    }\r\n    ElMessage.success(msg || \"删除成功\");\r\n    await getEcLineInfo();\r\n  });\r\n}\r\n//坐席批量新增\r\nasync function handleUploadSeat() {\r\n  importFileRef.value.trigger(true, {\r\n    data: {\r\n      companyId: routeQuery.value.companyId,\r\n      profileId: userInfo.profileId,\r\n      userName: userInfo.realName,\r\n    },\r\n    limit: 1,\r\n    autoUpload: false,\r\n    accept: \".xls,.xlsx\",\r\n    actionUrl: `${serviceName.agentSystem}/company-ec/seat/import`,\r\n    templateUrl: () => {\r\n      return downloadFile({\r\n        api: `${serviceName.agentSystem}/company-ec/download/template`,\r\n      });\r\n    },\r\n  });\r\n}\r\n\r\n//保存\r\nconst handleSubmit = () => {\r\n  if (!formRef.value) return;\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      const params = {\r\n        agentId: agentId,\r\n        code: routeQuery.value.code,\r\n        companyId: routeQuery.value.companyId,\r\n        ecAppid: formData.appId,\r\n        ecAppsecret: formData.appsecret,\r\n        ecCorpid: formData.corpId,\r\n        ecToken: formData.token,\r\n        id: formData.id,\r\n      };\r\n      const { statusCode } = await ecLineApi.getData(params);\r\n      if (statusCode === 0) {\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"保存成功\",\r\n        });\r\n        await getEcLineInfo();\r\n      } else {\r\n        ElMessage({\r\n          type: \"warning\",\r\n          message: \"保存失败\",\r\n        });\r\n      }\r\n    } else {\r\n      console.log(\"error submit!\");\r\n    }\r\n  });\r\n};\r\ngetEcLineInfo();\r\n// 获取ec配置信息\r\nasync function getEcLineInfo() {\r\n  const params = {\r\n    companyId: routeQuery.value.companyId,\r\n    userId: formData.seatId,\r\n    userName: formData.userName,\r\n    mobile: formData.userAccount,\r\n  };\r\n  const { data } = await ecLineInfoApi.getData(params);\r\n  const { info, userList } = ecLineInfoApi.handleData(data);\r\n  formData.corpId = info.ecCorpid;\r\n  formData.appId = info.ecAppid;\r\n  formData.appsecret = info.ecAppsecret;\r\n  formData.token = info.ecToken;\r\n  formData.id = info.id;\r\n  formData.createdTime = info.createdTime;\r\n  formData.list = userList;\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_link = _resolveComponent(\"el-link\")!\n  const _component_TableEmpty = _resolveComponent(\"TableEmpty\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_el_form, {\n      class: \"parameter-form\",\n      \"label-position\": \"top\",\n      ref_key: \"formRef\",\n      ref: formRef,\n      rules: rules,\n      model: formData\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_form_item, {\n          label: \"CorpID\",\n          prop: \"corpId\",\n          required: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_input, {\n              modelValue: formData.corpId,\n              \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((formData.corpId) = $event)),\n              placeholder: \"请输入\",\n              maxlength: \"255\",\n              clearable: \"\"\n            }, null, 8, [\"modelValue\"])\n          ]),\n          _: 1\n        }),\n        _createElementVNode(\"div\", _hoisted_2, [\n          _createVNode(_component_el_form_item, {\n            label: \"APPID\",\n            prop: \"appId\",\n            required: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_input, {\n                modelValue: formData.appId,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((formData.appId) = $event)),\n                placeholder: \"请输入\",\n                maxlength: \"255\",\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, {\n            label: \"APPSECRET\",\n            prop: \"appsecret\",\n            required: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_input, {\n                modelValue: formData.appsecret,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((formData.appsecret) = $event)),\n                placeholder: \"请输入\",\n                maxlength: \"255\",\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, {\n            label: \"TOKEN\",\n            prop: \"token\",\n            required: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_input, {\n                modelValue: formData.token,\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((formData.token) = $event)),\n                placeholder: \"请输入\",\n                maxlength: \"255\",\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          })\n        ]),\n        _createVNode(_component_el_form_item, {\n          label: \"坐席设置\",\n          required: \"\",\n          class: \"seat-setting-container\"\n        }, {\n          default: _withCtx(() => _cache[9] || (_cache[9] = [\n            _createElementVNode(\"p\", null, \" （每添加一个坐席，将按照配置的套餐规则进行扣费，服务周期中新增坐席将按整月收取坐席费用，坐席实时生效。） \", -1)\n          ])),\n          _: 1\n        }),\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"div\", _hoisted_4, [\n            _createVNode(_component_el_form_item, { label: \"\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: formData.seatId,\n                  \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((formData.seatId) = $event)),\n                  placeholder: \"请输入用户ID\",\n                  style: {\"width\":\"200px\"},\n                  clearable: \"\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: formData.userName,\n                  \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((formData.userName) = $event)),\n                  placeholder: \"请输入用户名称\",\n                  style: {\"width\":\"200px\"},\n                  clearable: \"\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { label: \"\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_input, {\n                  modelValue: formData.userAccount,\n                  \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((formData.userAccount) = $event)),\n                  placeholder: \"请输入用户账号\",\n                  style: {\"width\":\"200px\"},\n                  clearable: \"\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              onClick: getEcLineInfo\n            }, {\n              default: _withCtx(() => _cache[10] || (_cache[10] = [\n                _createTextVNode(\"查询\")\n              ])),\n              _: 1\n            })\n          ]),\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              class: \"add-btn\",\n              onClick: _cache[7] || (_cache[7] = ($event: any) => (handleAddSeat('add', '')))\n            }, {\n              default: _withCtx(() => _cache[11] || (_cache[11] = [\n                _createTextVNode(\"新增坐席\")\n              ])),\n              _: 1\n            }),\n            _createVNode(_component_el_button, {\n              type: \"primary\",\n              onClick: handleUploadSeat\n            }, {\n              default: _withCtx(() => _cache[12] || (_cache[12] = [\n                _createTextVNode(\"坐席批量导入\")\n              ])),\n              _: 1\n            })\n          ])\n        ]),\n        _createVNode(_component_el_form_item, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_table, {\n              data: formData.list,\n              border: \"\",\n              \"max-height\": \"450\",\n              style: {\"width\":\"100%\"}\n            }, {\n              empty: _withCtx(() => [\n                _createVNode(_component_TableEmpty, { \"empty-text\": \"暂无坐席\" })\n              ]),\n              default: _withCtx(() => [\n                _createVNode(_component_el_table_column, {\n                  prop: \"userId\",\n                  label: \"用户ID\",\n                  align: \"center\"\n                }),\n                _createVNode(_component_el_table_column, {\n                  prop: \"userName\",\n                  label: \"用户名称\",\n                  align: \"center\"\n                }),\n                _createVNode(_component_el_table_column, {\n                  prop: \"mobile\",\n                  label: \"用户账号\",\n                  align: \"center\"\n                }),\n                _createVNode(_component_el_table_column, {\n                  align: \"center\",\n                  label: \"操作\"\n                }, {\n                  default: _withCtx(({ row }) => [\n                    _createVNode(_component_el_link, {\n                      type: \"primary\",\n                      underline: false,\n                      onClick: ($event: any) => (handleAddSeat('edit', row))\n                    }, {\n                      default: _withCtx(() => _cache[13] || (_cache[13] = [\n                        _createTextVNode(\"编辑\")\n                      ])),\n                      _: 2\n                    }, 1032, [\"onClick\"]),\n                    _createVNode(_component_el_link, {\n                      type: \"primary\",\n                      underline: false,\n                      onClick: ($event: any) => (handleDelete(row))\n                    }, {\n                      default: _withCtx(() => _cache[14] || (_cache[14] = [\n                        _createTextVNode(\"删除\")\n                      ])),\n                      _: 2\n                    }, 1032, [\"onClick\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"data\"])\n          ]),\n          _: 1\n        }),\n        _createVNode(_component_el_form_item, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_button, {\n              style: {\"margin-top\":\"30px\"},\n              type: \"primary\",\n              onClick: handleSubmit\n            }, {\n              default: _withCtx(() => _cache[15] || (_cache[15] = [\n                _createTextVNode(\"保存\")\n              ])),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }, 8, [\"model\"]),\n    _createVNode(_unref(CustomImportFile), {\n      ref_key: \"importFileRef\",\n      ref: importFileRef,\n      onEmitFunc: getEcLineInfo\n    }, null, 512),\n    _createVNode(_unref(AddSeatDialog), {\n      visible: formData.addSeatVisible,\n      \"onUpdate:visible\": _cache[8] || (_cache[8] = ($event: any) => ((formData.addSeatVisible) = $event)),\n      info: formData.info,\n      isEditing: formData.isEditing,\n      onEmitFunc: getEcLineInfo\n    }, null, 8, [\"visible\", \"info\", \"isEditing\"])\n  ]))\n}\n}\n\n})","<template>\r\n  <div class=\"parameter-setting\">\r\n    <el-form\r\n      class=\"parameter-form\"\r\n      label-position=\"top\"\r\n      ref=\"formRef\"\r\n      :rules=\"rules\"\r\n      :model=\"formData\"\r\n    >\r\n      <el-form-item label=\"CorpID\" prop=\"corpId\" required>\r\n        <el-input\r\n          v-model=\"formData.corpId\"\r\n          placeholder=\"请输入\"\r\n          maxlength=\"255\"\r\n          clearable\r\n        />\r\n      </el-form-item>\r\n      <div class=\"inline-form-items\">\r\n        <el-form-item label=\"APPID\" prop=\"appId\" required>\r\n          <el-input\r\n            v-model=\"formData.appId\"\r\n            placeholder=\"请输入\"\r\n            maxlength=\"255\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"APPSECRET\" prop=\"appsecret\" required>\r\n          <el-input\r\n            v-model=\"formData.appsecret\"\r\n            placeholder=\"请输入\"\r\n            maxlength=\"255\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"TOKEN\" prop=\"token\" required>\r\n          <el-input\r\n            v-model=\"formData.token\"\r\n            placeholder=\"请输入\"\r\n            maxlength=\"255\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n      </div>\r\n      <el-form-item label=\"坐席设置\" required class=\"seat-setting-container\">\r\n        <p>\r\n          （每添加一个坐席，将按照配置的套餐规则进行扣费，服务周期中新增坐席将按整月收取坐席费用，坐席实时生效。）\r\n        </p>\r\n      </el-form-item>\r\n      <div class=\"inline-form-items-input\">\r\n        <div class=\"query-input\">\r\n          <el-form-item label=\"\">\r\n            <el-input\r\n              v-model=\"formData.seatId\"\r\n              placeholder=\"请输入用户ID\"\r\n              style=\"width: 200px\"\r\n              clearable\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-input\r\n              v-model=\"formData.userName\"\r\n              placeholder=\"请输入用户名称\"\r\n              style=\"width: 200px\"\r\n              clearable\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"\">\r\n            <el-input\r\n              v-model=\"formData.userAccount\"\r\n              placeholder=\"请输入用户账号\"\r\n              style=\"width: 200px\"\r\n              clearable\r\n            />\r\n          </el-form-item>\r\n          <el-button type=\"primary\" @click=\"getEcLineInfo\">查询</el-button>\r\n        </div>\r\n        <div class=\"btn-container\">\r\n          <el-button\r\n            type=\"primary\"\r\n            class=\"add-btn\"\r\n            @click=\"handleAddSeat('add', '')\"\r\n            >新增坐席</el-button\r\n          >\r\n          <el-button type=\"primary\" @click=\"handleUploadSeat\"\r\n            >坐席批量导入</el-button\r\n          >\r\n        </div>\r\n      </div>\r\n      <el-form-item>\r\n        <el-table\r\n          :data=\"formData.list\"\r\n          border\r\n          max-height=\"450\"\r\n          style=\"width: 100%\"\r\n        >\r\n          <el-table-column\r\n            prop=\"userId\"\r\n            label=\"用户ID\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"userName\"\r\n            label=\"用户名称\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column\r\n            prop=\"mobile\"\r\n            label=\"用户账号\"\r\n            align=\"center\"\r\n          ></el-table-column>\r\n          <el-table-column align=\"center\" label=\"操作\">\r\n            <template #default=\"{ row }\">\r\n              <el-link\r\n                type=\"primary\"\r\n                :underline=\"false\"\r\n                @click=\"handleAddSeat('edit', row)\"\r\n                >编辑</el-link\r\n              >\r\n              <el-link\r\n                type=\"primary\"\r\n                :underline=\"false\"\r\n                @click=\"handleDelete(row)\"\r\n                >删除</el-link\r\n              >\r\n            </template>\r\n          </el-table-column>\r\n          <template #empty>\r\n            <TableEmpty empty-text=\"暂无坐席\"></TableEmpty>\r\n          </template>\r\n        </el-table>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button style=\"margin-top: 30px\" type=\"primary\" @click=\"handleSubmit\"\r\n          >保存</el-button\r\n        >\r\n      </el-form-item>\r\n    </el-form>\r\n    <CustomImportFile\r\n      ref=\"importFileRef\"\r\n      @emitFunc=\"getEcLineInfo\"\r\n    ></CustomImportFile>\r\n    <AddSeatDialog\r\n      v-model:visible=\"formData.addSeatVisible\"\r\n      :info=\"formData.info\"\r\n      :isEditing=\"formData.isEditing\"\r\n      @emitFunc=\"getEcLineInfo\"\r\n    ></AddSeatDialog>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { reactive, ref, defineAsyncComponent } from \"vue\";\r\nimport { LocalStorage } from \"jz-tool-lib\";\r\nimport { useVueRouter } from \"@assets/useHook\";\r\nimport { ElMessage, ElMessageBox } from \"element-plus\";\r\nimport { downloadFile } from \"@api/download-api\";\r\n\r\nconst { routeQuery } = useVueRouter();\r\nconst userInfo = LocalStorage.getItem(\"bd_userInfo\");\r\nconst agentId = LocalStorage.getItem(\"bd_agentId\");\r\nimport { serviceName } from \"@assets/common\";\r\nimport { ecLineApi, ecLineInfoApi, seatDeleteApi } from \"@api/ec-line-api\";\r\nconst importFileRef = ref();\r\nconst formRef = ref();\r\nconst formData = reactive({\r\n  appId: \"\",\r\n  appsecret: \"\",\r\n  token: \"\",\r\n  seat: \"\",\r\n  corpId: \"\",\r\n  id: \"\",\r\n  addSeatVisible: false,\r\n  list: [],\r\n  createdTime: \"\",\r\n  userId: \"\",\r\n  isEditing: false,\r\n  info: \"\",\r\n  seatId: \"\",\r\n  userName: \"\",\r\n  userAccount: \"\",\r\n});\r\n\r\nconst CustomImportFile = defineAsyncComponent(\r\n  () => import(\"@/components/common/custom-import-file.vue\")\r\n);\r\nconst AddSeatDialog = defineAsyncComponent(\r\n  () => import(\"./add-seat-dialog.vue\")\r\n);\r\nconst rules = {\r\n  corpId: [\r\n    {\r\n      required: true,\r\n      message: \"请输入CorpID\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  appId: [\r\n    {\r\n      required: true,\r\n      message: \"请输入APPID\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  appsecret: [\r\n    {\r\n      required: true,\r\n      message: \"请输入APPSECRET\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n  token: [\r\n    {\r\n      required: true,\r\n      message: \"请输入TOKEN\",\r\n      trigger: \"blur\",\r\n    },\r\n  ],\r\n};\r\n//新增/编辑坐席\r\nfunction handleAddSeat(action: \"add\" | \"edit\", row) {\r\n  formData.info = row;\r\n  if (action === \"edit\" && row) {\r\n    formData.isEditing = true;\r\n  } else {\r\n    formData.isEditing = false;\r\n  }\r\n  formData.addSeatVisible = true;\r\n}\r\n//删除\r\nfunction handleDelete(row) {\r\n  ElMessageBox.confirm(\"您确定要删除该用户吗?\", {\r\n    confirmButtonText: \"确认\",\r\n    cancelButtonText: \"取消\",\r\n    type: \"warning\",\r\n  }).then(async () => {\r\n    const params = {\r\n      id: row.id,\r\n      agentId: agentId,\r\n    };\r\n    const { statusCode, msg } = await seatDeleteApi.getData(params);\r\n    if (statusCode) {\r\n      return ElMessage.warning(msg || \"删除失败\");\r\n    }\r\n    ElMessage.success(msg || \"删除成功\");\r\n    await getEcLineInfo();\r\n  });\r\n}\r\n//坐席批量新增\r\nasync function handleUploadSeat() {\r\n  importFileRef.value.trigger(true, {\r\n    data: {\r\n      companyId: routeQuery.value.companyId,\r\n      profileId: userInfo.profileId,\r\n      userName: userInfo.realName,\r\n    },\r\n    limit: 1,\r\n    autoUpload: false,\r\n    accept: \".xls,.xlsx\",\r\n    actionUrl: `${serviceName.agentSystem}/company-ec/seat/import`,\r\n    templateUrl: () => {\r\n      return downloadFile({\r\n        api: `${serviceName.agentSystem}/company-ec/download/template`,\r\n      });\r\n    },\r\n  });\r\n}\r\n\r\n//保存\r\nconst handleSubmit = () => {\r\n  if (!formRef.value) return;\r\n  formRef.value.validate(async (valid) => {\r\n    if (valid) {\r\n      const params = {\r\n        agentId: agentId,\r\n        code: routeQuery.value.code,\r\n        companyId: routeQuery.value.companyId,\r\n        ecAppid: formData.appId,\r\n        ecAppsecret: formData.appsecret,\r\n        ecCorpid: formData.corpId,\r\n        ecToken: formData.token,\r\n        id: formData.id,\r\n      };\r\n      const { statusCode } = await ecLineApi.getData(params);\r\n      if (statusCode === 0) {\r\n        ElMessage({\r\n          type: \"success\",\r\n          message: \"保存成功\",\r\n        });\r\n        await getEcLineInfo();\r\n      } else {\r\n        ElMessage({\r\n          type: \"warning\",\r\n          message: \"保存失败\",\r\n        });\r\n      }\r\n    } else {\r\n      console.log(\"error submit!\");\r\n    }\r\n  });\r\n};\r\ngetEcLineInfo();\r\n// 获取ec配置信息\r\nasync function getEcLineInfo() {\r\n  const params = {\r\n    companyId: routeQuery.value.companyId,\r\n    userId: formData.seatId,\r\n    userName: formData.userName,\r\n    mobile: formData.userAccount,\r\n  };\r\n  const { data } = await ecLineInfoApi.getData(params);\r\n  const { info, userList } = ecLineInfoApi.handleData(data);\r\n  formData.corpId = info.ecCorpid;\r\n  formData.appId = info.ecAppid;\r\n  formData.appsecret = info.ecAppsecret;\r\n  formData.token = info.ecToken;\r\n  formData.id = info.id;\r\n  formData.createdTime = info.createdTime;\r\n  formData.list = userList;\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.parameter-form {\r\n  background: #ffffff;\r\n  padding: 30px;\r\n  .el-input {\r\n    width: 300px;\r\n  }\r\n}\r\n.inline-form-items {\r\n  display: flex;\r\n  gap: 20px;\r\n}\r\n.seat-setting-container {\r\n  display: flex;\r\n  align-items: baseline;\r\n  p {\r\n    color: #9ca6b9;\r\n    font-size: 12px;\r\n  }\r\n}\r\n.add-btn {\r\n  margin-left: 0px;\r\n}\r\n:deep(.el-link) {\r\n  margin-left: 5px;\r\n}\r\n.inline-form-items-input {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.query-input {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 20px;\r\n}\r\n</style>\r\n","import script from \"./parameter-setting.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./parameter-setting.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./parameter-setting.vue?vue&type=style&index=0&id=24597bb2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../../../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_typescript@5.7.2__webpack@5.97.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-24597bb2\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_defineComponent","__name","setup","__props","routeQuery","useVueRouter","userInfo","LocalStorage","getItem","agentId","importFileRef","ref","formRef","formData","reactive","appId","appsecret","token","seat","corpId","id","addSeatVisible","list","createdTime","userId","isEditing","info","seatId","userName","userAccount","CustomImportFile","defineAsyncComponent","AddSeatDialog","rules","required","message","trigger","handleAddSeat","action","row","handleDelete","ElMessageBox","confirm","confirmButtonText","cancelButtonText","type","then","async","params","statusCode","msg","seatDeleteApi","getData","ElMessage","warning","success","getEcLineInfo","handleUploadSeat","value","data","companyId","profileId","realName","limit","autoUpload","accept","actionUrl","serviceName","agentSystem","templateUrl","downloadFile","api","handleSubmit","validate","valid","code","ecAppid","ecAppsecret","ecCorpid","ecToken","ecLineApi","console","log","mobile","ecLineInfoApi","userList","handleData","_ctx","_cache","_component_el_input","_resolveComponent","_component_el_form_item","_component_el_button","_component_el_table_column","_component_el_link","_component_TableEmpty","_component_el_table","_component_el_form","_openBlock","_createElementBlock","_createVNode","ref_key","model","default","_withCtx","label","prop","modelValue","$event","placeholder","maxlength","clearable","_","_createElementVNode","style","onClick","_createTextVNode","border","empty","align","underline","_unref","onEmitFunc","visible","__exports__"],"sourceRoot":""}