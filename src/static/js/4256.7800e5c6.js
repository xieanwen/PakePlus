"use strict";(self["webpackChunkdaili"]=self["webpackChunkdaili"]||[]).push([[4256],{64256:function(e,a,l){l.r(a),l.d(a,{default:function(){return ue}});l(95226),l(59784),l(29296),l(83238);var t=l(6254),o=l(59115),n=l(25598),s=l(59259),i=l(38627);const d={class:"agent-info"},r={class:"title"},c={class:"info"},u={class:"item"},p={class:"value"},m={class:"item"},b={class:"value"},k={class:"item"},g={class:"value"},f={class:"item"},v={class:"value"},h={class:"item"},y={class:"value"};var _=(0,t.pM)({__name:"agent-info",props:{agentInfo:{}},emits:["emitPassword","emitTelephone"],setup(e,{emit:a}){const l=a,o=()=>{l("emitPassword",!0)},n=()=>{l("emitTelephone",!0)};return(e,a)=>((0,t.uX)(),(0,t.CE)("div",d,[(0,t.Lk)("h6",r,(0,i.v_)(e.agentInfo.companyName??"--"),1),(0,t.Lk)("ul",c,[(0,t.Lk)("li",u,[a[0]||(a[0]=(0,t.Lk)("span",{class:"label"},"姓名",-1)),(0,t.Lk)("p",p,(0,i.v_)(e.agentInfo.userName),1)]),(0,t.Lk)("li",m,[a[1]||(a[1]=(0,t.Lk)("span",{class:"label"},"公司",-1)),(0,t.Lk)("p",b,(0,i.v_)(e.agentInfo.companyName),1)]),(0,t.Lk)("li",k,[a[2]||(a[2]=(0,t.Lk)("span",{class:"label"},"手机",-1)),(0,t.Lk)("p",g,[(0,t.Lk)("span",null,(0,i.v_)(e.agentInfo.mobilePhone),1),(0,t.Lk)("span",{onClick:n},"变更")])]),(0,t.Lk)("li",{class:"item"},[a[4]||(a[4]=(0,t.Lk)("span",{class:"label"},"密码",-1)),(0,t.Lk)("p",{class:"value"},[a[3]||(a[3]=(0,t.Lk)("span",null,"........",-1)),(0,t.Lk)("span",{onClick:o},"修改")])]),(0,t.Lk)("li",f,[a[5]||(a[5]=(0,t.Lk)("span",{class:"label"},"地址",-1)),(0,t.Lk)("p",v,(0,i.v_)(e.agentInfo.addressAll??"--"),1)]),(0,t.Lk)("li",h,[a[6]||(a[6]=(0,t.Lk)("span",{class:"label"},"公司代码",-1)),(0,t.Lk)("p",y,(0,i.v_)(e.agentInfo.companyCode),1)])])]))}}),F=l(83936);const w=(0,F.A)(_,[["__scopeId","data-v-65e0a456"]]);var L=w,C=l(616),V=(0,t.pM)({__name:"rebate-list",props:{list:{}},setup(e){const a=({row:e,columnIndex:a})=>{if(0===a)return e.appListLength>0?{rowspan:e.appListLength,colspan:1}:{rowspan:0,colspan:0}};return(e,l)=>{const o=(0,t.g2)("el-table-column"),s=(0,t.g2)("TableEmpty"),i=(0,t.g2)("el-table");return(0,t.uX)(),(0,t.Wv)(i,{data:e.list,style:{width:"100%"},"span-method":a},{empty:(0,t.k6)((()=>[(0,t.bF)(s,{"empty-text":"暂无记录"})])),default:(0,t.k6)((()=>[(0,t.bF)(o,{align:"center",prop:"productName",label:["ec-line"].includes((0,n.R1)(C.N9))?"系列名称":"数企系列"},null,8,["label"]),(0,t.bF)(o,{align:"center",prop:"appName",label:"产品名称"}),(0,t.bF)(o,{align:"center",prop:"marketPrice",label:"市场价"}),(0,t.bF)(o,{align:"center",prop:"lowLevelPrice",label:"白金服务商"}),(0,t.bF)(o,{align:"center",prop:"midLevelPrice",label:"铂金服务商"}),(0,t.bF)(o,{align:"center",prop:"highLevelPrice",label:"钻石服务商"})])),_:1},8,["data"])}}});const I=V;var N=I;const A={class:"account-list"},P={class:"title"},D={key:0,class:"list"},W={class:"bank"},T={class:"name-account"},O={class:"name"},j={class:"account"};var E=(0,t.pM)({__name:"account-list",props:{bankAccountList:{}},emits:["emitAccountDialog","emitDeleteAccount"],setup(e,{emit:a}){const l=a,o=e=>{const a=JSON.parse(e.split("-bd-")[1]);/^delete/.test(e)?s(a):/^edit/.test(e)&&n("modify",a)},n=(e,a)=>{l("emitAccountDialog",{type:e,value:a})},s=e=>{l("emitDeleteAccount",e)};return(e,a)=>{const l=(0,t.g2)("el-dropdown-item"),s=(0,t.g2)("el-dropdown-menu"),d=(0,t.g2)("el-dropdown"),r=(0,t.g2)("TableEmpty");return(0,t.uX)(),(0,t.CE)("div",A,[(0,t.Lk)("div",P,[a[1]||(a[1]=(0,t.Lk)("span",null,"我的账户",-1)),(0,t.Lk)("span",{onClick:a[0]||(a[0]=e=>n("add",""))},"添加账户")]),e.bankAccountList.length?((0,t.uX)(),(0,t.CE)("ul",D,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.bankAccountList,(e=>((0,t.uX)(),(0,t.CE)("li",{class:"item",key:e.id},[(0,t.Lk)("div",W,[(0,t.Lk)("span",null,(0,i.v_)(e.bankName),1),(0,t.bF)(d,{onCommand:o,size:"small",trigger:"click"},{dropdown:(0,t.k6)((()=>[(0,t.bF)(s,null,{default:(0,t.k6)((()=>[(0,t.bF)(l,{command:`delete-bd-${JSON.stringify(e)}`},{default:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.eW)("删除")]))),_:2},1032,["command"]),(0,t.bF)(l,{command:`edit-bd-${JSON.stringify(e)}`},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("修改")]))),_:2},1032,["command"])])),_:2},1024)])),default:(0,t.k6)((()=>[a[4]||(a[4]=(0,t.Lk)("svg",{class:"icon icon-more-operation","aria-hidden":"true"},[(0,t.Lk)("use",{"xlink:href":"#icon-more-operation"})],-1))])),_:2},1024)]),(0,t.Lk)("div",T,[(0,t.Lk)("p",O,(0,i.v_)(e.ownerName),1),(0,t.Lk)("p",j,(0,i.v_)(e.account),1)])])))),128))])):((0,t.uX)(),(0,t.Wv)(r,{key:1,elHeight:"140px","empty-text":"您还没有添加账户，试试点击右上角去添加"}))])}}});const K=(0,F.A)(E,[["__scopeId","data-v-c2ac10a2"]]);var x=K,B=l(88365),X=l(10901),R=l(27656),U=l(74718);const M={class:"dialog-footer"};var q=(0,t.pM)({__name:"modify-password-dialog",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:a}){const l=a,o=(0,n.KR)(),{goPage:i}=(0,X.dG)(),d=B.DT.getItem("bd_authorization"),r=(0,n.Kh)({submitFlag:!1}),c=(0,n.Kh)({oldPwd:"",password:"",rePassword:""}),u={oldPwd:[{required:!0,message:"请输入旧密码",trigger:"blur"}],password:[{validator:(e,a,l)=>{(0,R.Oj)(e,a,l,c,o,"rePassword")},trigger:"blur"}],rePassword:[{validator:(e,a,l)=>{(0,R.lx)(e,a,l,c,"password")},trigger:"blur"}]},p=()=>{o.value.validate((e=>{if(!e)return!1;{if(r.submitFlag)return;r.submitFlag=!0;let e={oldPwd:c.oldPwd,newPwd:c.password,token:d};U.AK.getData(e).then((()=>{r.submitFlag=!1,(0,s.nk)({message:"密码修改成功,请重新登录",type:"success"}),i("/login")})).catch((e=>{console.log(e),r.submitFlag=!1}))}}))},m=()=>{l("update:visible",!1),o.value.resetFields()};return(e,a)=>{const l=(0,t.g2)("el-input"),n=(0,t.g2)("el-form-item"),s=(0,t.g2)("el-form"),i=(0,t.g2)("el-button"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{class:"custom-dialog",width:"500px","lock-scroll":"","append-to-body":"","close-on-click-modal":!1,title:"修改密码","model-value":e.visible,onClose:m},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",M,[(0,t.bF)(i,{onClick:m},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(i,{type:"primary",color:"#0056ff",onClick:p},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("确定")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"form",ref_key:"ruleFormRef",ref:o,model:c,rules:u,"label-width":"80px"},{default:(0,t.k6)((()=>[(0,t.bF)(n,{label:"旧密码",prop:"oldPwd"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:c.oldPwd,"onUpdate:modelValue":a[0]||(a[0]=e=>c.oldPwd=e),type:"password",placeholder:"请输入旧密码"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"新密码",prop:"password"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:c.password,"onUpdate:modelValue":a[1]||(a[1]=e=>c.password=e),type:"password",placeholder:"请输入新密码"},null,8,["modelValue"])])),_:1}),(0,t.bF)(n,{label:"确认密码",prop:"rePassword"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:c.rePassword,"onUpdate:modelValue":a[2]||(a[2]=e=>c.rePassword=e),type:"password",placeholder:"请再次输入确认密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["model-value"])}}});const G=(0,F.A)(q,[["__scopeId","data-v-4a5ff90c"]]);var z=G,S=l(58011);const J={class:"dialog-footer"};var Q=(0,t.pM)({__name:"add-modify-account-dialog",props:{visible:{type:Boolean},modifyBankInfo:{}},emits:["update:visible"],setup(e,{emit:a}){const l=e,s=a,i=(0,n.KR)(),d=(0,o.Pj)(),r={account:[{required:!0,message:"请输入银行卡号",trigger:"blur"}],bankName:[{required:!0,message:"请输入银行名称",trigger:"blur"}],ownerName:[{required:!0,message:"请输入持卡人",trigger:"blur"}]},c=(0,n.Kh)({dialogTitle:"添加账户",submitFlag:!1}),u=(0,n.Kh)({account:"",bankName:"",ownerName:""}),p=()=>{g();const e=l.modifyBankInfo;"add"===e.type?c.dialogTitle="添加账户":(c.dialogTitle="修改账户",u.account=e.value.account,u.bankName=e.value.bankName,u.ownerName=e.value.ownerName)},m=()=>{s("update:visible",!1),i.value.clearValidate()},b=()=>{i.value.validate((e=>{if(!e)return!1;{if(c.submitFlag)return;c.submitFlag=!0;let e=u;const a=l.modifyBankInfo;"modify"===a.type&&(e=Object.assign(e,{id:a.value.id})),k(a.type,e).then((l=>{c.submitFlag=!1;let t="";t="add"===a.type?Object.assign(l.data,{submitType:a.type}):Object.assign(e,{submitType:a.type}),d.state.personalCenter.bankInfo=t,s("update:visible",!1)})).catch((()=>{c.submitFlag=!1}))}}))},k=(e,a)=>"modify"===e?S.S3.getData(a):S.li.getData(a),g=()=>{u.account="",u.bankName="",u.ownerName=""};return(e,a)=>{const l=(0,t.g2)("el-input"),o=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{class:"custom-dialog",width:"450px","lock-scroll":"","append-to-body":"","close-on-click-modal":!1,title:c.dialogTitle,"model-value":e.visible,onClose:a[3]||(a[3]=a=>e.$emit("update:visible",!1)),onOpen:p},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",J,[(0,t.bF)(s,{onClick:m},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("取消")]))),_:1}),(0,t.bF)(s,{type:"primary",color:"#0056ff",onClick:b},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("确定 ")]))),_:1})])])),default:(0,t.k6)((()=>[(0,t.bF)(n,{class:"form",ref_key:"formRef",ref:i,model:u,rules:r,"label-width":"80px"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{label:"银行卡号",prop:"account"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:u.account,"onUpdate:modelValue":a[0]||(a[0]=e=>u.account=e),placeholder:"请输入银行卡号"},null,8,["modelValue"])])),_:1}),(0,t.bF)(o,{label:"银行名称",prop:"bankName"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:u.bankName,"onUpdate:modelValue":a[1]||(a[1]=e=>u.bankName=e),placeholder:"请输入银行名称"},null,8,["modelValue"])])),_:1}),(0,t.bF)(o,{label:"持卡人",prop:"ownerName"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:u.ownerName,"onUpdate:modelValue":a[2]||(a[2]=e=>u.ownerName=e),placeholder:"请输入持卡人"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["title","model-value"])}}});const $=(0,F.A)(Q,[["__scopeId","data-v-c1df6f10"]]);var H=$,Y=l(55533);const Z={class:"telephone-code"},ee={key:0,class:"count"},ae={class:"dialog-footer"};var le=(0,t.pM)({__name:"chang-telephone-number-dialog",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:a}){const l=a,{bd_userInfo:o,bd_authorization:d}=B.DT.batchGetItem(["bd_userInfo","bd_authorization"]),r=(0,n.KR)(),c=(0,n.KR)(),u={mobile:[{required:!0,message:"请输入手机号码",trigger:"blur"}],telephoneCode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]},p={passWord:[{required:!0,message:"请输入登陆密码",trigger:"blur"}]},m=(0,n.Kh)({mobile:"",mobileCode:""}),b=(0,n.Kh)({passWord:""}),k=(0,n.Kh)({step:1,submitFlag:!1,dialogTitle:"安全验证",telephoneCodeObj:{flag:!0,timer:0,count:60},telephoneCodeFlag:!1}),g=()=>{k.step=1,r.value.resetFields(),c.value.resetFields(),l("update:visible",!1)},f=()=>{let e={userName:o.mobile,passWord:b.passWord,auto:0,terminaltype:"WEB"};c.value.validate((a=>{if(!a)return!1;U.s.getData(e).then((e=>{const a=e.data;B.DT.setItem("bd_authorization",a.auth.accessToken),k.step=2,k.dialogTitle="修改手机号"}))}))},v=()=>{if(k.telephoneCodeFlag)return;if(k.telephoneCodeFlag=!0,!m.mobile)return k.telephoneCodeFlag=!1,void s.nk.error("请输入手机号");if(!(0,B.Pk)(m.mobile))return k.telephoneCodeFlag=!1,void s.nk.error("请输入正确的手机号码");let e={mobile:m.mobile,token:d};U.oN.getData(e).then((()=>{s.nk.error("短信已发送"),k.telephoneCodeFlag=!1,h()})).catch((()=>{k.telephoneCodeFlag=!1}))},h=()=>{k.telephoneCodeObj.timer=setInterval((()=>{0===k.telephoneCodeObj.count?(clearInterval(k.telephoneCodeObj.timer),k.telephoneCodeObj.flag=!0,k.telephoneCodeObj.count=60):(k.telephoneCodeObj.flag=!1,k.telephoneCodeObj.count-=1)}),1e3)},y=()=>{r.value.validate((e=>{if(!e)return!1;{if(k.submitFlag)return;k.submitFlag=!0;let e={mobile:m.mobile,checkCode:m.mobileCode};U.EQ.getData(e).then((()=>{_()}))}}))},_=()=>{let e={mobile:m.mobile,token:d};U.fp.getData(e).then((e=>{1===e.data.rspCode?s.nk.error(e.data.rspMsg):(F(),l("update:visible",!1))}))},F=()=>{U.ge.getData({mobile:m.mobile})};return(e,a)=>{const l=(0,t.g2)("el-input"),o=(0,t.g2)("el-form-item"),n=(0,t.g2)("el-form"),s=(0,t.g2)("el-button"),d=(0,t.g2)("el-dialog");return(0,t.uX)(),(0,t.Wv)(d,{class:"custom-dialog",width:"450px","lock-scroll":"","append-to-body":"","close-on-click-modal":!1,title:k.dialogTitle,"model-value":e.visible,onClose:g},{footer:(0,t.k6)((()=>[(0,t.Lk)("div",ae,[(0,t.bo)((0,t.bF)(s,{type:"primary",onClick:f},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("下一步")]))),_:1},512),[[Y.aG,1===k.step]]),(0,t.bo)((0,t.bF)(s,{onClick:g},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("取消")]))),_:1},512),[[Y.aG,2===k.step]]),(0,t.bo)((0,t.bF)(s,{type:"primary",onClick:y},{default:(0,t.k6)((()=>a[5]||(a[5]=[(0,t.eW)("确定")]))),_:1},512),[[Y.aG,2===k.step]])])])),default:(0,t.k6)((()=>[(0,t.bo)((0,t.bF)(n,{class:"form",ref_key:"formSecurityRef",ref:c,model:b,rules:p,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{label:"登录密码",prop:"passWord"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:b.passWord,"onUpdate:modelValue":a[0]||(a[0]=e=>b.passWord=e),type:"password",placeholder:"请输入登陆密码"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),[[Y.aG,1===k.step]]),(0,t.bo)((0,t.bF)(n,{class:"form",ref_key:"formRef",ref:r,model:m,rules:u,"label-width":"100px"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{label:"手机号",prop:"mobile"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:m.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>m.mobile=e),placeholder:"请输入新手机号"},null,8,["modelValue"])])),_:1}),(0,t.bF)(o,{label:"短信验证码",prop:"mobileCode",class:"telephone-verification"},{default:(0,t.k6)((()=>[(0,t.bF)(l,{modelValue:m.mobileCode,"onUpdate:modelValue":a[2]||(a[2]=e=>m.mobileCode=e),placeholder:"请输入短信验证码"},null,8,["modelValue"]),(0,t.Lk)("div",Z,[k.telephoneCodeObj.flag?((0,t.uX)(),(0,t.CE)("span",{key:1,class:"word",onClick:v},"获取验证码")):((0,t.uX)(),(0,t.CE)("span",ee,(0,i.v_)(k.telephoneCodeObj.count)+"s",1))])])),_:1})])),_:1},8,["model"]),[[Y.aG,2===k.step]])])),_:1},8,["title","model-value"])}}});const te=(0,F.A)(le,[["__scopeId","data-v-d44695d4"]]);var oe=te;const ne={class:"personal-center main-container"},se={class:"company-account"},ie={class:"rebate"},de={name:"personal-center"};var re=(0,t.pM)({...de,setup(e){const a=(0,o.Pj)(),l=(0,n.Kh)({agentInfo:{},passwordVisible:!1,telephoneVisible:!1,bankAccountList:[],accountVisible:!1,modifyBankInfo:{},productRebateList:[]}),i=async()=>{try{const{data:e}=await S.Qc.getData();l.agentInfo=S.Qc.handleData(e)}catch(e){console.log(e)}},d=()=>{l.passwordVisible=!0},r=()=>{l.telephoneVisible=!0},c=async()=>{try{const{data:e}=await S.K3.getData();l.bankAccountList=S.K3.handleData(e)}catch(e){console.log(e)}},u=e=>{l.accountVisible=!0,l.modifyBankInfo=e},p=async e=>{try{const a={id:e.id},{data:t}=await S.zk.getData(a);t?(s.nk.success("删除成功"),l.bankAccountList=l.bankAccountList.filter((a=>a.id!==e.id))):s.nk.error("删除失败")}catch(a){console.log(a)}},m=async()=>{try{const{data:e}=await S.n8.getData();l.productRebateList=S.n8.handleData(e)}catch(e){console.log(e)}};return(0,t.wB)((()=>l.accountVisible),(e=>{if(!e&&a.state.personalCenter.bankInfo){const e=a.state.personalCenter.bankInfo;"modify"===e.submitType?l.bankAccountList.map((a=>(a.id===e.id&&(a.account=e.account,a.bankName=e.bankName,a.ownerName=e.ownerName),a))):l.bankAccountList.push(a.state.personalCenter.bankInfo),a.state.personalCenter.bankInfo=""}})),c(),m(),i(),(e,a)=>((0,t.uX)(),(0,t.CE)("div",ne,[(0,t.Lk)("div",se,[(0,t.bF)(L,{agentInfo:l.agentInfo,onEmitPassword:d,onEmitTelephone:r},null,8,["agentInfo"]),(0,t.bF)(x,{bankAccountList:l.bankAccountList,onEmitDeleteAccount:p,onEmitAccountDialog:u},null,8,["bankAccountList"])]),(0,t.Lk)("div",ie,[a[3]||(a[3]=(0,t.Lk)("h6",{class:"title"},"产品返佣体系",-1)),(0,t.bF)(N,{list:l.productRebateList},null,8,["list"])]),(0,t.bF)(H,{visible:l.accountVisible,"onUpdate:visible":a[0]||(a[0]=e=>l.accountVisible=e),modifyBankInfo:l.modifyBankInfo},null,8,["visible","modifyBankInfo"]),(0,t.bF)(z,{visible:l.passwordVisible,"onUpdate:visible":a[1]||(a[1]=e=>l.passwordVisible=e)},null,8,["visible"]),(0,t.bF)(oe,{visible:l.telephoneVisible,"onUpdate:visible":a[2]||(a[2]=e=>l.telephoneVisible=e)},null,8,["visible"])]))}});const ce=(0,F.A)(re,[["__scopeId","data-v-0525e473"]]);var ue=ce}}]);
//# sourceMappingURL=4256.7800e5c6.js.map